"use strict";(self.webpackChunkenergy_and_water_dashboard=self.webpackChunkenergy_and_water_dashboard||[]).push([[1042],{6658:function(e,t,r){r.r(t),r.d(t,{default:function(){return Re}});var n=r(15861),o=r(93433),i=r(4942),a=r(15671),u=r(43144),l=r(60136),s=r(6215),c=r(61120),p=r(87757),f=r.n(p),d=r(83195),y=r(60125),v=r(51916),h=r(33300),b=r(82703),g=r(75571),m=r(10173),w=r(80347),Z=r(34582),C=r(37566),R=r(98840),_=r(89636),O=r(64003),P=r(9634),j=r(30732),I=r(61979),x=r(65673),k=r(25258),S=r(82682),B=r(74915),T=r(3781),F=r(29780),q=r(54197),E=r(17418),A=r(54279);r(43079),r(33682);function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(X){return!1}}();return function(){var r,n=(0,c.Z)(e);if(t){var o=(0,c.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}var N=function(e){(0,l.Z)(r,e);var t=D(r);function r(e){var n;return(0,a.Z)(this,r),(n=t.call(this,e)).field=null,n.type=null,n}return(0,u.Z)(r,[{key:"clone",value:function(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}}]),r}(A.wq);(0,d._)([(0,_.Cb)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],N.prototype,"field",void 0),(0,d._)([(0,_.Cb)({readOnly:!0,nonNullable:!0,json:{read:!1}})],N.prototype,"type",void 0);var V,L=N=(0,d._)([(0,j.j)("esri.layers.pointCloudFilters.PointCloudFilter")],N);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(X){return!1}}();return function(){var r,n=(0,c.Z)(e);if(t){var o=(0,c.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}var K=V=function(e){(0,l.Z)(r,e);var t=M(r);function r(e){var n;return(0,a.Z)(this,r),(n=t.call(this,e)).requiredClearBits=null,n.requiredSetBits=null,n.type="bitfield",n}return(0,u.Z)(r,[{key:"clone",value:function(){return new V({field:this.field,requiredClearBits:(0,b.d9)(this.requiredClearBits),requiredSetBits:(0,b.d9)(this.requiredSetBits)})}}]),r}(L);(0,d._)([(0,_.Cb)({type:[O.z8],json:{write:{enabled:!0,overridePolicy:function(){return{enabled:!0,isRequired:!this.requiredSetBits}}}}})],K.prototype,"requiredClearBits",void 0),(0,d._)([(0,_.Cb)({type:[O.z8],json:{write:{enabled:!0,overridePolicy:function(){return{enabled:!0,isRequired:!this.requiredClearBits}}}}})],K.prototype,"requiredSetBits",void 0),(0,d._)([(0,E.J)({pointCloudBitfieldFilter:"bitfield"})],K.prototype,"type",void 0);var G,J=K=V=(0,d._)([(0,j.j)("esri.layers.pointCloudFilters.PointCloudBitfieldFilter")],K);function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(X){return!1}}();return function(){var r,n=(0,c.Z)(e);if(t){var o=(0,c.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}var U=G=function(e){(0,l.Z)(r,e);var t=z(r);function r(e){var n;return(0,a.Z)(this,r),(n=t.call(this,e)).includedReturns=[],n.type="return",n}return(0,u.Z)(r,[{key:"clone",value:function(){return new G({field:this.field,includedReturns:(0,b.d9)(this.includedReturns)})}}]),r}(L);(0,d._)([(0,_.Cb)({type:[["firstOfMany","last","lastOfMany","single"]],json:{write:{enabled:!0,isRequired:!0}}})],U.prototype,"includedReturns",void 0),(0,d._)([(0,E.J)({pointCloudReturnFilter:"return"})],U.prototype,"type",void 0);var $,Y=U=G=(0,d._)([(0,j.j)("esri.layers.pointCloudFilters.PointCloudReturnFilter")],U);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(X){return!1}}();return function(){var r,n=(0,c.Z)(e);if(t){var o=(0,c.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}var Q=$=function(e){(0,l.Z)(r,e);var t=H(r);function r(e){var n;return(0,a.Z)(this,r),(n=t.call(this,e)).mode="exclude",n.type="value",n.values=[],n}return(0,u.Z)(r,[{key:"clone",value:function(){return new $({field:this.field,mode:this.mode,values:(0,b.d9)(this.values)})}}]),r}(L);(0,d._)([(0,_.Cb)({type:["exclude","include"],json:{write:{enabled:!0,isRequired:!0}}})],Q.prototype,"mode",void 0),(0,d._)([(0,E.J)({pointCloudValueFilter:"value"})],Q.prototype,"type",void 0),(0,d._)([(0,_.Cb)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],Q.prototype,"values",void 0);var W,X={key:"type",base:L,typeMap:{value:Q=$=(0,d._)([(0,j.j)("esri.layers.pointCloudFilters.PointCloudValueFilter")],Q),bitfield:J,return:Y}},ee=r(44946),te=r(35166),re=r(15003),ne=r(365),oe=r(4100),ie=r(12347);function ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(X){return!1}}();return function(){var r,n=(0,c.Z)(e);if(t){var o=(0,c.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}var se=W=function(e){(0,l.Z)(r,e);var t=le(r);function r(e){var n;return(0,a.Z)(this,r),(n=t.call(this,e)).type="point-cloud-rgb",n.field=null,n}return(0,u.Z)(r,[{key:"clone",value:function(){return new W(ue(ue({},this.cloneProperties()),{},{field:(0,b.d9)(this.field)}))}}]),r}(ie.Z);(0,d._)([(0,E.J)({pointCloudRGBRenderer:"point-cloud-rgb"})],se.prototype,"type",void 0),(0,d._)([(0,_.Cb)({type:String,json:{write:!0}})],se.prototype,"field",void 0);var ce=se=W=(0,d._)([(0,j.j)("esri.renderers.PointCloudRGBRenderer")],se),pe=r(76732),fe=r(55233),de={key:"type",base:ie.Z,typeMap:{"point-cloud-class-breaks":oe.Z,"point-cloud-rgb":ce,"point-cloud-stretch":pe.Z,"point-cloud-unique-value":fe.Z},errorContext:"renderer"},ye=r(97879);function ve(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return he(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return he(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(X){return!1}}();return function(){var r,n=(0,c.Z)(e);if(t){var o=(0,c.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}var we=g.Z.getLogger("esri.layers.PointCloudLayer"),Ze=(0,re.v)(),Ce=function(e){(0,l.Z)(c,e);var t,r,i,s=me(c);function c(){var e;(0,a.Z)(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=s.call.apply(s,[this].concat(r))).operationalLayerType="PointCloudLayer",e.popupEnabled=!0,e.popupTemplate=null,e.opacity=1,e.filters=[],e.fields=null,e.fieldsIndex=null,e.outFields=null,e.path=null,e.legendEnabled=!0,e.renderer=null,e.type="point-cloud",e}return(0,u.Z)(c,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?ge({url:e},t):e}},{key:"defaultPopupTemplate",get:function(){return this.attributeStorageInfo?this.createPopupTemplate():null}},{key:"getFieldDomain",value:function(e){var t=this.fieldsIndex.get(e);return t&&t.domain?t.domain:null}},{key:"readServiceFields",value:function(e,t,r){return Array.isArray(e)?e.map((function(e){var t=new te.Z;return"FieldTypeInteger"===e.type&&((e=(0,b.d9)(e)).type="esriFieldTypeInteger"),t.read(e,r),t})):Array.isArray(t.attributeStorageInfo)?t.attributeStorageInfo.map((function(e){return new te.Z({name:e.name,type:"ELEVATION"===e.name?"double":"integer"})})):null}},{key:"elevationInfo",set:function(e){this._set("elevationInfo",e),this._validateElevationInfo()}},{key:"writeRenderer",value:function(e,t,r,n){(0,Z.RB)("layerDefinition.drawingInfo.renderer",e.write({},n),t)}},{key:"load",value:function(e){var t=this,r=(0,m.pC)(e)?e.signal:null,n=this.loadFromPortal({supportedTypes:["Scene Service"]},e).catch(C.r9).then((function(){return t._fetchService(r)}));return this.addResolvingPromise(n),Promise.resolve(this)}},{key:"createPopupTemplate",value:function(e){var t=(0,ye.eZ)(this,e);return this.formatPopupTemplateReturnsField(t),this.formatPopupTemplateRGBField(t),t}},{key:"formatPopupTemplateReturnsField",value:function(e){var t=this.fieldsIndex.get("RETURNS");if(t){var r=e.fieldInfos.find((function(e){return e.fieldName===t.name}));if(r){var n=new ne.Z({name:"pcl-returns-decoded",title:t.alias||t.name,expression:"\n        var returnValue = $feature.".concat(t.name,';\n        return (returnValue % 16) + " / " + Floor(returnValue / 16);\n      ')});e.expressionInfos=[].concat((0,o.Z)(e.expressionInfos||[]),[n]),r.fieldName="expression/pcl-returns-decoded"}}}},{key:"formatPopupTemplateRGBField",value:function(e){var t=this.fieldsIndex.get("RGB");if(t){var r=e.fieldInfos.find((function(e){return e.fieldName===t.name}));if(r){var n=new ne.Z({name:"pcl-rgb-decoded",title:t.alias||t.name,expression:"\n        var rgb = $feature.".concat(t.name,';\n        var red = Floor(rgb / 65536, 0);\n        var green = Floor((rgb - (red * 65536)) / 256,0);\n        var blue = rgb - (red * 65536) - (green * 256);\n\n        return "rgb(" + red + "," + green + "," + blue + ")";\n      ')});e.expressionInfos=[].concat((0,o.Z)(e.expressionInfos||[]),[n]),r.fieldName="expression/pcl-rgb-decoded"}}}},{key:"queryCachedStatistics",value:(i=(0,n.Z)(f().mark((function e(t,r){var n,o,i,a,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load(r);case 2:if(this.attributeStorageInfo){e.next=4;break}throw new h.Z("scenelayer:no-cached-statistics","Cached statistics are not available for this layer");case 4:if(n=this.fieldsIndex.get(t)){e.next=7;break}throw new h.Z("pointcloudlayer:field-unexisting","Field '".concat(t,"' does not exist on the layer"));case 7:o=ve(this.attributeStorageInfo),e.prev=8,o.s();case 10:if((i=o.n()).done){e.next=17;break}if((a=i.value).name!==n.name){e.next=15;break}return u=(0,R.v_)(this.parsedUrl.path,"./statistics/".concat(a.key)),e.abrupt("return",(0,v.default)(u,{query:{f:"json",token:this.apiKey},responseType:"json",signal:r?r.signal:null}).then((function(e){return e.data})));case 15:e.next=10;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(8),o.e(e.t0);case 22:return e.prev=22,o.f(),e.finish(22);case 25:throw new h.Z("pointcloudlayer:no-cached-statistics","Cached statistics for this attribute are not available");case 26:case"end":return e.stop()}}),e,this,[[8,19,22,25]])}))),function(e,t){return i.apply(this,arguments)})},{key:"saveAs",value:(r=(0,n.Z)(f().mark((function e(t,r){var n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._debouncedSaveOperations(1,ge(ge({},r),{},{getTypeKeywords:function(){return n._getTypeKeywords()},portalItemLayerType:"point-cloud"}),t));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"save",value:(t=(0,n.Z)(f().mark((function e(){var t,r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={getTypeKeywords:function(){return r._getTypeKeywords()},portalItemLayerType:"point-cloud"},e.abrupt("return",this._debouncedSaveOperations(0,t));case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"validateLayer",value:function(e){if(e.layerType&&"PointCloud"!==e.layerType)throw new h.Z("pointcloudlayer:layer-type-not-supported","PointCloudLayer does not support this layer type",{layerType:e.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new h.Z("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"1.x-2.x"});if(this.version.major>2)throw new h.Z("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"1.x-2.x"})}},{key:"hasCachedStatistics",value:function(e){return null!=this.attributeStorageInfo&&this.attributeStorageInfo.some((function(t){return t.name===e}))}},{key:"_getTypeKeywords",value:function(){return["PointCloud"]}},{key:"_validateElevationInfo",value:function(){var e=this.elevationInfo;e&&("absolute-height"!==e.mode&&we.warn(".elevationInfo=","Point cloud layers only support absolute-height elevation mode"),e.featureExpressionInfo&&"0"!==e.featureExpressionInfo.expression&&we.warn(".elevationInfo=","Point cloud layers do not support featureExpressionInfo"))}}]),c}((0,q.V)((0,S.Y)((0,B.q)((0,T.I)((0,F.M)((0,w.R)((0,k.V)(x.Z))))))));(0,d._)([(0,_.Cb)({type:["PointCloudLayer"]})],Ce.prototype,"operationalLayerType",void 0),(0,d._)([(0,_.Cb)(ee.C_)],Ce.prototype,"popupEnabled",void 0),(0,d._)([(0,_.Cb)({type:y.Z,json:{name:"popupInfo",write:!0}})],Ce.prototype,"popupTemplate",void 0),(0,d._)([(0,_.Cb)({readOnly:!0,json:{read:!1}})],Ce.prototype,"defaultPopupTemplate",null),(0,d._)([(0,_.Cb)({readOnly:!0,json:{write:!1,read:!1,origins:{"web-document":{write:!1,read:!1}}}})],Ce.prototype,"opacity",void 0),(0,d._)([(0,_.Cb)({type:["show","hide"]})],Ce.prototype,"listMode",void 0),(0,d._)([(0,_.Cb)({types:[X],json:{origins:{service:{read:{source:"filters"}}},name:"layerDefinition.filters",write:!0}})],Ce.prototype,"filters",void 0),(0,d._)([(0,_.Cb)({type:[te.Z]})],Ce.prototype,"fields",void 0),(0,d._)([(0,_.Cb)(Ze.fieldsIndex)],Ce.prototype,"fieldsIndex",void 0),(0,d._)([(0,P.r)("service","fields",["fields","attributeStorageInfo"])],Ce.prototype,"readServiceFields",null),(0,d._)([(0,_.Cb)(Ze.outFields)],Ce.prototype,"outFields",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],Ce.prototype,"attributeStorageInfo",void 0),(0,d._)([(0,_.Cb)(ee.PV)],Ce.prototype,"elevationInfo",null),(0,d._)([(0,_.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0},"portal-item":{read:!0,write:!0}},read:!1}})],Ce.prototype,"path",void 0),(0,d._)([(0,_.Cb)(ee.rn)],Ce.prototype,"legendEnabled",void 0),(0,d._)([(0,_.Cb)({types:de,json:{origins:{service:{read:{source:"drawingInfo.renderer"}}},name:"layerDefinition.drawingInfo.renderer",write:{target:{"layerDefinition.drawingInfo.renderer":{types:de},"layerDefinition.drawingInfo.transparency":{type:Number}}}}})],Ce.prototype,"renderer",void 0),(0,d._)([(0,I.c)("renderer")],Ce.prototype,"writeRenderer",null),(0,d._)([(0,_.Cb)({json:{read:!1},readOnly:!0})],Ce.prototype,"type",void 0);var Re=Ce=(0,d._)([(0,j.j)("esri.layers.PointCloudLayer")],Ce)}}]);
//# sourceMappingURL=1042-a9458d99a35b7ae329bb.js.map