"use strict";(self.webpackChunkenergy_and_water_dashboard=self.webpackChunkenergy_and_water_dashboard||[]).push([[2526],{52526:function(e,t,r){r.r(t),r.d(t,{default:function(){return de}});var n,i=r(15861),o=r(4942),a=r(15671),s=r(43144),l=r(60136),p=r(6215),u=r(61120),d=r(87757),c=r.n(d),y=(r(65743),r(83195)),f=(r(58168),r(60125)),b=(r(33428),r(98335),r(98021),r(26014),r(61137),r(57171)),v=r(21577),m=r(93505),h=r(38552),g=r(51916),w=r(80240),_=r(33300),I=r(75571),S=r(10173),C=r(80347),k=r(37566),O=r(89636),x=(r(43079),r(33682),r(64003)),j=r(9634),Z=r(30732),R=r(7246),P=r(88326),T=r(65673),F=r(82682),D=r(83350),N=r(39987),E=r(53797),L=r(74915),A=r(3781),U=r(15665),J=r(29780),q=r(38313),z=r(44946),G=r(20631),B=r(15003),M=r(43749),Q=r(22462),V=r(27909),Y=r(54279);function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,p.Z)(this,r)}}var H=n=function(e){(0,l.Z)(r,e);var t=W(r);function r(){var e;return(0,a.Z)(this,r),(e=t.apply(this,arguments)).age=null,e.ageReceived=null,e.displayCount=null,e.maxObservations=1,e}return(0,s.Z)(r,[{key:"clone",value:function(){return new n({age:this.age,ageReceived:this.ageReceived,displayCount:this.displayCount,maxObservations:this.maxObservations})}}]),r}(Y.wq);(0,y._)([(0,O.Cb)({type:Number,json:{write:!0}})],H.prototype,"age",void 0),(0,y._)([(0,O.Cb)({type:Number,json:{write:!0}})],H.prototype,"ageReceived",void 0),(0,y._)([(0,O.Cb)({type:Number,json:{write:!0}})],H.prototype,"displayCount",void 0),(0,y._)([(0,O.Cb)({type:Number,json:{write:!0}})],H.prototype,"maxObservations",void 0);var K=H=n=(0,y._)([(0,Z.j)("esri.layers.support.PurgeOptions")],H),X=r(26857),$=r(56100),ee=r(97879),te=r(7449),re=r(39356),ne=r(59007);function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,p.Z)(this,r)}}var se=I.Z.getLogger("esri.layers.StreamLayer"),le=(0,B.v)(),pe=function(e){(0,l.Z)(n,e);var t,r=ae(n);function n(){var e;(0,a.Z)(this,n);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=r.call.apply(r,[this].concat(i))).copyright=null,e.definitionExpression=null,e.displayField=null,e.elevationInfo=null,e.featureReduction=null,e.fields=null,e.fieldsIndex=null,e.geometryDefinition=null,e.geometryType=null,e.labelsVisible=!0,e.labelingInfo=null,e.legendEnabled=!0,e.maxReconnectionAttempts=0,e.maxReconnectionInterval=20,e.maxScale=0,e.minScale=0,e.objectIdField=null,e.operationalLayerType="ArcGISStreamLayer",e.popupEnabled=!0,e.popupTemplate=null,e.purgeOptions=new K,e.screenSizePerspectiveEnabled=!0,e.sourceJSON=null,e.spatialReference=re.Z.WGS84,e.type="stream",e.url=null,e.updateInterval=300,e.webSocketUrl=null,e}return(0,s.Z)(n,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?oe({url:e},t):e}},{key:"load",value:function(e){var t=this;if(!("WebSocket"in globalThis))return this.addResolvingPromise(Promise.reject(new _.Z("stream-layer:websocket-unsupported","WebSocket is not supported in this browser. StreamLayer will not have real-time connection with the stream service."))),Promise.resolve(this);var r=(0,S.pC)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Stream Service","Feed"]},e).catch(k.r9).then((function(){return t._fetchService(r)}))),Promise.resolve(this)}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"renderer",set:function(e){(0,M.YN)(e,this.fieldsIndex),this._set("renderer",e)}},{key:"readRenderer",value:function(e,t,r){var n=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(n){var i=(0,m.a)(n,t,r)||void 0;return i||se.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),i}if(t.defaultSymbol)return t.types&&t.types.length?new v.Z({defaultSymbol:ue(t.defaultSymbol,t,r),field:t.typeIdField,uniqueValueInfos:t.types.map((function(e){return{id:e.id,symbol:ue(e.symbol,e,r)}}))}):new b.Z({symbol:ue(t.defaultSymbol,t,r)})}},{key:"createPopupTemplate",value:function(e){return(0,ee.eZ)(this,e)}},{key:"createQuery",value:function(){var e=new $.Z;return e.returnGeometry=!0,e.outFields=["*"],e.where=this.definitionExpression||"1=1",e}},{key:"getFieldDomain",value:function(e,t){if(!this.fields)return null;var r=null;return this.fields.some((function(t){return t.name===e&&(r=t.domain),!!r})),r}},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"_fetchService",value:(t=(0,i.Z)(c().mark((function e(t){var r,n,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.webSocketUrl){e.next=12;break}if(null!=(n=this.timeInfo)&&n.trackIdField){e.next=3;break}throw new _.Z("stream-layer:missing-metadata","The stream layer trackIdField must be specified.");case 3:if(this.objectIdField){e.next=5;break}throw new _.Z("stream-layer:missing-metadata","The stream layer objectIdField must be specified.");case 5:if(this.fields){e.next=7;break}throw new _.Z("stream-layer:missing-metadata","The stream layer fields must be specified.");case 7:if(this.geometryType){e.next=9;break}throw new _.Z("stream-layer:missing-metadata","The stream layer geometryType must be specified.");case 9:this.url=this.webSocketUrl,e.next=18;break;case 12:if(this.sourceJSON){e.next=18;break}return e.next=15,(0,g.default)(this.parsedUrl.path,{query:oe(oe({f:"json"},this.customParameters),this.parsedUrl.query),responseType:"json",signal:t});case 15:i=e.sent,o=i.data,this.sourceJSON=o;case 18:return e.abrupt("return",(this.sourceJSON=oe(oe({},null!=(r=this.sourceJSON)?r:{}),{},{objectIdField:"__esri_stream_id__"}),this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl}),(0,M.YN)(this.renderer,this.fieldsIndex),(0,M.UF)(this.timeInfo,this.fieldsIndex),(0,X.y)(this,{origin:"service"})));case 19:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),n}((0,E.b)((0,D.h)((0,q.n)((0,J.M)((0,U.Q)((0,F.Y)((0,L.q)((0,A.I)((0,C.R)((0,N.N)(T.Z)))))))))));(0,y._)([(0,O.Cb)({type:String})],pe.prototype,"copyright",void 0),(0,y._)([(0,O.Cb)({readOnly:!0})],pe.prototype,"defaultPopupTemplate",null),(0,y._)([(0,O.Cb)({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],pe.prototype,"definitionExpression",void 0),(0,y._)([(0,O.Cb)({type:String})],pe.prototype,"displayField",void 0),(0,y._)([(0,O.Cb)({type:te.Z})],pe.prototype,"elevationInfo",void 0),(0,y._)([(0,O.Cb)(G.d)],pe.prototype,"featureReduction",void 0),(0,y._)([(0,O.Cb)(le.fields)],pe.prototype,"fields",void 0),(0,y._)([(0,O.Cb)(le.fieldsIndex)],pe.prototype,"fieldsIndex",void 0),(0,y._)([(0,O.Cb)({type:ne.Z})],pe.prototype,"geometryDefinition",void 0),(0,y._)([(0,O.Cb)({type:P.Mk.apiValues,json:{read:{reader:P.Mk.read}}})],pe.prototype,"geometryType",void 0),(0,y._)([(0,O.Cb)(z.iR)],pe.prototype,"labelsVisible",void 0),(0,y._)([(0,O.Cb)({type:[Q.Z],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:V.r},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],pe.prototype,"labelingInfo",void 0),(0,y._)([(0,O.Cb)(z.rn)],pe.prototype,"legendEnabled",void 0),(0,y._)([(0,O.Cb)({type:["show","hide"]})],pe.prototype,"listMode",void 0),(0,y._)([(0,O.Cb)({type:x.z8})],pe.prototype,"maxReconnectionAttempts",void 0),(0,y._)([(0,O.Cb)({type:x.z8})],pe.prototype,"maxReconnectionInterval",void 0),(0,y._)([(0,O.Cb)(z.u1)],pe.prototype,"maxScale",void 0),(0,y._)([(0,O.Cb)(z.rO)],pe.prototype,"minScale",void 0),(0,y._)([(0,O.Cb)({type:String})],pe.prototype,"objectIdField",void 0),(0,y._)([(0,O.Cb)({value:"ArcGISStreamLayer",type:["ArcGISStreamLayer"]})],pe.prototype,"operationalLayerType",void 0),(0,y._)([(0,O.Cb)(z.C_)],pe.prototype,"popupEnabled",void 0),(0,y._)([(0,O.Cb)({type:f.Z,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],pe.prototype,"popupTemplate",void 0),(0,y._)([(0,O.Cb)({type:K})],pe.prototype,"purgeOptions",void 0),(0,y._)([(0,O.Cb)({types:h.A,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{name:"layerDefinition.drawingInfo.renderer",types:h.o,write:!0}},write:{target:"layerDefinition.drawingInfo.renderer"}}})],pe.prototype,"renderer",null),(0,y._)([(0,j.r)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),(0,j.r)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],pe.prototype,"readRenderer",null),(0,y._)([(0,O.Cb)(z.YI)],pe.prototype,"screenSizePerspectiveEnabled",void 0),(0,y._)([(0,O.Cb)({type:re.Z,json:{origins:{service:{read:{source:"spatialReference"}}}}})],pe.prototype,"spatialReference",void 0),(0,y._)([(0,O.Cb)({json:{read:!1}})],pe.prototype,"type",void 0),(0,y._)([(0,O.Cb)(z.HQ)],pe.prototype,"url",void 0),(0,y._)([(0,O.Cb)({type:Number})],pe.prototype,"updateInterval",void 0),(0,y._)([(0,O.Cb)({type:String})],pe.prototype,"webSocketUrl",void 0),pe=(0,y._)([(0,Z.j)("esri.layers.StreamLayer")],pe);var ue=(0,R.d)({types:w.QT}),de=pe}}]);
//# sourceMappingURL=2526-3c399bd82b0b4cb7b0b7.js.map