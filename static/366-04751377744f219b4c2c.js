"use strict";(self.webpackChunkenergy_and_water_dashboard=self.webpackChunkenergy_and_water_dashboard||[]).push([[366],{31923:function(e,t,r){r.d(t,{Z:function(){return A}});var n,o=r(15671),a=r(43144),i=r(60136),s=r(6215),u=r(61120),l=r(83195),c=r(54279),f=r(82703),p=r(75571),h=r(89636),v=r(36049),g=r(30732),y=r(64003),d=r(49626),m=r(86033),b=r(49814);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.Z)(e);if(t){var o=(0,u.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}var x=p.Z.getLogger("esri.geometry.support.MeshComponent"),C=n=function(e){(0,i.Z)(r,e);var t=w(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).faces=null,n.material=null,n.shading="source",n.trustSourceNormals=!1,n}return(0,a.Z)(r,[{key:"castFaces",value:function(e){return(0,b.XQ)(e,Uint32Array,[Uint16Array],{loggerTag:".faces=",stride:3},x)}},{key:"castMaterial",value:function(e){return(0,y.TJ)(e&&"object"==typeof e&&("metallic"in e||"roughness"in e||"metallicRoughnessTexture"in e)?m.Z:d.Z,e)}},{key:"clone",value:function(){return new n({faces:(0,f.d9)(this.faces),shading:this.shading,material:(0,f.d9)(this.material),trustSourceNormals:this.trustSourceNormals})}},{key:"cloneWithDeduplication",value:function(e,t){var r={faces:(0,f.d9)(this.faces),shading:this.shading,material:this.material?this.material.cloneWithDeduplication(e,t):null,trustSourceNormals:this.trustSourceNormals};return new n(r)}}],[{key:"from",value:function(e){return(0,y.TJ)(n,e)}}]),r}(c.wq);(0,l._)([(0,h.Cb)({json:{write:!0}})],C.prototype,"faces",void 0),(0,l._)([(0,v.p)("faces")],C.prototype,"castFaces",null),(0,l._)([(0,h.Cb)({type:d.Z,json:{write:!0}})],C.prototype,"material",void 0),(0,l._)([(0,v.p)("material")],C.prototype,"castMaterial",null),(0,l._)([(0,h.Cb)({type:String,json:{write:!0}})],C.prototype,"shading",void 0),(0,l._)([(0,h.Cb)({type:Boolean})],C.prototype,"trustSourceNormals",void 0);var A=C=n=(0,l._)([(0,g.j)("esri.geometry.support.MeshComponent")],C)},49626:function(e,t,r){r.d(t,{Z:function(){return m}});var n,o=r(15671),a=r(43144),i=r(60136),s=r(6215),u=r(61120),l=r(83195),c=r(30004),f=r(54279),p=r(10173),h=r(89636),v=(r(43079),r(33682),r(64003),r(30732)),g=r(85855);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.Z)(e);if(t){var o=(0,u.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}var d=n=function(e){(0,i.Z)(r,e);var t=y(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).color=null,n.colorTexture=null,n.normalTexture=null,n.alphaMode="auto",n.alphaCutoff=.5,n.doubleSided=!0,n}return(0,a.Z)(r,[{key:"clone",value:function(){return this.cloneWithDeduplication(null,new Map)}},{key:"cloneWithDeduplication",value:function(e,t){var r=(0,p.pC)(e)?e.get(this):null;if(r)return r;var o=new n(this.clonePropertiesWithDeduplication(t));return(0,p.pC)(e)&&e.set(this,o),o}},{key:"clonePropertiesWithDeduplication",value:function(e){return{color:(0,p.pC)(this.color)?this.color.clone():null,colorTexture:(0,p.pC)(this.colorTexture)?this.colorTexture.cloneWithDeduplication(e):null,normalTexture:(0,p.pC)(this.normalTexture)?this.normalTexture.cloneWithDeduplication(e):null,alphaMode:this.alphaMode,alphaCutoff:this.alphaCutoff,doubleSided:this.doubleSided}}}]),r}(f.wq);(0,l._)([(0,h.Cb)({type:c.Z,json:{write:!0}})],d.prototype,"color",void 0),(0,l._)([(0,h.Cb)({type:g.Z,json:{write:!0}})],d.prototype,"colorTexture",void 0),(0,l._)([(0,h.Cb)({type:g.Z,json:{write:!0}})],d.prototype,"normalTexture",void 0),(0,l._)([(0,h.Cb)({nonNullable:!0,json:{write:!0}})],d.prototype,"alphaMode",void 0),(0,l._)([(0,h.Cb)({nonNullable:!0,json:{write:!0}})],d.prototype,"alphaCutoff",void 0),(0,l._)([(0,h.Cb)({nonNullable:!0,json:{write:!0}})],d.prototype,"doubleSided",void 0);var m=d=n=(0,l._)([(0,v.j)("esri.geometry.support.MeshMaterial")],d)},86033:function(e,t,r){r.d(t,{Z:function(){return C}});var n,o=r(4942),a=r(15671),i=r(43144),s=r(11752),u=r(60136),l=r(6215),c=r(61120),f=r(83195),p=r(30004),h=r(10173),v=r(89636),g=(r(43079),r(33682),r(64003),r(30732)),y=r(49626),d=r(85855);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,c.Z)(e);if(t){var o=(0,c.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,l.Z)(this,r)}}var x=n=function(e){(0,u.Z)(r,e);var t=w(r);function r(e){var n;return(0,a.Z)(this,r),(n=t.call(this,e)).emissiveColor=null,n.emissiveTexture=null,n.occlusionTexture=null,n.metallic=1,n.roughness=1,n.metallicRoughnessTexture=null,n}return(0,i.Z)(r,[{key:"clone",value:function(){return this.cloneWithDeduplication(null,new Map)}},{key:"cloneWithDeduplication",value:function(e,t){var r=(0,h.pC)(e)?e.get(this):null;if(r)return r;var o=new n(this.clonePropertiesWithDeduplication(t));return(0,h.pC)(e)&&e.set(this,o),o}},{key:"clonePropertiesWithDeduplication",value:function(e){return b(b({},(0,s.Z)((0,c.Z)(r.prototype),"clonePropertiesWithDeduplication",this).call(this,e)),{},{emissiveColor:(0,h.pC)(this.emissiveColor)?this.emissiveColor.clone():null,emissiveTexture:(0,h.pC)(this.emissiveTexture)?this.emissiveTexture.cloneWithDeduplication(e):null,occlusionTexture:(0,h.pC)(this.occlusionTexture)?this.occlusionTexture.cloneWithDeduplication(e):null,metallic:this.metallic,roughness:this.roughness,metallicRoughnessTexture:(0,h.pC)(this.metallicRoughnessTexture)?this.metallicRoughnessTexture.cloneWithDeduplication(e):null})}}]),r}(y.Z);(0,f._)([(0,v.Cb)({type:p.Z,json:{write:!0}})],x.prototype,"emissiveColor",void 0),(0,f._)([(0,v.Cb)({type:d.Z,json:{write:!0}})],x.prototype,"emissiveTexture",void 0),(0,f._)([(0,v.Cb)({type:d.Z,json:{write:!0}})],x.prototype,"occlusionTexture",void 0),(0,f._)([(0,v.Cb)({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],x.prototype,"metallic",void 0),(0,f._)([(0,v.Cb)({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],x.prototype,"roughness",void 0),(0,f._)([(0,v.Cb)({type:d.Z,json:{write:!0}})],x.prototype,"metallicRoughnessTexture",void 0);var C=x=n=(0,f._)([(0,g.j)("esri.geometry.support.MeshMaterialMetallicRoughness")],x)},85855:function(e,t,r){r.d(t,{Z:function(){return C}});var n,o=r(15671),a=r(43144),i=r(60136),s=r(6215),u=r(61120),l=r(83195),c=(r(33682),r(54279)),f=r(89636),p=(r(43079),r(64003)),h=r(9634),v=r(30732),g=r(61979),y=r(3120),d=r(11849);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.Z)(e);if(t){var o=(0,u.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}var b=new WeakMap,w=0,x=n=function(e){(0,i.Z)(r,e);var t=m(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).wrap="repeat",n}return(0,a.Z)(r,[{key:"url",get:function(){return this._get("url")||null},set:function(e){this._set("url",e),e&&this._set("data",null)}},{key:"data",get:function(){return this._get("data")||null},set:function(e){this._set("data",e),e&&this._set("url",null)}},{key:"writeData",value:function(e,t,r,n){if(e instanceof HTMLImageElement){var o={type:"image-element",src:(0,y.t)(e.src,n),crossOrigin:e.crossOrigin};t[r]=o}else if(e instanceof HTMLCanvasElement){var a=e.getContext("2d").getImageData(0,0,e.width,e.height),i={type:"canvas-element",imageData:this.encodeImageData(a)};t[r]=i}else if(e instanceof HTMLVideoElement){var s={type:"video-element",src:(0,y.t)(e.src,n),autoplay:e.autoplay,loop:e.loop,muted:e.muted,crossOrigin:e.crossOrigin,preload:e.preload};t[r]=s}else{var u={type:"image-data",imageData:this.encodeImageData(e)};t[r]=u}}},{key:"readData",value:function(e){switch(e.type){case"image-element":var t=new Image;return t.src=e.src,t.crossOrigin=e.crossOrigin,t;case"canvas-element":var r=this.decodeImageData(e.imageData),n=document.createElement("canvas");return n.width=r.width,n.height=r.height,n.getContext("2d").putImageData(r,0,0),n;case"image-data":return this.decodeImageData(e.imageData);case"video-element":var o=document.createElement("video");return o.src=e.src,o.crossOrigin=e.crossOrigin,o.autoplay=e.autoplay,o.loop=e.loop,o.muted=e.muted,o.preload=e.preload,o;default:return}}},{key:"transparent",get:function(){var e=this.data,t=this.url;if(e instanceof HTMLCanvasElement)return this.imageDataContainsTransparent(e.getContext("2d").getImageData(0,0,e.width,e.height));if(e instanceof ImageData)return this.imageDataContainsTransparent(e);if(t){var r=t.substr(t.length-4,4).toLowerCase(),n=t.substr(0,15).toLocaleLowerCase();if(".png"===r||"data:image/png;"===n)return!0}return!1},set:function(e){null!=e?this._override("transparent",e):this._clearOverride("transparent")}},{key:"contentHash",get:function(){var e=this,t="string"==typeof this.wrap?this.wrap:"object"==typeof this.wrap?"".concat(this.wrap.horizontal,"/").concat(this.wrap.vertical):"",r=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"d:".concat(r,",t:").concat(e.transparent,",w:").concat(t)};return null!=this.url?r(this.url):null!=this.data?this.data instanceof HTMLImageElement||this.data instanceof HTMLVideoElement?r(this.data.src):(b.has(this.data)||b.set(this.data,++w),r(b.get(this.data))):r()}},{key:"clone",value:function(){var e={url:this.url,data:this.data,wrap:this.cloneWrap()};return new n(e)}},{key:"cloneWithDeduplication",value:function(e){var t=e.get(this);if(t)return t;var r=this.clone();return e.set(this,r),r}},{key:"cloneWrap",value:function(){return"string"==typeof this.wrap?this.wrap:{horizontal:this.wrap.horizontal,vertical:this.wrap.vertical}}},{key:"encodeImageData",value:function(e){for(var t="",r=0;r<e.data.length;r++)t+=String.fromCharCode(e.data[r]);return{data:btoa(t),width:e.width,height:e.height}}},{key:"decodeImageData",value:function(e){for(var t=atob(e.data),r=new Uint8ClampedArray(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return(0,d.Jl)(r,e.width,e.height)}},{key:"imageDataContainsTransparent",value:function(e){for(var t=3;t<e.data.length;t+=4)if(255!==e.data[t])return!0;return!1}}],[{key:"from",value:function(e){return"string"==typeof e?new n({url:e}):e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageData||e instanceof HTMLVideoElement?new n({data:e}):(0,p.TJ)(n,e)}}]),r}(c.wq);(0,l._)([(0,f.Cb)({type:String,json:{write:y.w}})],x.prototype,"url",null),(0,l._)([(0,f.Cb)({json:{write:{overridePolicy:function(){return{enabled:!this.url}}}}}),(0,f.Cb)()],x.prototype,"data",null),(0,l._)([(0,g.c)("data")],x.prototype,"writeData",null),(0,l._)([(0,h.r)("data")],x.prototype,"readData",null),(0,l._)([(0,f.Cb)({type:Boolean,json:{write:{overridePolicy:function(){return{enabled:this._isOverridden("transparent")}}}}})],x.prototype,"transparent",null),(0,l._)([(0,f.Cb)({json:{write:!0}})],x.prototype,"wrap",void 0),(0,l._)([(0,f.Cb)({readOnly:!0})],x.prototype,"contentHash",null);var C=x=n=(0,l._)([(0,v.j)("esri.geometry.support.MeshTexture")],x)},49814:function(e,t,r){r.d(t,{QL:function(){return w},XQ:function(){return C},ZP:function(){return Z}});var n,o=r(15671),a=r(43144),i=r(60136),s=r(6215),u=r(61120),l=r(83195),c=r(54279),f=r(82703),p=r(75571),h=r(89636),v=r(36049),g=r(30732);function y(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.Z)(e);if(t){var o=(0,u.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}var b=p.Z.getLogger("esri.geometry.support.MeshVertexAttributes"),w=n=function(e){(0,i.Z)(r,e);var t=m(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).color=null,n.position=new Float64Array(0),n.uv=null,n.normal=null,n.tangent=null,n}return(0,a.Z)(r,[{key:"castColor",value:function(e){return C(e,Uint8Array,[Uint8ClampedArray],{loggerTag:".color=",stride:4},b)}},{key:"castPosition",value:function(e){return e&&e instanceof Float32Array&&b.warn(".position=","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array"),C(e,Float64Array,[Float32Array],{loggerTag:".position=",stride:3},b)}},{key:"castUv",value:function(e){return C(e,Float32Array,[Float64Array],{loggerTag:".uv=",stride:2},b)}},{key:"castNormal",value:function(e){return C(e,Float32Array,[Float64Array],{loggerTag:".normal=",stride:3},b)}},{key:"castTangent",value:function(e){return C(e,Float32Array,[Float64Array],{loggerTag:".tangent=",stride:4},b)}},{key:"clone",value:function(){var e={position:(0,f.d9)(this.position),uv:(0,f.d9)(this.uv),normal:(0,f.d9)(this.normal),tangent:(0,f.d9)(this.tangent),color:(0,f.d9)(this.color)};return new n(e)}},{key:"clonePositional",value:function(){var e={position:(0,f.d9)(this.position),normal:(0,f.d9)(this.normal),tangent:(0,f.d9)(this.tangent),uv:this.uv,color:this.color};return new n(e)}}]),r}(c.wq);function x(e,t,r,n){var o=t.loggerTag,a=t.stride;return e.length%a!=0?(n.error(o,"Invalid array length, expected a multiple of ".concat(a)),new r([])):e}function C(e,t,r,n,o){if(!e)return e;if(e instanceof t)return x(e,n,t,o);var a,i=y(r);try{for(i.s();!(a=i.n()).done;){if(e instanceof a.value)return x(new t(e),n,t,o)}}catch(u){i.e(u)}finally{i.f()}if(Array.isArray(e))return x(new t(e),n,t,o);var s=r.map((function(e){return"'".concat(e.name,"'")}));return o.error("Failed to set property, expected one of ".concat(s,", but got ").concat(e.constructor.name)),new t([])}function A(e,t,r){t[r]=function(e){for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=e[r];return t}(e)}(0,l._)([(0,h.Cb)({json:{write:A}})],w.prototype,"color",void 0),(0,l._)([(0,v.p)("color")],w.prototype,"castColor",null),(0,l._)([(0,h.Cb)({nonNullable:!0,json:{write:A}})],w.prototype,"position",void 0),(0,l._)([(0,v.p)("position")],w.prototype,"castPosition",null),(0,l._)([(0,h.Cb)({json:{write:A}})],w.prototype,"uv",void 0),(0,l._)([(0,v.p)("uv")],w.prototype,"castUv",null),(0,l._)([(0,h.Cb)({json:{write:A}})],w.prototype,"normal",void 0),(0,l._)([(0,v.p)("normal")],w.prototype,"castNormal",null),(0,l._)([(0,h.Cb)({json:{write:A}})],w.prototype,"tangent",void 0),(0,l._)([(0,v.p)("tangent")],w.prototype,"castTangent",null);var Z=w=n=(0,l._)([(0,g.j)("esri.geometry.support.MeshVertexAttributes")],w)},60366:function(e,t,r){r.r(t),r.d(t,{meshFeatureSetFromJSON:function(){return it}});var n=r(9340),o=r(10173),a=r(59007),i=r(4942),s=r(15861),u=r(15671),l=r(43144),c=r(60136),f=r(6215),p=r(61120),h=r(87757),v=r.n(h),g=r(83195),y=r(33300),d=r(80896),m=r(86523),b=r(75571),w=r(85001),x=r(37566),C=r(51996),A=r(89636),Z=(r(43079),r(33682),r(64003),r(30732)),O=r(73415),k=r(93776),j=r(5224),R=r(16985),M=r(26054),T=r(31923),P=r(32431),F=r(49814),_=r(81820),S=r(82456),D=r(64333);function I(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function E(e){var t,r=U(e.rings,e.hasZ,1),n=[],o=0,a=0,i=I(r.polygons);try{var s=function(){var e=t.value,i=e.count,s=e.index,u=new Float64Array(r.position.buffer,3*s*r.position.BYTES_PER_ELEMENT,3*i),l=e.holeIndices.map((function(e){return e-s})),c=new Uint32Array((0,_.e)(u,l,3));n.push({position:u,faces:c}),o+=u.length,a+=c.length};for(i.s();!(t=i.n()).done;)s()}catch(c){i.e(c)}finally{i.f()}var u=function(e,t,r){if(1===e.length)return e[0];var n,o=new Float64Array(t),a=new Uint32Array(r),i=0,s=0,u=0,l=I(e);try{for(l.s();!(n=l.n()).done;){for(var f=n.value,p=0;p<f.position.length;p++)o[i++]=f.position[p];for(var h=0;h<f.faces.length;h++)a[s++]=f.faces[h]+u;u=i/3}}catch(c){l.e(c)}finally{l.f()}return{position:o,faces:a}}(n,o,a),l=(0,D.d)(u.position.buffer,6,{originalIndices:u.faces});return u.position=new Float64Array(l.buffer),u.faces=l.indices,u}function U(e,t,r){for(var n=e.length,o=new Array(n),a=new Array(n),i=new Array(n),s=0,u=0,l=0,c=0,f=0;f<n;++f)c+=e[f].length;for(var p=new Float64Array(3*c),h=0,v=n-1;v>=0;v--){var g=e[v],y=1===r&&W(g);if(y&&1!==n)o[s++]=g;else{for(var d=g.length,m=0;m<s;++m)d+=o[m].length;var b={index:h,pathLengths:new Array(s+1),count:d,holeIndices:new Array(s)};b.pathLengths[0]=g.length,g.length>0&&(i[l++]={index:h,count:g.length}),h=y?z(g,g.length-1,-1,p,h,g.length,t):z(g,0,1,p,h,g.length,t);for(var w=0;w<s;++w){var x=o[w];b.holeIndices[w]=h,b.pathLengths[w+1]=x.length,x.length>0&&(i[l++]={index:h,count:x.length}),h=z(x,0,1,p,h,x.length,t)}s=0,b.count>0&&(a[u++]=b)}}for(var C=0;C<s;++C){var A=o[C];A.length>0&&(i[l++]={index:h,count:A.length}),h=z(A,0,1,p,h,A.length,t)}return u<n&&(a.length=u),l<n&&(i.length=l),{position:p,polygons:a,outlines:i}}function z(e,t,r,n,o,a,i){o*=3;for(var s=0;s<a;++s){var u=e[t];n[o++]=u[0],n[o++]=u[1],n[o++]=i?u[2]:0,t+=r}return o/3}function W(e){return!(0,S.bu)(e,!1,!1)}var B=r(93269),N=r(58597),H=r(17765),Y=b.Z.getLogger("esri.geometry.support.meshUtils.centerAt");function X(e,t,r){var n;if(e.vertexAttributes&&e.vertexAttributes.position){var a=null!=(n=null==r?void 0:r.origin)?n:e.origin;(0,o.pC)(e.transform)?(null!=(null==r?void 0:r.geographic)&&r.geographic!==e.transform.geographic&&Y.warn("Specifying the 'geographic' parameter (".concat(r.geographic,") different from the Mesh transform setting (").concat(e.transform.geographic,") is not supported")),function(e,t,r){var n=t.x-r.x,o=t.y-r.y,a=t.hasZ&&r.hasZ?t.z-r.z:0,i=e.origin;e.origin=[i[0]+n,i[1]+o,i[2]+a]}(e.transform,t,a)):(0,N.h)(e.spatialReference,r)?function(e,t,r){var n=(0,H.FF)(e.vertexAttributes,r,{geographic:!0}),o=(0,H.iv)(n,t,{geographic:!0}),a=o.position,i=o.normal,s=o.tangent;e.vertexAttributes.position=a,e.vertexAttributes.normal=i,e.vertexAttributes.tangent=s,e.vertexAttributesChanged()}(e,t,a):function(e,t,r){var n=J,o=q;if((0,B.KC)(t,o,e.spatialReference)){if(!(0,B.KC)(r,n,e.spatialReference)){var a=e.origin;n[0]=a.x,n[1]=a.y,n[2]=a.z,Y.error("Failed to project specified origin (wkid:".concat(r.spatialReference.wkid,") to mesh spatial reference (wkid:").concat(e.spatialReference.wkid,")."))}(function(e,t,r){if(e)for(var n=0;n<e.length;n+=3)for(var o=0;o<3;o++)e[n+o]+=t[o]-r[o]})(e.vertexAttributes.position,o,n),e.vertexAttributesChanged()}else Y.error("Failed to project centerAt location (wkid:".concat(t.spatialReference.wkid,") to mesh spatial reference (wkid:").concat(e.spatialReference.wkid,")"))}(e,t,a)}}var q=(0,O.c)(),J=(0,O.c)(),K=r(98840);function V(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Q(){return Q=(0,s.Z)(v().mark((function e(t,n,a){var i,s,u,l,c,f,p;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.Hl)(Promise.all([r.e(9351),r.e(317),r.e(6561)]).then(r.bind(r,26561)),a);case 2:return i=e.sent,s=i.loadGLTFMesh,e.next=6,ee(n,a);case 6:return u=e.sent,(l=s(new j.Z({x:0,y:0,z:0,spatialReference:t.spatialReference}),u.url,{resolveFile:$(u),useTransform:!0,signal:(0,o.pC)(a)?a.signal:null})).then((function(){return u.dispose()}),(function(){return u.dispose()})),e.next=11,l;case 11:c=e.sent,f=c.vertexAttributes,p=c.components,t.vertexAttributes=f,t.components=p;case 15:case"end":return e.stop()}}),e)}))),Q.apply(this,arguments)}function $(e){var t=(0,K.Yd)(e.url);return function(r){var n,o=(0,K.PF)(r,t,t),a=o?o.replace(/^ *\.\//,""):null;return null!=(n=e.files.get(a))?n:r}}function ee(e,t){return te.apply(this,arguments)}function te(){return(te=(0,s.Z)(v().mark((function e(t,r){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t instanceof Blob?ie.fromBlob(t):"string"==typeof t?new ie(t):Array.isArray(t)?re(t,r):oe(t,r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e,t){return ne.apply(this,arguments)}function ne(){return ne=(0,s.Z)(v().mark((function e(t,r){var n,a,i,u,l,c,f,p,h,g,d,m;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Map,a=null,e.next=4,(0,x.WW)(t.map(function(){var e=(0,s.Z)(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t.name,e.next=3,ee(t instanceof Blob?t:t.source,r);case 3:return e.t1=e.sent,e.abrupt("return",{name:e.t0,source:e.t1});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:i=e.sent,u=[],l=V(i);try{for(l.s();!(c=l.n()).done;)(f=c.value)&&((0,x.Hc)(r)?f.source.dispose():u.push(f))}catch(b){l.e(b)}finally{l.f()}for((0,x.k_)(r),p=0,h=u;p<h.length;p++)g=h[p],d=g.name,m=g.source,((0,o.Wi)(a)||/\.(gltf|glb)/i.test(d))&&(a=m.url),n.set(d,m.url),m.files&&m.files.forEach((function(e,t){return n.set(t,e)}));if(!(0,o.Wi)(a)){e.next=12;break}throw new y.Z("mesh-load-external:missing-files","Missing files to load external mesh source");case 12:return e.abrupt("return",new ie(a,(function(){return u.forEach((function(e){return e.source.dispose()}))}),n));case 13:case"end":return e.stop()}}),e)}))),ne.apply(this,arguments)}function oe(e,t){return ae.apply(this,arguments)}function ae(){return ae=(0,s.Z)(v().mark((function e(t,n){var o,a,i;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.Hl)(Promise.resolve().then(r.bind(r,51916)),n);case 2:if(o=e.sent,a=o.default,"string"!=typeof t.multipart[0]){e.next=10;break}return e.next=7,Promise.all(t.multipart.map(function(){var e=(0,s.Z)(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t,{responseType:"array-buffer"});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=t.multipart;case 11:return i=e.t0,e.abrupt("return",ie.fromBlob(new Blob(i)));case 13:case"end":return e.stop()}}),e)}))),ae.apply(this,arguments)}var ie=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map;(0,u.Z)(this,e),this.url=t,this.dispose=r,this.files=n}return(0,l.Z)(e,null,[{key:"fromBlob",value:function(t){var r=URL.createObjectURL(t);return new e(r,(function(){return URL.revokeObjectURL(r)}))}}]),e}(),se=r(2834),ue=r(59914),le=r(65213),ce=r(77880),fe=r(75597),pe=r(83669),he=b.Z.getLogger("esri.geometry.support.meshUtils.offset");function ve(e,t,r){e.vertexAttributes&&e.vertexAttributes.position&&((0,o.pC)(e.transform)?(null!=(null==r?void 0:r.geographic)&&r.geographic!==e.transform.geographic&&he.warn("Specifying the 'geographic' parameter (".concat(r.geographic,") different from the Mesh transform setting (").concat(e.transform.geographic,") is not supported")),function(e,t){var r=e.origin;e.origin=(0,ce.b)((0,O.c)(),r,t)}(e.transform,t)):(0,N.h)(e.spatialReference,r)?function(e,t){var r=e.spatialReference,n=e.vertexAttributes.position,a=e.vertexAttributes.normal,i=e.vertexAttributes.tangent,s=new Float64Array(n.length),u=(0,o.pC)(a)?new Float32Array(a.length):null,l=(0,o.pC)(i)?new Float32Array(i.length):null,c=e.extent.center,f=ye;(0,B.Bm)(r,[c.x,c.y,c.z],de,(0,fe.rS)(r)),(0,se.f)(me,de),(0,ce.t)(f,t,me),(0,pe.XO)(n,r,s),(0,o.pC)(a)&&(0,pe.Iz)(a,n,s,r,u),(0,o.pC)(i)&&(0,pe.wi)(i,n,s,r,l),ge(s,f),(0,pe.To)(s,n,r),(0,o.pC)(a)&&(0,pe.Yk)(u,n,s,r,a),(0,o.pC)(i)&&(0,pe.M2)(l,n,s,r,i),e.vertexAttributesChanged()}(e,t):function(e,t){ge(e.vertexAttributes.position,t),e.vertexAttributesChanged()}(e,t))}function ge(e,t){if(e)for(var r=0;r<e.length;r+=3)for(var n=0;n<3;n++)e[r+n]+=t[n]}var ye=(0,O.c)(),de=(0,le.c)(),me=(0,ue.c)();function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xe(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ce(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ae={position:[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],uv:[0,1,1,1,1,0,0,0],faces:[0,1,2,0,2,3],facingAxisOrderSwap:{east:[3,1,2],west:[-3,-1,2],north:[-1,3,2],south:[1,-3,2],up:[1,2,3],down:[1,-2,-3]}};function Ze(e,t,r){(function(e){for(var t=0;t<e.position.length;t+=3)e.position[t+2]+=.5})(e),function(e,t){if(null==t)return;var r="number"==typeof t?[t,t,t]:[null!=t.width?t.width:1,null!=t.depth?t.depth:1,null!=t.height?t.height:1];Re[0]=r[0],Re[4]=r[1],Re[8]=r[2];for(var n=0;n<e.position.length;n+=3){for(var o=0;o<3;o++)je[o]=e.position[n+o];(0,ce.t)(je,je,Re);for(var a=0;a<3;a++)e.position[n+a]=je[a]}if(r[0]!==r[1]||r[1]!==r[2]){Re[0]=1/r[0],Re[4]=1/r[1],Re[8]=1/r[2];for(var i=0;i<e.normal.length;i+=3){for(var s=0;s<3;s++)je[s]=e.normal[i+s];(0,ce.t)(je,je,Re),(0,ce.n)(je,je);for(var u=0;u<3;u++)e.normal[i+u]=je[u]}}}(e,r&&r.size);var n=(0,H.w1)(e,t,r),o=n.vertexAttributes,a=n.transform;return{vertexAttributes:new F.ZP(we(we({},o),{},{uv:e.uv})),transform:a,components:[new T.Z({faces:e.faces,material:r&&r.material||null})],spatialReference:t.spatialReference}}var Oe={faceDescriptions:[{axis:[0,-1,0],uvOrigin:[0,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[1,0,0],uvOrigin:[.25,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,1,0],uvOrigin:[.5,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[-1,0,0],uvOrigin:[.75,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[0,0,1],uvOrigin:[0,.375],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,0,-1],uvOrigin:[0,.875],corners:[[-1,1],[1,1],[1,-1],[-1,-1]]}],uvScales:[[0,0],[1,0],[1,1],[0,1]],faceVertexOffsets:[0,1,2,0,2,3]},ke={south:0,east:1,north:2,west:3,up:4,down:5},je=(0,O.c)(),Re=(0,ue.c)(),Me=r(25359),Te=b.Z.getLogger("esri.geometry.support.meshUtils.rotate");function Pe(e,t,r){if(e.vertexAttributes&&e.vertexAttributes.position&&0!==t[3]){var n=e.spatialReference;if((0,o.pC)(e.transform)){var a;null!=(null==r?void 0:r.geographic)&&r.geographic!==e.transform.geographic&&Te.warn("Specifying the 'geographic' parameter (".concat(r.geographic,") different from the Mesh transform setting (").concat(e.transform.geographic,") is not supported"));var i=null!=(a=null==r?void 0:r.origin)?a:e.transform.getOriginPoint(n);!function(e,t,r){var n=(0,ce.s)(_e,r.x,r.y,r.z),o=(0,ce.f)(_e,n,e.origin);e.applyLocalInverse(o,Se),e.rotation=(0,M.qC)(e.rotation,t,(0,M.Ue)()),e.applyLocalInverse(o,o),(0,ce.f)(o,o,Se),e.translation=(0,ce.b)((0,O.c)(),e.translation,o)}(e.transform,t,i)}else{var s,u=null!=(s=null==r?void 0:r.origin)?s:e.origin;(0,N.h)(e.spatialReference,r)?function(e,t,r){var n=e.spatialReference,a=(0,fe.rS)(n),i=Ee;(0,B.KC)(r,i,a)||(0,B.KC)(e.origin,i,a);var s=e.vertexAttributes.position,u=e.vertexAttributes.normal,l=e.vertexAttributes.tangent,c=new Float64Array(s.length),f=(0,o.pC)(u)?new Float32Array(u.length):null,p=(0,o.pC)(l)?new Float32Array(l.length):null;(0,B.Bm)(a,i,Ie,a),(0,se.f)(Le,Ie);var h=De;(0,ce.t)((0,M.ZZ)(De),(0,M.ZZ)(t),Le),h[3]=t[3],(0,pe.XO)(s,n,c),(0,o.pC)(u)&&(0,pe.Iz)(u,s,c,n,f),(0,o.pC)(l)&&(0,pe.wi)(l,s,c,n,p),Fe(c,h,3,i),(0,pe.To)(c,s,n),(0,o.pC)(u)&&(Fe(f,h,3),(0,pe.Yk)(f,s,c,n,u)),(0,o.pC)(l)&&(Fe(p,h,4),(0,pe.M2)(p,s,c,n,l)),e.vertexAttributesChanged()}(e,t,u):function(e,t,r){var n=Ee;if(!(0,B.KC)(r,n,e.spatialReference)){var o=e.origin;n[0]=o.x,n[1]=o.y,n[2]=o.z,Te.error("Failed to project specified origin (wkid:".concat(r.spatialReference.wkid,") to mesh spatial reference (wkid:").concat(e.spatialReference.wkid,")."))}Fe(e.vertexAttributes.position,t,3,n),Fe(e.vertexAttributes.normal,t,3),Fe(e.vertexAttributes.tangent,t,4),e.vertexAttributesChanged()}(e,t,u)}}}function Fe(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:O.Z;if(!(0,o.Wi)(e)){(0,Me.i)(Ie),(0,Me.e)(Ie,Ie,(0,M.WH)(t),(0,M.ZZ)(t));for(var a=0;a<e.length;a+=r){for(var i=0;i<3;i++)_e[i]=e[a+i]-n[i];(0,ce.m)(_e,_e,Ie);for(var s=0;s<3;s++)e[a+s]=_e[s]+n[s]}}}var _e=(0,O.c)(),Se=(0,O.c)(),De=(0,M.Ue)(),Ie=(0,le.c)(),Le=(0,ue.c)(),Ee=(0,O.c)(),Ue=b.Z.getLogger("esri.geometry.support.meshUtils.scale");function ze(e,t,r){if(e.vertexAttributes&&e.vertexAttributes.position){var n=e.spatialReference;if((0,o.pC)(e.transform)){var a;null!=(null==r?void 0:r.geographic)&&r.geographic!==e.transform.geographic&&Ue.warn("Specifying the 'geographic' parameter (".concat(r.geographic,") different from the Mesh transform setting (").concat(e.transform.geographic,") is not supported"));var i=null!=(a=null==r?void 0:r.origin)?a:e.transform.getOriginPoint(n);!function(e,t,r){var n=(0,ce.s)(Ne,r.x,r.y,r.z),o=(0,ce.f)(Ne,n,e.origin);e.applyLocalInverse(o,He);var a=(0,ce.a)((0,O.c)(),e.scale,t);e.scale=a,e.applyLocalInverse(o,o),(0,ce.f)(o,o,He),e.translation=(0,ce.b)((0,O.c)(),e.translation,o)}(e.transform,t,i)}else{var s=(0,N.h)(e.spatialReference,r),u=r&&r.origin||e.origin;s?function(e,t,r){var n=e.spatialReference,a=(0,fe.rS)(n),i=Ye;(0,B.KC)(r,i,a)||(0,B.KC)(e.origin,i,a);var s=e.vertexAttributes.position,u=e.vertexAttributes.normal,l=e.vertexAttributes.tangent,c=new Float64Array(s.length),f=(0,o.pC)(u)?new Float32Array(u.length):null,p=(0,o.pC)(l)?new Float32Array(l.length):null;(0,pe.XO)(s,n,c),(0,o.pC)(u)&&(0,pe.Iz)(u,s,c,n,f),(0,o.pC)(l)&&(0,pe.wi)(l,s,c,n,p),We(c,t,i),(0,pe.To)(c,s,n),(0,o.pC)(u)&&(0,pe.Yk)(f,s,c,n,u),(0,o.pC)(l)&&(0,pe.M2)(p,s,c,n,l),e.vertexAttributesChanged()}(e,t,u):function(e,t,r){var n=Ye;if(!(0,B.KC)(r,n,e.spatialReference)){var o=e.origin;n[0]=o.x,n[1]=o.y,n[2]=o.z,Ue.error("Failed to project specified origin (wkid:".concat(r.spatialReference.wkid,") to mesh spatial reference (wkid:").concat(e.spatialReference.wkid,")."))}We(e.vertexAttributes.position,t,n),e.vertexAttributesChanged()}(e,t,u)}}}function We(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O.Z;if(e)for(var n=0;n<e.length;n+=3){for(var o=0;o<3;o++)Ne[o]=e[n+o]-r[o];(0,ce.a)(Ne,Ne,t);for(var a=0;a<3;a++)e[n+a]=Ne[a]+r[a]}}var Be,Ne=(0,O.c)(),He=(0,O.c)(),Ye=(0,O.c)();function Xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.Z)(e);if(t){var o=(0,p.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,f.Z)(this,r)}}var Ke=b.Z.getLogger("esri.geometry.Mesh"),Ve=Be=function(e){(0,c.Z)(f,e);var t,n,i=Je(f);function f(e){var t;return(0,u.Z)(this,f),(t=i.call(this,e)).components=null,t.transform=null,t.external=null,t.hasZ=!0,t.hasM=!1,t.vertexAttributes=new F.QL,t.type="mesh",t}return(0,l.Z)(f,[{key:"initialize",value:function(){var e=this;((0,o.Wi)(this.external)||this.vertexAttributes.position.length)&&(this.loadStatus="loaded"),this.when((function(){e.handles.add((0,C.Ym)((function(){var t;return{vertexAttributes:e.vertexAttributes,components:null==(t=e.components)?void 0:t.map((function(e){return e.clone()})),transform:(0,o.pC)(e.transform)?e.transform.clone():null}}),(function(){return e._set("external",null)}),{once:!0,sync:!0}))}))}},{key:"hasExtent",get:function(){return!this.loaded&&(0,o.pC)(this.external)&&(0,o.pC)(this.external.extent)||this.loaded&&this.vertexAttributes.position.length>0&&(!this.components||this.components.length>0)}},{key:"boundingInfo",get:function(){var e=this.vertexAttributes.position,t=this.spatialReference;if(0===e.length||this.components&&0===this.components.length)return{extent:new a.Z({xmin:0,ymin:0,zmin:0,xmax:0,ymax:0,zmax:0,spatialReference:t}),center:new j.Z({x:0,y:0,z:0,spatialReference:t})};for(var r=(0,o.pC)(this.transform)?this.transform.project(e,t):e,n=1/0,i=1/0,s=1/0,u=-1/0,l=-1/0,c=-1/0,f=0,p=0,h=0,v=r.length,g=1/(v/3),y=0;y<v;){var d=r[y++],m=r[y++],b=r[y++];n=Math.min(n,d),i=Math.min(i,m),s=Math.min(s,b),u=Math.max(u,d),l=Math.max(l,m),c=Math.max(c,b),f+=g*d,p+=g*m,h+=g*b}return{extent:new a.Z({xmin:n,ymin:i,zmin:s,xmax:u,ymax:l,zmax:c,spatialReference:t}),center:new j.Z({x:f,y:p,z:h,spatialReference:t})}}},{key:"anchor",get:function(){if((0,o.pC)(this.transform))return this.transform.getOriginPoint(this.spatialReference);var e=this.boundingInfo;return new j.Z({x:e.center.x,y:e.center.y,z:e.extent.zmin,spatialReference:this.spatialReference})}},{key:"origin",get:function(){return(0,o.pC)(this.transform)?this.transform.getOriginPoint(this.spatialReference):this.boundingInfo.center}},{key:"extent",get:function(){return!this.loaded&&(0,o.pC)(this.external)&&(0,o.pC)(this.external.extent)?this.external.extent.clone():this.boundingInfo.extent}},{key:"addComponent",value:function(e){this.loaded?(this.components||(this.components=[]),this.components.push(T.Z.from(e)),this.notifyChange("components")):Ke.error("addComponent()","Mesh must be loaded before applying operations")}},{key:"removeComponent",value:function(e){if(this.loaded){if(this.components){var t=this.components.indexOf(e);if(-1!==t)return this.components.splice(t,1),void this.notifyChange("components")}Ke.error("removeComponent()","Provided component is not part of the list of components")}else Ke.error("removeComponent()","Mesh must be loaded before applying operations")}},{key:"rotate",value:function(e,t,r,n){return(0,M.uT)(Ge.x,e,Qe),(0,M.uT)(Ge.y,t,$e),(0,M.uT)(Ge.z,r,et),(0,M.qC)(Qe,$e,Qe),(0,M.qC)(Qe,et,Qe),Pe(this,Qe,n),this}},{key:"offset",value:function(e,t,r,n){return this.loaded?(tt[0]=e,tt[1]=t,tt[2]=r,ve(this,tt,n),this):(Ke.error("offset()","Mesh must be loaded before applying operations"),this)}},{key:"scale",value:function(e,t){return this.loaded?(ze(this,e,t),this):(Ke.error("scale()","Mesh must be loaded before applying operations"),this)}},{key:"centerAt",value:function(e,t){return this.loaded?(X(this,e,t),this):(Ke.error("centerAt()","Mesh must be loaded before applying operations"),this)}},{key:"load",value:function(e){return(0,o.pC)(this.external)&&this.addResolvingPromise(function(e,t,r){return Q.apply(this,arguments)}(this,this.external.source,e)),Promise.resolve(this)}},{key:"clone",value:function(){var e=this.components?new Map:null,t=this.components?new Map:null,r={components:this.components?this.components.map((function(r){return r.cloneWithDeduplication(e,t)})):null,spatialReference:this.spatialReference,vertexAttributes:this.vertexAttributes.clone(),transform:(0,o.pC)(this.transform)?this.transform.clone():null,external:(0,o.pC)(this.external)?{source:this.external.source,extent:(0,o.pC)(this.external.extent)?this.external.extent.clone():null}:null};return new Be(r)}},{key:"vertexAttributesChanged",value:function(){this.notifyChange("vertexAttributes")}},{key:"toBinaryGLTF",value:(n=(0,s.Z)(v().mark((function e(t){var n,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(2800).then(r.bind(r,2800));case 2:return n=e.sent,o=n.toBinaryGLTF,e.abrupt("return",o(this,t));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}],[{key:"createBox",value:function(e,t){if(!(e instanceof j.Z))return Ke.error(".createBox()","expected location to be a Point instance"),null;var r=new Be(Ze(function(){for(var e=Oe.faceDescriptions,t=Oe.faceVertexOffsets,r=Oe.uvScales,n=4*e.length,o=new Float64Array(3*n),a=new Float32Array(3*n),i=new Float32Array(2*n),s=new Uint32Array(2*e.length*3),u=0,l=0,c=0,f=0,p=0;p<e.length;p++){var h,v=e[p],g=u/3,y=xe(t);try{for(y.s();!(h=y.n()).done;){var d=h.value;s[f++]=g+d}}catch(A){y.e(A)}finally{y.f()}for(var m=v.corners,b=0;b<4;b++){var w=m[b],x=0;i[c++]=.25*r[b][0]+v.uvOrigin[0],i[c++]=v.uvOrigin[1]-.25*r[b][1];for(var C=0;C<3;C++)0!==v.axis[C]?(o[u++]=.5*v.axis[C],a[l++]=v.axis[C]):(o[u++]=.5*w[x++],a[l++]=0)}}return{position:o,normal:a,uv:i,faces:s}}(),e,t));return t&&t.imageFace&&"all"!==t.imageFace?function(e,t){for(var r=e.components[0],n=r.faces,a=ke[t],i=6*a,s=new Uint32Array(6),u=new Uint32Array(n.length-6),l=0,c=0,f=0;f<n.length;f++)f>=i&&f<i+6?s[l++]=n[f]:u[c++]=n[f];if((0,o.pC)(e.vertexAttributes.uv)){for(var p=new Float32Array(e.vertexAttributes.uv),h=4*a*2,v=[0,1,1,1,1,0,0,0],g=0;g<v.length;g++)p[h+g]=v[g];e.vertexAttributes.uv=p}return e.components=[new T.Z({faces:s,material:r.material}),new T.Z({faces:u})],e}(r,t.imageFace):r}},{key:"createSphere",value:function(e,t){return e instanceof j.Z?new Be(Ze(function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Math.round(8*Math.pow(2,e)),r=2*t,n=(t-1)*(r+1)+2*r,o=new Float64Array(3*n),a=new Float32Array(3*n),i=new Float32Array(2*n),s=new Uint32Array((t-1)*r*2*3),u=0,l=0,c=0,f=0,p=0;p<=t;p++){var h=p/t*Math.PI+.5*Math.PI,v=Math.cos(h),g=Math.sin(h);je[2]=g;for(var y=0===p||p===t,d=y?r-1:r,m=0;m<=d;m++){var b=m/d*2*Math.PI;je[0]=-Math.sin(b)*v,je[1]=Math.cos(b)*v;for(var w=0;w<3;w++)o[u]=.5*je[w],a[u]=je[w],++u;i[l++]=(m+(y?.5:0))/r,i[l++]=p/t,0!==p&&m!==r&&(p!==t&&(s[c++]=f,s[c++]=f+1,s[c++]=f-r),1!==p&&(s[c++]=f,s[c++]=f-r,s[c++]=f-r-1)),f++}}return{position:o,normal:a,uv:i,faces:s}}(t&&t.densificationFactor||0),e,t)):(Ke.error(".createSphere()","expected location to be a Point instance"),null)}},{key:"createCylinder",value:function(e,t){return e instanceof j.Z?new Be(Ze(function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=5,r=Math.round(16*Math.pow(2,e)),n=(t-1)*(r+1)+2*r,o=new Float64Array(3*n),a=new Float32Array(3*n),i=new Float32Array(2*n),s=new Uint32Array(4*r*3),u=0,l=0,c=0,f=0,p=0,h=0;h<=t;h++)for(var v=0===h||h===t,g=h<=1||h>=t-1,y=2===h||4===h,d=v?r-1:r,m=0;m<=d;m++){var b=m/d*2*Math.PI,w=v?0:.5;je[0]=w*Math.sin(b),je[1]=w*-Math.cos(b),je[2]=h<=2?.5:-.5;for(var x=0;x<3;x++)o[u++]=je[x],a[l++]=g?2===x?h<=1?1:-1:0:2===x?0:je[x]/w;i[c++]=(m+(v?.5:0))/r,i[c++]=h<=1?1*h/3:h<=3?1*(h-2)/3+1/3:1*(h-4)/3+2/3,y||0===h||m===r||(h!==t&&(s[f++]=p,s[f++]=p+1,s[f++]=p-r),1!==h&&(s[f++]=p,s[f++]=p-r,s[f++]=p-r-1)),p++}return{position:o,normal:a,uv:i,faces:s}}(t&&t.densificationFactor||0),e,t)):(Ke.error(".createCylinder()","expected location to be a Point instance"),null)}},{key:"createPlane",value:function(e,t){var r;if(!(e instanceof j.Z))return Ke.error(".createPlane()","expected location to be a Point instance"),null;var n=null!=(r=null==t?void 0:t.facing)?r:"up",o=function(e,t){var r="number"==typeof t?t:null!=t?t.width:1,n="number"==typeof t?t:null!=t?t.height:1;switch(e){case"up":case"down":return{width:r,depth:n};case"north":case"south":return{width:r,height:n};case"east":case"west":return{depth:r,height:n}}}(n,null==t?void 0:t.size);return new Be(Ze(function(e){for(var t=Ae.facingAxisOrderSwap[e],r=Ae.position,n=Ae.normal,o=new Float64Array(r.length),a=new Float32Array(n.length),i=0,s=0;s<4;s++)for(var u=i,l=0;l<3;l++){var c=t[l],f=Math.abs(c)-1,p=c>=0?1:-1;o[i]=r[u+f]*p,a[i]=n[u+f]*p,i++}return{position:o,normal:a,uv:new Float32Array(Ae.uv),faces:new Uint32Array(Ae.faces)}}(n),e,qe(qe({},t),{},{size:o})))}},{key:"createFromPolygon",value:function(e,t){if(!(e instanceof R.Z))return Ke.error(".createFromPolygon()","expected polygon to be a Polygon instance"),null;var r=E(e);return new Be({vertexAttributes:new F.QL({position:r.position}),components:[new T.Z({faces:r.faces,shading:"flat",material:t&&t.material||null})],spatialReference:e.spatialReference})}},{key:"createFromGLTF",value:(t=(0,s.Z)(v().mark((function e(t,n,o){var a,i;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof j.Z){e.next=2;break}throw Ke.error(".createfromGLTF()","expected location to be a Point instance"),new y.Z("invalid-input","Expected location to be a Point instance");case 2:return e.next=4,(0,x.Hl)(Promise.all([r.e(9351),r.e(317),r.e(6561)]).then(r.bind(r,26561)),o);case 4:return a=e.sent,i=a.loadGLTFMesh,e.t0=Be,e.next=9,i(t,n,o);case 9:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 11:case"end":return e.stop()}}),e)}))),function(e,r,n){return t.apply(this,arguments)})},{key:"createWithExternalSource",value:function(e,t,r){var n,o,a,i=null!=(n=null==r?void 0:r.extent)?n:null,s=null!=(o=null==r?void 0:r.transform.clone())?o:new P.Z;s.origin=[e.x,e.y,null!=(a=e.z)?a:0];var u=e.spatialReference;return new Be({external:{source:t,extent:i},transform:s,spatialReference:u})}},{key:"createIncomplete",value:function(e,t){var r,n,o=null!=(r=null==t?void 0:t.transform.clone())?r:new P.Z;o.origin=[e.x,e.y,null!=(n=e.z)?n:0];var a=e.spatialReference,i=new Be({transform:o,spatialReference:a});return i.addResolvingPromise(Promise.reject(new y.Z("mesh-incomplete","Mesh resources are not complete"))),i}}]),f}((0,d.p)(m.Z.LoadableMixin((0,w.v)(k.Z))));(0,g._)([(0,A.Cb)({type:[T.Z],json:{write:!0}})],Ve.prototype,"components",void 0),(0,g._)([(0,A.Cb)({type:P.Z,json:{write:!0}})],Ve.prototype,"transform",void 0),(0,g._)([(0,A.Cb)({constructOnly:!0})],Ve.prototype,"external",void 0),(0,g._)([(0,A.Cb)({readOnly:!0})],Ve.prototype,"hasExtent",null),(0,g._)([(0,A.Cb)({readOnly:!0})],Ve.prototype,"boundingInfo",null),(0,g._)([(0,A.Cb)({readOnly:!0})],Ve.prototype,"anchor",null),(0,g._)([(0,A.Cb)({readOnly:!0})],Ve.prototype,"origin",null),(0,g._)([(0,A.Cb)({readOnly:!0,json:{read:!1}})],Ve.prototype,"extent",null),(0,g._)([(0,A.Cb)({readOnly:!0,json:{read:!1,write:!0,default:!0}})],Ve.prototype,"hasZ",void 0),(0,g._)([(0,A.Cb)({readOnly:!0,json:{read:!1,write:!0,default:!1}})],Ve.prototype,"hasM",void 0),(0,g._)([(0,A.Cb)({type:F.QL,nonNullable:!0,json:{write:!0}})],Ve.prototype,"vertexAttributes",void 0),Ve=Be=(0,g._)([(0,Z.j)("esri.geometry.Mesh")],Ve);var Ge={x:(0,O.f)(1,0,0),y:(0,O.f)(0,1,0),z:(0,O.f)(0,0,1)},Qe=(0,M.Ue)(),$e=(0,M.Ue)(),et=(0,M.Ue)(),tt=(0,O.c)(),rt=Ve,nt=r(79228);function ot(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return at(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return at(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function it(e,t,r){var a=r.features;r.features=[],delete r.geometryType;var i=nt.default.fromJSON(r);i.geometryType="mesh";var s,u,l=i.spatialReference,c=(0,o.Wi)(e.outFields)||!e.outFields.length?function(){return{}}:(s=e.outFields.includes("*")?null:new Set(e.outFields),function(e){var t=e.attributes;if(!t)return{};if(!s)return t;for(var r in t)s.has(r)||delete t[r];return t}),f=ot(a);try{for(f.s();!(u=f.n()).done;){var p=u.value,h=st(p,l,t);(0,o.pC)(h)&&i.features.push(new n.Z({geometry:h,attributes:c(p)}))}}catch(v){f.e(v)}finally{f.f()}return i}function st(e,t,r){var n=function(e){if(!e.assetMappings)return{status:0};var t,r=[],n=new Map,o=ot(e.assetMappings);try{for(o.s();!(t=o.n()).done;){var a=t.value,i=a.seqNo,s=a.assetName,u=a.assetURL,l=a.conversionStatus;if("FAILED"===l)return{status:0};if("COMPLETED"!==l)return{status:1};if(null==i)r.push({name:s,source:u});else{var c=n.get(s),f=void 0;c?f=c.multipart:(f=[],r.push({name:s,source:{multipart:f}}),n.set(s,{multipart:f})),f[i]=u}}}catch(p){o.e(p)}finally{o.f()}return{status:2,source:r}}(e),o=n.status,i=n.source;if(0===o)return null;var s=function(e,t,r){var n=e.attributes,o=r.transformFieldRoles;return new j.Z({x:n[o.originX],y:n[o.originY],z:n[o.originZ],spatialReference:t})}(e,t,r),u=a.Z.fromJSON(e.geometry);u.spatialReference=t;var l=function(e,t){var r,n=e.attributes,o=e.assetMappings,a=t.transformFieldRoles;return new P.Z({translation:[n[a.translationX],n[a.translationY],n[a.translationZ]],rotation:(0,M.uT)([n[a.rotationX],n[a.rotationY],n[a.rotationZ]],n[a.rotationDeg]),scale:[n[a.scaleX],n[a.scaleY],n[a.scaleZ]],geographic:!(null!=(r=o.flags)&&r.includes("PROJECT_VERTICES"))})}(e,r);return 1===o?rt.createIncomplete(s,{extent:u,transform:l}):rt.createWithExternalSource(s,i,{extent:u,transform:l})}}}]);
//# sourceMappingURL=366-04751377744f219b4c2c.js.map