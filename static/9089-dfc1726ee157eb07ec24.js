"use strict";(self.webpackChunkenergy_and_water_dashboard=self.webpackChunkenergy_and_water_dashboard||[]).push([[9089],{89089:function(e,t,r){r.r(t),r.d(t,{default:function(){return le}});var n=r(4942),a=r(15861),i=r(97326),o=r(11752),l=r(15671),y=r(43144),u=r(60136),s=r(6215),p=r(61120),c=r(87757),f=r.n(c),d=r(83195),b=(r(58168),r(9340)),v=(r(80240),r(20410)),m=r(33300),h=r(82703),g=r(10173),S=r(80347),O=r(34582),w=r(86696),C=r(89636),_=(r(64003),r(9634)),k=r(30732),Z=r(61979),N=r(93269),x=r(52060),J=r(50810),L=r(67124),T=(r(43079),r(33682),r(846)),j=r(65673),M=r(83350),R=r(29780),I=r(74023),P=r(7449);function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.Z)(e);if(t){var a=(0,p.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}var E=function(e){(0,u.Z)(r,e);var t=D(r);function r(e){var n;return(0,l.Z)(this,r),(n=t.call(this,e)).elevationInfo=null,n.graphics=new I.J,n.screenSizePerspectiveEnabled=!0,n.type="graphics",n.internal=!1,n}return(0,y.Z)(r,[{key:"destroy",value:function(){this.removeAll(),this.graphics.destroy()}},{key:"add",value:function(e){return this.graphics.add(e),this}},{key:"addMany",value:function(e){return this.graphics.addMany(e),this}},{key:"removeAll",value:function(){return this.graphics.removeAll(),this}},{key:"remove",value:function(e){this.graphics.remove(e)}},{key:"removeMany",value:function(e){this.graphics.removeMany(e)}},{key:"on",value:function(e,t){return(0,o.Z)((0,p.Z)(r.prototype),"on",this).call(this,e,t)}},{key:"graphicChanged",value:function(e){this.emit("graphic-update",e)}}]),r}((0,M.h)((0,R.M)(j.Z)));(0,d._)([(0,C.Cb)({type:P.Z})],E.prototype,"elevationInfo",void 0),(0,d._)([(0,C.Cb)((0,T.z)(I.J,"graphics"))],E.prototype,"graphics",void 0),(0,d._)([(0,C.Cb)({type:["show","hide"]})],E.prototype,"listMode",void 0),(0,d._)([(0,C.Cb)()],E.prototype,"screenSizePerspectiveEnabled",void 0),(0,d._)([(0,C.Cb)({readOnly:!0})],E.prototype,"type",void 0),(0,d._)([(0,C.Cb)({constructOnly:!0})],E.prototype,"internal",void 0);var G=E=(0,d._)([(0,k.j)("esri.layers.GraphicsLayer")],E),A=r(54659),F=r(74915),W=r(3781),B=r(35166),z=r(81672),U=r(47696),q=r(12245),V=r(1888),X=r(39356),$=r(59007);function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Q(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Y(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw i}}}}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.Z)(e);if(t){var a=(0,p.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}function te(e){return e.layers.some((function(e){return null!=e.layerDefinition.visibilityField}))}var re=new B.Z({name:"OBJECTID",alias:"OBJECTID",type:"oid",nullable:!1,editable:!1}),ne=new B.Z({name:"title",alias:"Title",type:"string",nullable:!0,editable:!0}),ae=function(e){(0,u.Z)(r,e);var t=ee(r);function r(){var e;return(0,l.Z)(this,r),(e=t.apply(this,arguments)).visibilityMode="inherited",e}return(0,y.Z)(r,[{key:"initialize",value:function(){var e,t=this,r=Q(this.graphics);try{for(r.s();!(e=r.n()).done;){e.value.sourceLayer=this.layer}}catch(n){r.e(n)}finally{r.f()}this.graphics.on("after-add",(function(e){e.item.sourceLayer=t.layer})),this.graphics.on("after-remove",(function(e){e.item.sourceLayer=null}))}},{key:"sublayers",get:function(){return this.graphics}}]),r}(G);(0,d._)([(0,C.Cb)({readOnly:!0})],ae.prototype,"sublayers",null),(0,d._)([(0,C.Cb)()],ae.prototype,"layer",void 0),(0,d._)([(0,C.Cb)({readOnly:!0})],ae.prototype,"visibilityMode",void 0),ae=(0,d._)([(0,k.j)("esri.layers.MapNotesLayer.MapNotesSublayer")],ae);var ie=[{geometryType:"polygon",geometryTypeJSON:"esriGeometryPolygon",layerId:"polygonLayer",title:"Polygons",identifyingSymbol:(new z.Z).toJSON()},{geometryType:"polyline",geometryTypeJSON:"esriGeometryPolyline",layerId:"polylineLayer",title:"Polylines",identifyingSymbol:(new U.Z).toJSON()},{geometryType:"multipoint",geometryTypeJSON:"esriGeometryMultipoint",layerId:"multipointLayer",title:"Multipoints",identifyingSymbol:(new q.Z).toJSON()},{geometryType:"point",geometryTypeJSON:"esriGeometryPoint",layerId:"pointLayer",title:"Points",identifyingSymbol:(new q.Z).toJSON()},{geometryType:"point",geometryTypeJSON:"esriGeometryPoint",layerId:"textLayer",title:"Text",identifyingSymbol:(new V.Z).toJSON()}],oe=function(e){(0,u.Z)(n,e);var t,r=ee(n);function n(e){var t;return(0,l.Z)(this,n),(t=r.call(this,e)).capabilities={operations:{supportsMapNotesEditing:!0}},t.featureCollections=null,t.featureCollectionJSON=null,t.featureCollectionType="notes",t.legendEnabled=!1,t.minScale=0,t.maxScale=0,t.spatialReference=X.Z.WGS84,t.sublayers=new v.Z(ie.map((function(e){return new ae({id:e.layerId,title:e.title,layer:(0,i.Z)(t)})}))),t.title="Map Notes",t.type="map-notes",t.visibilityMode="inherited",t}return(0,y.Z)(n,[{key:"readCapabilities",value:function(e,t,r){return{operations:{supportsMapNotesEditing:!te(t)&&"portal-item"!==(null==r?void 0:r.origin)}}}},{key:"readFeatureCollections",value:function(e,t,r){if(!te(t))return null;var n=t.layers.map((function(e){var t=new L.default;return t.read(e,r),t}));return new v.Z({items:n})}},{key:"readLegacyfeatureCollectionJSON",value:function(e,t){return te(t)?(0,h.d9)(t.featureCollection):null}},{key:"readFullExtent",value:function(e,t){if(!t.layers.length||t.layers.every((function(e){return!e.layerDefinition.extent})))return new $.Z({xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:X.Z.WGS84});var r=X.Z.fromJSON(t.layers[0].layerDefinition.spatialReference);return t.layers.reduce((function(e,t){var r=t.layerDefinition.extent;return r?$.Z.fromJSON(r).union(e):e}),new $.Z({spatialReference:r}))}},{key:"readMinScale",value:function(e,t){var r,n=Q(t.layers);try{for(n.s();!(r=n.n()).done;){var a=r.value;if(null!=a.layerDefinition.minScale)return a.layerDefinition.minScale}}catch(i){n.e(i)}finally{n.f()}return 0}},{key:"readMaxScale",value:function(e,t){var r,n=Q(t.layers);try{for(n.s();!(r=n.n()).done;){var a=r.value;if(null!=a.layerDefinition.maxScale)return a.layerDefinition.maxScale}}catch(i){n.e(i)}finally{n.f()}return 0}},{key:"multipointLayer",get:function(){return this._findSublayer("multipointLayer")}},{key:"pointLayer",get:function(){return this._findSublayer("pointLayer")}},{key:"polygonLayer",get:function(){return this._findSublayer("polygonLayer")}},{key:"polylineLayer",get:function(){return this._findSublayer("polylineLayer")}},{key:"readSpatialReference",value:function(e,t){return t.layers.length?X.Z.fromJSON(t.layers[0].layerDefinition.spatialReference):X.Z.WGS84}},{key:"readSublayers",value:function(e,t,r){var n=this;if(te(t))return null;for(var a=[],i=function(e){var r=t.layers[e],i=r.layerDefinition,o=r.featureSet,y=null!=(l=i.geometryType)?l:o.geometryType,u=ie.find((function(e){var t,r,n;return y===e.geometryTypeJSON&&(null==(t=i.drawingInfo)||null==(r=t.renderer)||null==(n=r.symbol)?void 0:n.type)===e.identifyingSymbol.type}));if(u){var s=new ae({id:u.layerId,title:i.name,layer:n,graphics:o.features.map((function(e){var t=e.geometry,r=e.symbol,n=e.attributes,a=e.popupInfo;return b.Z.fromJSON({attributes:n,geometry:t,symbol:r,popupTemplate:a})}))});a.push(s)}},o=0;o<t.layers.length;o++){var l;i(o)}return new v.Z(a)}},{key:"writeSublayers",value:function(e,t,r,n){var a=this,i=this.minScale,o=this.maxScale;if(!(0,g.Wi)(e)){var l=e.some((function(e){return e.graphics.length>0}));if(this.capabilities.operations.supportsMapNotesEditing){var y,u=[],s=this.spatialReference.toJSON(),p=Q(e);try{e:for(p.s();!(y=p.n()).done;){var c,f=Q(y.value.graphics);try{for(f.s();!(c=f.n()).done;){var d=c.value;if((0,g.pC)(d.geometry)){s=d.geometry.spatialReference.toJSON();break e}}}catch(w){f.e(w)}finally{f.f()}}}catch(w){p.e(w)}finally{p.f()}var b,v=Q(ie);try{var h=function(){var t=b.value,r=e.find((function(e){return t.layerId===e.id}));a._writeMapNoteSublayer(u,r,t,i,o,s,n)};for(v.s();!(b=v.n()).done;)h()}catch(w){v.e(w)}finally{v.f()}(0,O.RB)("featureCollection.layers",u,t)}else{var S;l&&(null==n||null==(S=n.messages)||S.push(new m.Z("map-notes-layer:editing-not-supported","New map notes cannot be added to this layer")))}}}},{key:"textLayer",get:function(){return this._findSublayer("textLayer")}},{key:"load",value:function(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Collection"]},e)),Promise.resolve(this)}},{key:"read",value:function(e,t){"featureCollection"in e&&(e=(0,h.d9)(e),Object.assign(e,e.featureCollection)),(0,o.Z)((0,p.Z)(n.prototype),"read",this).call(this,e,t)}},{key:"beforeSave",value:(t=(0,a.Z)(f().mark((function e(){var t,r,n,a,i,o,l,y,u,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,g.Wi)(this.sublayers)){e.next=2;break}return e.abrupt("return");case 2:t=null,r=[],n=Q(this.sublayers),e.prev=5,n.s();case 7:if((a=n.n()).done){e.next=40;break}i=a.value,o=Q(i.graphics),e.prev=10,o.s();case 12:if((l=o.n()).done){e.next=30;break}if(y=l.value,!(0,g.pC)(y.geometry)){e.next=28;break}if(u=y.geometry,!t){e.next=26;break}if(e.t0=(0,J.fS)(u.spatialReference,t),e.t0){e.next=24;break}if(e.t1=(0,N.Up)(u.spatialReference,t)||(0,N.kR)(),e.t1){e.next=23;break}return e.next=23,(0,N.zD)();case 23:y.geometry=(0,N.iV)(u,t);case 24:e.next=27;break;case 26:t=u.spatialReference;case 27:r.push(y);case 28:e.next=12;break;case 30:e.next=35;break;case 32:e.prev=32,e.t2=e.catch(10),o.e(e.t2);case 35:return e.prev=35,o.f(),e.finish(35);case 38:e.next=7;break;case 40:e.next=45;break;case 42:e.prev=42,e.t3=e.catch(5),n.e(e.t3);case 45:return e.prev=45,n.f(),e.finish(45);case 48:return e.next=50,(0,x.aX)(r.map((function(e){return e.geometry})));case 50:s=e.sent,r.forEach((function(e,t){return e.geometry=s[t]}));case 52:case"end":return e.stop()}}),e,this,[[5,42,45,48],[10,32,35,38]])}))),function(){return t.apply(this,arguments)})},{key:"_findSublayer",value:function(e){var t,r;return(0,g.Wi)(this.sublayers)?null:null!=(t=null==(r=this.sublayers)?void 0:r.find((function(t){return t.id===e})))?t:null}},{key:"_writeMapNoteSublayer",value:function(e,t,r,n,a,i,o){var l=[];if(!(0,g.Wi)(t)){var y,u=Q(t.graphics);try{for(u.s();!(y=u.n()).done;){var s=y.value;this._writeMapNote(l,s,r.geometryType,o)}}catch(p){u.e(p)}finally{u.f()}this._normalizeObjectIds(l,re),e.push({layerDefinition:{name:t.title,drawingInfo:{renderer:{type:"simple",symbol:(0,h.d9)(r.identifyingSymbol)}},geometryType:r.geometryTypeJSON,minScale:n,maxScale:a,objectIdField:"OBJECTID",fields:[re.toJSON(),ne.toJSON()],spatialReference:i},featureSet:{features:l,geometryType:r.geometryTypeJSON}})}}},{key:"_writeMapNote",value:function(e,t,r,n){if(!(0,g.Wi)(t)){var a,i,o=t.geometry,l=t.symbol,y=t.popupTemplate;if(!(0,g.Wi)(o))if(o.type===r)if((0,g.Wi)(l))null==n||null==(i=n.messages)||i.push(new w.Z("map-notes-layer:no-symbol","Skipping map notes with no symbol",{graphic:t}));else{var u={attributes:K({},t.attributes),geometry:o.toJSON(),symbol:l.toJSON()};(0,g.pC)(y)&&(u.popupInfo=y.toJSON()),e.push(u)}else null==n||null==(a=n.messages)||a.push(new w.Z("map-notes-layer:invalid-geometry-type",'Geometry "'.concat(o.type,'" cannot be saved in "').concat(r,'" layer'),{graphic:t}))}}},{key:"_normalizeObjectIds",value:function(e,t){var r,n=t.name,a=(0,A.S)(n,e)+1,i=new Set,o=Q(e);try{for(o.s();!(r=o.n()).done;){var l=r.value;l.attributes||(l.attributes={});var y=l.attributes;(null==y[n]||i.has(y[n]))&&(y[n]=a++),i.add(y[n])}}catch(u){o.e(u)}finally{o.f()}}}]),n}((0,M.h)((0,R.M)((0,F.q)((0,W.I)((0,S.R)(j.Z))))));(0,d._)([(0,C.Cb)({readOnly:!0})],oe.prototype,"capabilities",void 0),(0,d._)([(0,_.r)(["portal-item","web-map"],"capabilities",["layers"])],oe.prototype,"readCapabilities",null),(0,d._)([(0,C.Cb)({readOnly:!0})],oe.prototype,"featureCollections",void 0),(0,d._)([(0,_.r)(["web-map","portal-item"],"featureCollections",["layers"])],oe.prototype,"readFeatureCollections",null),(0,d._)([(0,C.Cb)({readOnly:!0,json:{origins:{"web-map":{write:{enabled:!0,target:"featureCollection"}}}}})],oe.prototype,"featureCollectionJSON",void 0),(0,d._)([(0,_.r)(["web-map","portal-item"],"featureCollectionJSON",["featureCollection"])],oe.prototype,"readLegacyfeatureCollectionJSON",null),(0,d._)([(0,C.Cb)({readOnly:!0,json:{read:!1,write:{enabled:!0,ignoreOrigin:!0}}})],oe.prototype,"featureCollectionType",void 0),(0,d._)([(0,C.Cb)({json:{write:!1}})],oe.prototype,"fullExtent",void 0),(0,d._)([(0,_.r)(["web-map","portal-item"],"fullExtent",["layers"])],oe.prototype,"readFullExtent",null),(0,d._)([(0,C.Cb)({readOnly:!0,json:{origins:{"web-map":{write:{target:"featureCollection.showLegend",overridePolicy:function(){return{enabled:null!=this.featureCollectionJSON}}}}}}})],oe.prototype,"legendEnabled",void 0),(0,d._)([(0,C.Cb)({type:["show","hide"]})],oe.prototype,"listMode",void 0),(0,d._)([(0,C.Cb)({type:Number,nonNullable:!0,json:{write:!1}})],oe.prototype,"minScale",void 0),(0,d._)([(0,_.r)(["web-map","portal-item"],"minScale",["layers"])],oe.prototype,"readMinScale",null),(0,d._)([(0,C.Cb)({type:Number,nonNullable:!0,json:{write:!1}})],oe.prototype,"maxScale",void 0),(0,d._)([(0,_.r)(["web-map","portal-item"],"maxScale",["layers"])],oe.prototype,"readMaxScale",null),(0,d._)([(0,C.Cb)({readOnly:!0})],oe.prototype,"multipointLayer",null),(0,d._)([(0,C.Cb)({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],oe.prototype,"operationalLayerType",void 0),(0,d._)([(0,C.Cb)({readOnly:!0})],oe.prototype,"pointLayer",null),(0,d._)([(0,C.Cb)({readOnly:!0})],oe.prototype,"polygonLayer",null),(0,d._)([(0,C.Cb)({readOnly:!0})],oe.prototype,"polylineLayer",null),(0,d._)([(0,C.Cb)({type:X.Z})],oe.prototype,"spatialReference",void 0),(0,d._)([(0,_.r)(["web-map","portal-item"],"spatialReference",["layers"])],oe.prototype,"readSpatialReference",null),(0,d._)([(0,C.Cb)({readOnly:!0,json:{origins:{"web-map":{write:{ignoreOrigin:!0}}}}})],oe.prototype,"sublayers",void 0),(0,d._)([(0,_.r)("web-map","sublayers",["layers"])],oe.prototype,"readSublayers",null),(0,d._)([(0,Z.c)("web-map","sublayers")],oe.prototype,"writeSublayers",null),(0,d._)([(0,C.Cb)({readOnly:!0})],oe.prototype,"textLayer",null),(0,d._)([(0,C.Cb)()],oe.prototype,"title",void 0),(0,d._)([(0,C.Cb)({readOnly:!0,json:{read:!1}})],oe.prototype,"type",void 0);var le=oe=(0,d._)([(0,k.j)("esri.layers.MapNotesLayer")],oe)}}]);
//# sourceMappingURL=9089-dfc1726ee157eb07ec24.js.map