"use strict";(self.webpackChunkenergy_and_water_dashboard=self.webpackChunkenergy_and_water_dashboard||[]).push([[8302],{78302:function(e,t,n){n.r(t),n.d(t,{destroyContext:function(){return P},dracoDecompressPointCloudData:function(){return b},filterObbsForModifications:function(){return m},filterObbsForModificationsSync:function(){return T},initialize:function(){return M},interpretObbModificationResults:function(){return x},process:function(){return d},setLegacySchema:function(){return _},setModifications:function(){return w},setModificationsSync:function(){return A},test:function(){return O}});var r,o,i,u=n(15861),s=n(87757),a=n.n(s),f=n(10173),c=n(29812),l=n(31483);function p(e){return(0,l.V)("esri/libs/i3s/".concat(e))}function d(e){return y.apply(this,arguments)}function y(){return y=(0,u.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:return n=[t.geometryBuffer],e.abrupt("return",{result:L(t,n),transferList:n});case 4:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function b(e){return h.apply(this,arguments)}function h(){return h=(0,u.Z)(a().mark((function e(t){var n,r,o,u,s,f,l,p,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:if(r=[t.geometryBuffer],o=t.geometryBuffer,u=o.byteLength,s=i._malloc(u),(f=new Uint8Array(i.HEAPU8.buffer,s,u)).set(new Uint8Array(o)),l=i.dracoDecompressPointCloudData(s,f.byteLength),i._free(s),!(l.error.length>0)){e.next=7;break}throw"i3s.wasm: ".concat(l.error);case 7:return p=(null==(n=l.featureIds)?void 0:n.length)>0?(0,c.tP)(l.featureIds):null,d=(0,c.tP)(l.positions),p&&r.push(p.buffer),r.push(d.buffer),e.abrupt("return",{result:{positions:d,featureIds:p},transferList:r});case 10:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function m(e){return E.apply(this,arguments)}function E(){return E=(0,u.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:return T(t),n={buffer:t.buffer},e.abrupt("return",{result:n,transferList:[n.buffer]});case 5:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function w(e){return g.apply(this,arguments)}function g(){return(g=(0,u.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:A(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return v.apply(this,arguments)}function v(){return(v=(0,u.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:i.setLegacySchema(t.context,t.jsonSchema);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){I(e)}function A(e){for(var t=e.modifications,n=i._malloc(8*t.length),r=new Float64Array(i.HEAPU8.buffer,n,t.length),o=0;o<t.length;++o)r[o]=t[o];i.setModifications(e.context,n,t.length,e.isGeodetic),i._free(n)}function L(e,t){if(!i)return null;var n=e.context,r=e.localOrigin,o=e.globalTrafo,u=e.mbs,s=e.obb,a=e.elevationOffset,l=e.geometryBuffer,p=e.geometryDescriptor,d=e.indexToVertexProjector,y=e.vertexToRenderProjector,b=i._malloc(l.byteLength),h=i._malloc(33*Float64Array.BYTES_PER_ELEMENT),m=new Uint8Array(i.HEAPU8.buffer,b,l.byteLength);m.set(new Uint8Array(l));var E=new Float64Array(i.HEAPU8.buffer,h,33);F(E,r);var w=E.byteOffset+3*E.BYTES_PER_ELEMENT,g=new Float64Array(E.buffer,w);F(g,o),w+=16*E.BYTES_PER_ELEMENT,F(g=new Float64Array(E.buffer,w),u),w+=4*E.BYTES_PER_ELEMENT,(0,f.pC)(s)&&(F(g=new Float64Array(E.buffer,w),s.center),w+=3*E.BYTES_PER_ELEMENT,F(g=new Float64Array(E.buffer,w),s.halfSize),w+=3*E.BYTES_PER_ELEMENT,F(g=new Float64Array(E.buffer,w),s.quaternion));var _=p,v={isDraco:!1,isLegacy:!1,color:e.layouts.some((function(e){return e.some((function(e){return"color"===e.name}))})),normal:e.needNormals&&e.layouts.some((function(e){return e.some((function(e){return"normalCompressed"===e.name}))})),uv0:e.layouts.some((function(e){return e.some((function(e){return"uv0"===e.name}))})),uvRegion:e.layouts.some((function(e){return e.some((function(e){return"uvRegion"===e.name}))})),featureIndex:_.featureIndex},P=i.process(n,!!e.obb,b,m.byteLength,_,v,h,a,d,y,e.normalReferenceFrame);if(i._free(h),i._free(b),P.error.length>0)throw"i3s.wasm: ".concat(P.error);if(P.discarded)return null;var A=P.componentOffsets.length>0?(0,c.tP)(P.componentOffsets):null,L=P.featureIds.length>0?(0,c.tP)(P.featureIds):null,x=(0,c.tP)(P.interleavedVertedData).buffer,T=1===P.indicesType?(0,c.tP)(new Uint16Array(P.indices.buffer,P.indices.byteOffset,P.indices.byteLength/2)):(0,c.tP)(new Uint32Array(P.indices.buffer,P.indices.byteOffset,P.indices.byteLength/4)),I=(0,c.tP)(P.positions),M=1===P.positionIndicesType?(0,c.tP)(new Uint16Array(P.positionIndices.buffer,P.positionIndices.byteOffset,P.positionIndices.byteLength/2)):(0,c.tP)(new Uint32Array(P.positionIndices.buffer,P.positionIndices.byteOffset,P.positionIndices.byteLength/4)),O={layout:e.layouts[0],interleavedVertexData:x,indices:T,hasColors:P.hasColors,hasModifications:P.hasModifications,positionData:{data:I,indices:M}};return L&&t.push(L.buffer),A&&t.push(A.buffer),t.push(x),t.push(T.buffer),t.push(I.buffer),t.push(M.buffer),{componentOffsets:A,featureIds:L,transformedGeometry:O,obb:P.obb}}function x(e){return 0===e?0:1===e?1:2===e?2:3}function T(e){var t=e.context,n=e.buffer,r=i._malloc(n.byteLength),o=n.byteLength/Float64Array.BYTES_PER_ELEMENT,u=new Float64Array(i.HEAPU8.buffer,r,o),s=new Float64Array(n);u.set(s),i.filterOBBs(t,r,o),s.set(u),i._free(r)}function I(e){i&&i.destroy(e)}function F(e,t){for(var n=0;n<t.length;++n)e[n]=t[n]}function M(){return i?Promise.resolve():(o||(o=(r||(r=new Promise((function(e){return n.e(3805).then(n.bind(n,33805)).then((function(e){return e.i})).then((function(t){var n=(0,t.default)({locateFile:p,onRuntimeInitialized:function(){return e(n)}});delete n.then}))})).catch((function(e){return Promise.reject(e)}))),r).then((function(e){i=e,o=null}))),o)}var O={transform:L,destroy:I}}}]);
//# sourceMappingURL=8302-74f86cd785d4103b1d20.js.map