{"version":3,"file":"8816-92c39aacd9dffcc25ba6.js","mappings":"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","sources":["webpack://energy-and-water-dashboard/./node_modules/@arcgis/core/views/2d/layers/features/support/whereUtils.js","webpack://energy-and-water-dashboard/./node_modules/@arcgis/core/views/2d/layers/features/support/FeatureFilter.js"],"sourcesContent":["import _asyncToGenerator from \"/Users/weslee_guarneri/Desktop/dashboard-new/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _regeneratorRuntime from \"/Users/weslee_guarneri/Desktop/dashboard-new/node_modules/@babel/runtime/regenerator/index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from \"../../../../../core/Error.js\";\nimport r from \"../../../../../core/Logger.js\";\nvar t = r.getLogger(\"esri.views.2d.layers.features.support.whereUtils\"),\n    a = {\n  getAttribute: function getAttribute(e, r) {\n    return e.field(r);\n  }\n};\n\nfunction s(_x, _x2) {\n  return _s.apply(this, arguments);\n}\n\nfunction _s() {\n  _s = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(r, s) {\n    var n, o, _r;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return import(\"../../../../../core/sql/WhereClause.js\");\n\n          case 2:\n            n = _context.sent;\n            _context.prev = 3;\n            o = n.WhereClause.create(r, s);\n\n            if (!o.isStandardized) {\n              _r = new e(\"mapview - bad input\", \"Unable to apply filter's definition expression, as expression is not standardized.\", o);\n              t.error(_r);\n            }\n\n            return _context.abrupt(\"return\", function (e) {\n              var r = e.readArcadeFeature();\n              return o.testFeature(r, a);\n            });\n\n          case 9:\n            _context.prev = 9;\n            _context.t0 = _context[\"catch\"](3);\n            return _context.abrupt(\"return\", (t.warn(\"mapview-bad-where-clause\", \"Encountered an error when evaluating where clause\", r), function (e) {\n              return !0;\n            }));\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[3, 9]]);\n  }));\n  return _s.apply(this, arguments);\n}\n\nexport { s as createWhereClause };","import _asyncToGenerator from \"/Users/weslee_guarneri/Desktop/dashboard-new/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/weslee_guarneri/Desktop/dashboard-new/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/weslee_guarneri/Desktop/dashboard-new/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _regeneratorRuntime from \"/Users/weslee_guarneri/Desktop/dashboard-new/node_modules/@babel/runtime/regenerator/index.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport t from \"../../../../../core/Error.js\";\nimport e from \"../../../../../core/Logger.js\";\nimport { isSome as i } from \"../../../../../core/maybe.js\";\nimport { create as s } from \"../../../../../geometry/support/aaBoundingRect.js\";\nimport { getBoundsXY as r } from \"../../../../../geometry/support/boundsUtils.js\";\nimport { getSpatialQueryOperator as o } from \"../../../../../layers/graphics/data/spatialQuerySupport.js\";\nimport { getTimeOperator as h } from \"../../../../../layers/graphics/data/timeSupport.js\";\nimport { normalizeQueryLike as a } from \"../../../../../layers/graphics/data/utils.js\";\nimport l from \"../../../../../rest/support/Query.js\";\nimport { featureAdapter as n } from \"../FeatureStore2D.js\";\nimport { createWhereClause as d } from \"./whereUtils.js\";\nvar m = e.getLogger(\"esri.views.2d.layers.features.controllers.FeatureFilter\"),\n    _ = 1,\n    p = 2;\n\nvar y = /*#__PURE__*/function () {\n  function y(t) {\n    _classCallCheck(this, y);\n\n    this._geometryBounds = s(), this._idToVisibility = new Map(), this._serviceInfo = t;\n  }\n\n  _createClass(y, [{\n    key: \"hash\",\n    get: function get() {\n      return this._hash;\n    }\n  }, {\n    key: \"check\",\n    value: function check(t) {\n      return this._applyFilter(t);\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      var t = this._resetAllHiddenIds();\n\n      return this.update(), {\n        show: t,\n        hide: []\n      };\n    }\n  }, {\n    key: \"invalidate\",\n    value: function invalidate() {\n      var _this = this;\n\n      this._idToVisibility.forEach(function (t, e) {\n        _this._idToVisibility.set(e, 0);\n      });\n    }\n  }, {\n    key: \"setKnownIds\",\n    value: function setKnownIds(t) {\n      var _iterator = _createForOfIteratorHelper(t),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _e = _step.value;\n\n          this._idToVisibility.set(_e, _);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }, {\n    key: \"setTrue\",\n    value: function setTrue(t) {\n      var _this2 = this;\n\n      var e = [],\n          i = [],\n          s = new Set(t);\n      return this._idToVisibility.forEach(function (t, r) {\n        var o = !!(_this2._idToVisibility.get(r) & _),\n            h = s.has(r);\n        !o && h ? e.push(r) : o && !h && i.push(r), _this2._idToVisibility.set(r, h ? _ | p : 0);\n      }), {\n        show: e,\n        hide: i\n      };\n    }\n  }, {\n    key: \"createQuery\",\n    value: function createQuery() {\n      var t = this.geometry,\n          e = this.spatialRel,\n          i = this.where,\n          s = this.timeExtent,\n          r = this.objectIds;\n      return l.fromJSON({\n        geometry: t,\n        spatialRel: e,\n        where: i,\n        timeExtent: s,\n        objectIds: r\n      });\n    }\n  }, {\n    key: \"update\",\n    value: function () {\n      var _update = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(t, e) {\n        var i;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this._hash = JSON.stringify(t);\n                _context.next = 3;\n                return a(t, null, e);\n\n              case 3:\n                i = _context.sent;\n                _context.next = 6;\n                return Promise.all([this._setGeometryFilter(i), this._setIdFilter(i), this._setAttributeFilter(i), this._setTimeFilter(i)]);\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function update(_x, _x2) {\n        return _update.apply(this, arguments);\n      }\n\n      return update;\n    }()\n  }, {\n    key: \"_setAttributeFilter\",\n    value: function () {\n      var _setAttributeFilter2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(t) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(!t || !t.where)) {\n                  _context2.next = 2;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", (this._clause = null, void (this.where = null)));\n\n              case 2:\n                _context2.next = 4;\n                return d(t.where, this._serviceInfo.fieldsIndex);\n\n              case 4:\n                this._clause = _context2.sent;\n                this.where = t.where;\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function _setAttributeFilter(_x3) {\n        return _setAttributeFilter2.apply(this, arguments);\n      }\n\n      return _setAttributeFilter;\n    }()\n  }, {\n    key: \"_setIdFilter\",\n    value: function _setIdFilter(t) {\n      this._idsToShow = t && t.objectIds && new Set(t.objectIds), this._idsToHide = t && t.hiddenIds && new Set(t.hiddenIds), this.objectIds = t && t.objectIds;\n    }\n  }, {\n    key: \"_setGeometryFilter\",\n    value: function () {\n      var _setGeometryFilter2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(t) {\n        var e, i, s;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!(!t || !t.geometry)) {\n                  _context3.next = 2;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", (this._spatialQueryOperator = null, this.geometry = null, void (this.spatialRel = null)));\n\n              case 2:\n                e = t.geometry;\n                i = t.spatialRel || \"esriSpatialRelIntersects\";\n                _context3.next = 6;\n                return o(i, e, this._serviceInfo.geometryType, this._serviceInfo.hasZ, this._serviceInfo.hasM);\n\n              case 6:\n                s = _context3.sent;\n                r(this._geometryBounds, e), this._spatialQueryOperator = s, this.geometry = e, this.spatialRel = i;\n\n              case 8:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function _setGeometryFilter(_x4) {\n        return _setGeometryFilter2.apply(this, arguments);\n      }\n\n      return _setGeometryFilter;\n    }()\n  }, {\n    key: \"_setTimeFilter\",\n    value: function _setTimeFilter(e) {\n      if (this.timeExtent = this._timeOperator = null, e && e.timeExtent) if (this._serviceInfo.timeInfo) this.timeExtent = e.timeExtent, this._timeOperator = h(this._serviceInfo.timeInfo, e.timeExtent, n);else {\n        var _i = new t(\"feature-layer-view:time-filter-not-available\", \"Unable to apply time filter, as layer doesn't have time metadata.\", e.timeExtent);\n\n        m.error(_i);\n      }\n    }\n  }, {\n    key: \"_applyFilter\",\n    value: function _applyFilter(t) {\n      return this._filterByGeometry(t) && this._filterById(t) && this._filterByTime(t) && this._filterByExpression(t);\n    }\n  }, {\n    key: \"_filterByExpression\",\n    value: function _filterByExpression(t) {\n      return !this.where || this._clause(t);\n    }\n  }, {\n    key: \"_filterById\",\n    value: function _filterById(t) {\n      return (!this._idsToHide || !this._idsToHide.size || !this._idsToHide.has(t.getObjectId())) && (!this._idsToShow || !this._idsToShow.size || this._idsToShow.has(t.getObjectId()));\n    }\n  }, {\n    key: \"_filterByGeometry\",\n    value: function _filterByGeometry(t) {\n      if (!this.geometry) return !0;\n      var e = t.readHydratedGeometry();\n      return !!e && this._spatialQueryOperator(e);\n    }\n  }, {\n    key: \"_filterByTime\",\n    value: function _filterByTime(t) {\n      return !i(this._timeOperator) || this._timeOperator(t);\n    }\n  }, {\n    key: \"_resetAllHiddenIds\",\n    value: function _resetAllHiddenIds() {\n      var _this3 = this;\n\n      var t = [];\n      return this._idToVisibility.forEach(function (e, i) {\n        e & _ || (_this3._idToVisibility.set(i, _), t.push(i));\n      }), t;\n    }\n  }]);\n\n  return y;\n}();\n\nexport { y as default };"],"names":["t","a","getAttribute","e","r","field","s","_x","_x2","_s","apply","this","arguments","_callee","n","o","_r","_context","prev","next","sent","WhereClause","create","isStandardized","error","abrupt","readArcadeFeature","testFeature","t0","warn","stop","_createForOfIteratorHelper","allowArrayLike","it","Symbol","iterator","Array","isArray","minLen","_arrayLikeToArray","Object","prototype","toString","call","slice","constructor","name","from","test","_unsupportedIterableToArray","length","i","F","done","value","_e2","f","TypeError","err","normalCompletion","didErr","step","_e3","return","arr","len","arr2","m","y","_geometryBounds","_idToVisibility","Map","_serviceInfo","_setGeometryFilter2","_setAttributeFilter2","_update","key","get","_hash","_applyFilter","_resetAllHiddenIds","update","show","hide","_this","forEach","set","_step","_iterator","_e","_this2","Set","h","has","push","_","geometry","spatialRel","where","timeExtent","objectIds","JSON","stringify","Promise","all","_setGeometryFilter","_setIdFilter","_setAttributeFilter","_setTimeFilter","_callee2","_context2","_clause","fieldsIndex","_x3","_idsToShow","_idsToHide","hiddenIds","_callee3","_context3","_spatialQueryOperator","geometryType","hasZ","hasM","_x4","_timeOperator","timeInfo","_i","_filterByGeometry","_filterById","_filterByTime","_filterByExpression","size","getObjectId","readHydratedGeometry","_this3"],"sourceRoot":""}