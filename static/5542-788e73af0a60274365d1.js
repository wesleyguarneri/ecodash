"use strict";(self.webpackChunkenergy_and_water_dashboard=self.webpackChunkenergy_and_water_dashboard||[]).push([[5542],{5542:function(e,t,r){r.r(t),r.d(t,{default:function(){return L}});var i=r(15671),n=r(43144),a=r(60136),s=r(6215),o=r(61120),l=r(83195),u=(r(75571),r(64003),r(43079),r(33682),r(97182),r(30732)),c=r(4942),f=r(11752),h=(r(199),r(64994));r(60183),r(42572),r(56947),r(3776),r(48604);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,c.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw a}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=(0,o.Z)(e);if(t){var n=(0,o.Z)(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return(0,s.Z)(this,r)}}var b=function(e){(0,a.Z)(r,e);var t=g(r);function r(){var e;return(0,i.Z)(this,r),(e=t.apply(this,arguments))._lastWidth=0,e._lastHeight=0,e.requiresDedicatedFBO=!1,e}return(0,n.Z)(r,[{key:"dispose",value:function(){this._renderTarget&&(this._renderTarget.dispose(),this._renderTarget=null)}},{key:"doRender",value:function(e){var t=this.createRenderParams(e),r=t.context,i=t.painter,n=t.profiler;this._prevFBO=r.getBoundFramebufferObject(),n.recordContainerStart(this.name);var a=this._getFbo(t),s=i.getRenderTarget();r.bindFramebuffer(a),i.setRenderTarget(a),r.setDepthWriteEnabled(!0),r.setColorMask(!0,!0,!0,!0),r.setClearColor(0,0,0,0),r.setClearDepth(1),r.clear(r.gl.COLOR_BUFFER_BIT|r.gl.DEPTH_BUFFER_BIT),r.setDepthWriteEnabled(!1);var o,l=v(this.children);try{for(l.s();!(o=l.n()).done;){o.value.beforeRender(e)}}catch(d){l.e(d)}finally{l.f()}var u,c=v(this.children);try{for(c.s();!(u=c.n()).done;){u.value.processRender(t)}}catch(d){c.e(d)}finally{c.f()}var f,h=v(this.children);try{for(h.s();!(f=h.n()).done;){f.value.afterRender(e)}}catch(d){h.e(d)}finally{h.f()}i.setRenderTarget(s),r.bindFramebuffer(this._prevFBO),i.beforeRenderLayer(t,this._clippingInfos?255:0,this.computedOpacity),r.setStencilTestEnabled(!1),r.setStencilWriteMask(0),i.blitTexture(r,a.colorTexture,9728),i.compositeLayer(t,this.computedOpacity),n.recordContainerEnd()}},{key:"createRenderParams",value:function(e){return y(y({},(0,f.Z)((0,o.Z)(r.prototype),"createRenderParams",this).call(this,e)),{},{blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:1})}},{key:"_getFbo",value:function(e){var t=e.context,r=e.painter,i=t.getViewport(),n=i.width,a=i.height;if(n!==this._lastWidth||a!==this._lastHeight)if(this._lastWidth=n,this._lastHeight=a,this._renderTarget)this._renderTarget.resize(n,a);else{var s={target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:n,height:a};this._renderTarget=new h.Z(t,{colorTarget:0,depthStencilTarget:3},s,r.getSharedStencilBuffer())}return this._renderTarget}}]),r}(r(18995).Z),w=r(17396),_=r(20410),V=r(24978),m=r(89636);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=(0,o.Z)(e);if(t){var n=(0,o.Z)(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return(0,s.Z)(this,r)}}var k=function(e){(0,a.Z)(r,e);var t=O(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).type="group",n.layerViews=new _.Z,n}return(0,n.Z)(r,[{key:"initialize",value:function(){var e=this;this.handles.add([this.layerViews.on("change",(function(t){return e._layerViewsChangeHandler(t)})),this.layerViews.on("after-changes",(function(){return e._layerViewsAfterChangesHandler()})),this.layer.watch("visibilityMode",(function(){return e._visibilityModeHandler()}),!0),this.watch("visible",(function(){return e._visibleHandler()}),!0)],"grouplayerview"),this._layerViewsChangeHandler({target:null,added:this.layerViews.toArray(),removed:[],moved:[]}),this._layerViewsAfterChangesHandler()}},{key:"layerViews",set:function(e){this._set("layerViews",(0,V.Z)(e,this._get("layerViews")))}},{key:"isUpdating",value:function(){return this.layerViews.some((function(e){return e.updating}))}},{key:"updatingProgress",get:function(){return 0===this.layerViews.length?1:this.layerViews.reduce((function(e,t){return e+t.updatingProgress}),0)/this.layerViews.length}},{key:"_hasLayerViewVisibleOverrides",value:function(){return this.layerViews.some((function(e){return e._isOverridden("visible")}))}},{key:"_findLayerViewForLayer",value:function(e){return e&&this.layerViews.find((function(t){return t.layer===e}))}},{key:"_firstVisibleOnLayerOrder",value:function(){var e=this,t=this.layer.layers.find((function(t){var r=e._findLayerViewForLayer(t);return r&&r.visible}));return t&&this._findLayerViewForLayer(t)}},{key:"_enforceExclusiveVisibility",value:function(e){this._hasLayerViewVisibleOverrides()&&(e||!(e=this._firstVisibleOnLayerOrder())&&this.layerViews.length>0&&(e=this._findLayerViewForLayer(this.layer.layers.getItemAt(0))),this.layerViews.forEach((function(t){t.visible=t===e})))}},{key:"_layerViewsChangeHandler",value:function(e){var t=this;this.handles.remove("grouplayerview:visible"),this.handles.add(this.layerViews.map((function(e){return e.watch("visible",(function(r){return t._layerViewVisibleHandler(r,e)}),!0)})).toArray(),"grouplayerview:visible");var r=e.added[e.added.length-1],i=null;r&&r.visible&&(i=r),this._enforceVisibility(i)}},{key:"_layerViewsAfterChangesHandler",value:function(){var e=this;this.handles.remove("grouplayerview:updating"),this.handles.add(this.layerViews.map((function(t){return t.watch("updating",(function(){return e._updateUpdating()}),!0)})).toArray(),"grouplayerview:updating"),this._updateUpdating()}},{key:"_enforceVisibility",value:function(e){if(this._hasLayerViewVisibleOverrides())switch(this.layer.visibilityMode){case"inherited":var t=this.visible;this.layerViews.forEach((function(e){e.visible=t}));break;case"exclusive":this._enforceExclusiveVisibility(e)}}},{key:"_visibilityModeHandler",value:function(){this._enforceVisibility()}},{key:"_layerViewVisibleHandler",value:function(e,t){if(this._hasLayerViewVisibleOverrides())switch(this.layer.visibilityMode){case"inherited":e!==this.visible&&(t.visible=this.visible);break;case"exclusive":this._enforceExclusiveVisibility(e&&t)}}},{key:"_visibleHandler",value:function(){var e;this._hasLayerViewVisibleOverrides()&&"inherited"===(null==(e=this.layer)?void 0:e.visibilityMode)&&this._enforceVisibility()}},{key:"_updateUpdating",value:function(){this.notifyChange("updating")}}]),r}(r(43798).Z);(0,l._)([(0,m.Cb)({cast:V.R})],k.prototype,"layerViews",null),(0,l._)([(0,m.Cb)()],k.prototype,"view",void 0),(0,l._)([(0,m.Cb)({readOnly:!0})],k.prototype,"updatingProgress",null);var R=k=(0,l._)([(0,u.j)("esri.views.layers.GroupLayerView")],k);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=(0,o.Z)(e);if(t){var n=(0,o.Z)(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return(0,s.Z)(this,r)}}var Z=function(e){(0,a.Z)(r,e);var t=C(r);function r(){var e;return(0,i.Z)(this,r),(e=t.apply(this,arguments)).container=new b,e}return(0,n.Z)(r,[{key:"attach",value:function(){var e=this;this._updateStageChildren(),this.handles.add(this.layerViews.on("after-changes",(function(){return e._updateStageChildren()})),"grouplayerview2d")}},{key:"detach",value:function(){this.handles.remove("grouplayerview2d"),this.container.removeAllChildren()}},{key:"update",value:function(e){}},{key:"moveStart",value:function(){}},{key:"viewChange",value:function(){}},{key:"moveEnd",value:function(){}},{key:"_updateStageChildren",value:function(){var e=this;this.container.removeAllChildren(),this.layerViews.forEach((function(t,r){return e.container.addChildAt(t.container,r)}))}}]),r}((0,w.y)(R)),L=Z=(0,l._)([(0,u.j)("esri.views.2d.layers.GroupLayerView2D")],Z)}}]);
//# sourceMappingURL=5542-788e73af0a60274365d1.js.map