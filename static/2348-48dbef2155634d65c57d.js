"use strict";(self.webpackChunkenergy_and_water_dashboard=self.webpackChunkenergy_and_water_dashboard||[]).push([[2348],{2348:function(e,t,r){r.r(t),r.d(t,{default:function(){return Ve}});var n=r(15861),a=r(15671),i=r(43144),l=r(87757),o=r.n(l),s=r(37566),u=r(10173),f=r(7883);function h(e){return 746===e||747===e||!(e<4352)&&(e>=12704&&e<=12735||e>=12544&&e<=12591||e>=65072&&e<=65103&&!(e>=65097&&e<=65103)||e>=63744&&e<=64255||e>=13056&&e<=13311||e>=11904&&e<=12031||e>=12736&&e<=12783||e>=12288&&e<=12351&&!(e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||e>=13312&&e<=19903||e>=19968&&e<=40959||e>=12800&&e<=13055||e>=12592&&e<=12687||e>=43360&&e<=43391||e>=55216&&e<=55295||e>=4352&&e<=4607||e>=44032&&e<=55215||e>=12352&&e<=12447||e>=12272&&e<=12287||e>=12688&&e<=12703||e>=12032&&e<=12255||e>=12784&&e<=12799||e>=12448&&e<=12543&&12540!==e||e>=65280&&e<=65519&&!(65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||e>=65104&&e<=65135&&!(e>=65112&&e<=65118||e>=65123&&e<=65126)||e>=5120&&e<=5759||e>=6320&&e<=6399||e>=65040&&e<=65055||e>=19904&&e<=19967||e>=40960&&e<=42127||e>=42128&&e<=42191)}function c(e){return!(e<11904)&&(e>=12704&&e<=12735||e>=12544&&e<=12591||e>=65072&&e<=65103||e>=63744&&e<=64255||e>=13056&&e<=13311||e>=11904&&e<=12031||e>=12736&&e<=12783||e>=12288&&e<=12351||e>=13312&&e<=19903||e>=19968&&e<=40959||e>=12800&&e<=13055||e>=65280&&e<=65519||e>=12352&&e<=12447||e>=12272&&e<=12287||e>=12032&&e<=12255||e>=12784&&e<=12799||e>=12448&&e<=12543||e>=65040&&e<=65055||e>=42128&&e<=42191||e>=40960&&e<=42127)}function y(e){switch(e){case 10:case 32:case 38:case 40:case 41:case 43:case 45:case 47:case 173:case 183:case 8203:case 8208:case 8211:case 8231:return!0}return!1}function d(e){switch(e){case 9:case 10:case 11:case 12:case 13:case 32:return!0}return!1}var v=r(90415);function p(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){o=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(o)throw i}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var x=24,m=function(){function e(t,r,n,i,l,o,s){(0,a.Z)(this,e),this._glyphItems=t,this._maxWidth=r,this._lineHeight=n,this._letterSpacing=i,this._hAnchor=l,this._vAnchor=o,this._justify=s}return(0,i.Z)(e,[{key:"getShaping",value:function(e,t,r){for(var n=this._letterSpacing,a=this._lineHeight,i=this._justify,l=this._maxWidth,o=[],s=0,u=0,f=e.length,v=0;v<f;v++){var g,x=e.charCodeAt(v),m=r&&h(x),_=void 0,I=p(this._glyphItems);try{for(I.s();!(g=I.n()).done;){if(_=g.value[x])break}}catch(q){I.e(q)}finally{I.f()}o.push({codePoint:x,x:s,y:u,vertical:m,glyphMosaicItem:_}),_&&(s+=_.metrics.advance+n)}var b=s;l>0&&(b=s/Math.max(1,Math.ceil(s/l)));for(var k=e.indexOf("â€‹")>=0,w=[],M=0;M<f-1;M++){var A=o[M].codePoint,P=c(A);if(y(A)||P){var B=0;if(10===A)B-=1e4;else if(P&&k)B+=150;else{40!==A&&65288!==A||(B+=50);var D=o[M+1].codePoint;41!==D&&65289!==D||(B+=50)}w.push(this._buildBreak(M+1,o[M].x,b,w,B,!1))}}for(var S=this._optimalBreaks(this._buildBreak(f,s,b,w,0,!0)),V=0,Z=t?-a:a,L=0,T=0;T<S.length;T++){for(var E=S[T],C=L;C<E&&d(o[C].codePoint);)o[C].glyphMosaicItem=null,++C;for(var R=E-1;R>C&&d(o[R].codePoint);)o[R].glyphMosaicItem=null,--R;if(C<=R){for(var z=o[C].x,U=C;U<=R;U++)o[U].x-=z,o[U].y=u;var F=o[R].x;o[R].glyphMosaicItem&&(F+=o[R].glyphMosaicItem.metrics.advance),V=Math.max(F,V),i&&this._applyJustification(o,C,R)}L=E,u+=Z}if(o.length>0){var O=S.length-1,N=(i-this._hAnchor)*V,j=(-this._vAnchor*(O+1)+.5)*a;t&&O&&(j+=O*a);var G,K=p(o);try{for(K.s();!(G=K.n()).done;){var H=G.value;H.x+=N,H.y+=j}}catch(q){K.e(q)}finally{K.f()}}return o.filter((function(e){return e.glyphMosaicItem}))}},{key:"_breakScore",value:function(e,t,r,n){var a=(e-t)*(e-t);return n?e<t?a/2:2*a:a+Math.abs(r)*r}},{key:"_buildBreak",value:function(e,t,r,n,a,i){var l,o=null,s=this._breakScore(t,r,a,i),u=p(n);try{for(u.s();!(l=u.n()).done;){var f=l.value,h=t-f.x,c=this._breakScore(h,r,a,i)+f.score;c<=s&&(o=f,s=c)}}catch(y){u.e(y)}finally{u.f()}return{index:e,x:t,score:s,previousBreak:o}}},{key:"_optimalBreaks",value:function(e){return e?this._optimalBreaks(e.previousBreak).concat(e.index):[]}},{key:"_applyJustification",value:function(e,t,r){for(var n=e[r],a=n.vertical?x:n.glyphMosaicItem?n.glyphMosaicItem.metrics.advance:0,i=(n.x+a)*this._justify,l=t;l<=r;l++)e[l].x-=i}}],[{key:"getTextBox",value:function(e,t){if(!e.length)return null;var r,n=1/0,a=1/0,i=0,l=0,o=p(e);try{for(o.s();!(r=o.n()).done;){var s=r.value,u=s.glyphMosaicItem.metrics.advance,f=s.x,h=s.y-17,c=f+u,y=h+t;n=Math.min(n,f),i=Math.max(i,c),a=Math.min(a,h),l=Math.max(l,y)}}catch(d){o.e(d)}finally{o.f()}return{x:n,y:a,width:i-n,height:l-a}}},{key:"getBox",value:function(e){if(!e.length)return null;var t,r=1/0,n=1/0,a=0,i=0,l=p(e);try{for(l.s();!(t=l.n()).done;){var o=t.value,s=o.glyphMosaicItem.metrics,u=s.height,f=s.left,h=s.top,c=s.width,y=o.x,d=o.y-(u-Math.abs(h)),v=y+c+f,g=d+u;r=Math.min(r,y),a=Math.max(a,v),n=Math.min(n,d),i=Math.max(i,g)}}catch(x){l.e(x)}finally{l.f()}return{x:r,y:n,width:a-r,height:i-n}}},{key:"addDecoration",value:function(e,t){var r=e.length;if(0!==r){for(var n=e[0].x+e[0].glyphMosaicItem.metrics.left,a=e[0].y,i=1;i<r;i++){var l=e[i];if(l.y!==a){var o=e[i-1].x+e[i-1].glyphMosaicItem.metrics.left+e[i-1].glyphMosaicItem.metrics.width;e.push({codePoint:0,x:n,y:a+t-3,vertical:!1,glyphMosaicItem:{sdf:!0,rect:new v.Z(4,0,4,8),metrics:{width:o-n,height:8,left:0,top:0,advance:0},page:0,code:0}}),a=l.y,n=l.x+l.glyphMosaicItem.metrics.left}}var s=e[r-1].x+e[r-1].glyphMosaicItem.metrics.left+e[r-1].glyphMosaicItem.metrics.width;e.push({codePoint:0,x:n,y:a+t-3,vertical:!1,glyphMosaicItem:{sdf:!0,rect:new v.Z(4,0,4,8),metrics:{width:s-n,height:8,left:0,top:0,advance:0},page:0,code:0}})}}}]),e}(),_=r(64312),I=r(69705);function b(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){o=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(o)throw i}}}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var w=.5,M=(0,i.Z)((function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w;(0,a.Z)(this,e),this.x=t,this.y=r,this.angle=n,this.segment=i,this.minzoom=l})),A=(0,i.Z)((function e(t,r,n,i,l){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:w,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:f.B1;(0,a.Z)(this,e),this.anchor=t,this.labelAngle=r,this.glyphAngle=n,this.page=i,this.alternateVerticalGlyph=l,this.minzoom=o,this.maxzoom=s})),P=(0,i.Z)((function e(t,r,n,i,l,o,s,u,f,h,c,y){(0,a.Z)(this,e),this.tl=t,this.tr=r,this.bl=n,this.br=i,this.mosaicRect=l,this.labelAngle=o,this.minAngle=s,this.maxAngle=u,this.anchor=f,this.minzoom=h,this.maxzoom=c,this.page=y})),B=(0,i.Z)((function e(t){(0,a.Z)(this,e),this.shapes=t})),D=function(){function e(){(0,a.Z)(this,e)}return(0,i.Z)(e,[{key:"getIconPlacement",value:function(e,t,r){var n=new I.E(e.x,e.y),a=0===r.rotationAlignment,i=r.keepUpright,l=r.rotate*f.DT;a&&(l+=e.angle);var o=new B([]);return r.allowOverlap&&r.ignorePlacement||!_.Bf||(o.iconColliders=[]),this._addIconPlacement(o,n,t,r,l),a&&i&&this._addIconPlacement(o,n,t,r,l+f.JJ),o}},{key:"_addIconPlacement",value:function(e,t,r,n,a){var i=r.pixelRatio,l=r.width/i,o=r.height/i,s=n.offset,u=s[0],h=s[1];switch(n.anchor){case 0:u-=l/2,h-=o/2;break;case 1:h-=o/2;break;case 2:u-=l,h-=o/2;break;case 3:u-=l/2;break;case 4:u-=l/2,h-=o;break;case 5:break;case 7:h-=o;break;case 6:u-=l;break;case 8:u-=l,h-=o}var c=r.rect,y=2/i,d=u-y,v=h-y,p=d+c.width/i,g=v+c.height/i,x=new I.E(d,v),m=new I.E(p,g),b=new I.E(d,g),k=new I.E(p,v);if(0!==a){var M=Math.cos(a),A=Math.sin(a);x.rotate(M,A),m.rotate(M,A),b.rotate(M,A),k.rotate(M,A)}var B=new P(x,k,b,m,c,a,0,256,t,w,f.B1,0);if(e.shapes.push(B),(!n.allowOverlap||!n.ignorePlacement)&&_.Bf){var D=n.size,S=n.padding,V={xTile:t.x,yTile:t.y,dxPixels:u*D-S,dyPixels:h*D-S,hard:!n.optional,partIndex:0,width:l*D+2*S,height:o*D+2*S,angle:a,minLod:w,maxLod:f.B1};e.iconColliders.push(V)}}},{key:"getTextPlacement",value:function(e,t,r,n){var a,i=new I.E(e.x,e.y),l=n.rotate*f.DT,o=0===n.rotationAlignment,s=n.keepUpright,u=n.padding,h=w,c=o?e.angle:0,y=e.segment>=0&&o,d=n.allowOverlap&&n.ignorePlacement?null:[],v=[],p=!y,g=Number.POSITIVE_INFINITY,_=Number.NEGATIVE_INFINITY,k=g,M=_,D=(y||o)&&s,S=n.size/x,V=!1,Z=b(t);try{for(Z.s();!(a=Z.n()).done;){if(a.value.vertical){V=!0;break}}}catch(Te){Z.e(Te)}finally{Z.f()}var L,T=0,E=0;if(!y&&V){var C=m.getTextBox(t,n.lineHeight*x);switch(n.anchor){case 1:T=C.height/2,E=-C.width/2;break;case 2:T=-C.height/2,E=C.width/2;break;case 3:T=C.height/2,E=C.width/2;break;case 4:T=-C.height/2,E=-C.width/2;break;case 5:T=C.height;break;case 7:E=-C.width;break;case 6:E=C.width;break;case 8:T=-C.height}}T+=n.offset[0]*x,E+=n.offset[1]*x;var R,z=b(t);try{for(z.s();!(R=z.n()).done;){var U=R.value,F=U.glyphMosaicItem;if(F&&!F.rect.isEmpty){var O=F.rect,N=F.metrics,j=F.page;if(d&&p){if(void 0!==L&&L!==U.y){var G=void 0,K=void 0,H=void 0,q=void 0;V?(G=-M+T,K=g+E,H=M-k,q=_-g):(G=g+T,K=k+E,H=_-g,q=M-k);var W={xTile:e.x,yTile:e.y,dxPixels:G*S-u,dyPixels:K*S-u,hard:!n.optional,partIndex:1,width:H*S+2*u,height:q*S+2*u,angle:l,minLod:w,maxLod:f.B1};d.push(W),g=Number.POSITIVE_INFINITY,_=Number.NEGATIVE_INFINITY,k=g,M=_}L=U.y}var J=[];if(y){var $=.5*F.metrics.width,Y=(U.x+N.left-4+$)*S*8;if(h=this._placeGlyph(e,h,Y,r,e.segment,1,U.vertical,j,J),s&&(h=this._placeGlyph(e,h,Y,r,e.segment,-1,U.vertical,j,J)),h>=2)break}else J.push(new A(i,c,c,j,!1)),o&&s&&J.push(new A(i,c+f.JJ,c+f.JJ,j,!1));var X=U.x+N.left,Q=U.y-17-N.top,ee=X+N.width,te=Q+N.height,re=void 0,ne=void 0,ae=void 0,ie=void 0,le=void 0,oe=void 0,se=void 0,ue=void 0;if(!y&&V)if(U.vertical){var fe=(X+ee)/2-N.height/2,he=(Q+te)/2+N.width/2;re=new I.E(-he-4+T,fe-4+E),ne=new I.E(re.x+O.width,re.y+O.height),ae=new I.E(re.x,ne.y),ie=new I.E(ne.x,re.y)}else re=new I.E(4-Q+T,X-4+E),ne=new I.E(re.x-O.height,re.y+O.width),ae=new I.E(ne.x,re.y),ie=new I.E(re.x,ne.y);else re=new I.E(X-4+T,Q-4+E),ne=new I.E(re.x+O.width,re.y+O.height),ae=new I.E(re.x,ne.y),ie=new I.E(ne.x,re.y);for(var ce=0,ye=J;ce<ye.length;ce++){var de=ye[ce],ve=void 0,pe=void 0,ge=void 0,xe=void 0;if(de.alternateVerticalGlyph){if(!le){var me=(Q+te)/2+E;le=new I.E((X+ee)/2+T-N.height/2-4,me+N.width/2+4),oe=new I.E(le.x+O.height,le.y-O.width),se=new I.E(oe.x,le.y),ue=new I.E(le.x,oe.y)}ve=le,pe=se,ge=ue,xe=oe}else ve=re,pe=ae,ge=ie,xe=ne;var _e=Q,Ie=te,be=de.glyphAngle+l;if(0!==be){var ke=Math.cos(be),we=Math.sin(be);ve=ve.clone(),pe=pe.clone(),ge=ge.clone(),xe=xe.clone(),ve.rotate(ke,we),xe.rotate(ke,we),pe.rotate(ke,we),ge.rotate(ke,we)}var Me=0,Ae=256;if(y&&V?U.vertical?de.alternateVerticalGlyph?(Me=32,Ae=96):(Me=224,Ae=32):(Me=224,Ae=96):(Me=192,Ae=64),v.push(new P(ve,ge,pe,xe,O,de.labelAngle,Me,Ae,de.anchor,de.minzoom,de.maxzoom,de.page)),d&&(!D||this._legible(de.labelAngle)))if(p)X<g&&(g=X),_e<k&&(k=_e),ee>_&&(_=ee),Ie>M&&(M=Ie);else if(de.minzoom<2){var Pe={xTile:e.x,yTile:e.y,dxPixels:(X+T)*S-u,dyPixels:(_e+T)*S-u,hard:!n.optional,partIndex:1,width:(ee-X)*S+2*u,height:(Ie-_e)*S+2*u,angle:be,minLod:de.minzoom,maxLod:de.maxzoom};d.push(Pe)}}}}}catch(Te){z.e(Te)}finally{z.f()}if(h>=2)return null;if(d&&p){var Be,De,Se,Ve;V?(Be=-M+T,De=g+E,Se=M-k,Ve=_-g):(Be=g+T,De=k+E,Se=_-g,Ve=M-k);var Ze={xTile:e.x,yTile:e.y,dxPixels:Be*S-u,dyPixels:De*S-u,hard:!n.optional,partIndex:1,width:Se*S+2*u,height:Ve*S+2*u,angle:l,minLod:w,maxLod:f.B1};d.push(Ze)}var Le=new B(v);return d&&d.length>0&&(Le.textColliders=d),Le}},{key:"_legible",value:function(e){var t=(0,f.Or)(e);return t<65||t>=193}},{key:"_placeGlyph",value:function(e,t,r,n,a,i,l,o,s){var u=i,h=u<0?(0,f.DQ)(e.angle+f.JJ,f._U):e.angle,c=0;r<0&&(u*=-1,r*=-1,c=f.JJ),u>0&&++a;var y=new I.E(e.x,e.y),d=n[a],v=f.B1;if(n.length<=a)return v;for(;;){var p=d.x-y.x,g=d.y-y.y,x=Math.sqrt(p*p+g*g),m=Math.max(r/x,t),_=p/x,b=g/x,k=(0,f.DQ)(Math.atan2(b,_)+c,f._U);if(s.push(new A(y,h,k,o,!1,m,v)),l&&s.push(new A(y,h,k,o,!0,m,v)),m<=t)return m;y=d.clone();do{if(a+=u,n.length<=a||a<0)return m;d=n[a]}while(y.isEqual(d));var w=d.x-y.x,M=d.y-y.y,P=Math.sqrt(w*w+M*M);w*=x/P,M*=x/P,y.x-=w,y.y-=M,v=m}}}]),e}(),S=r(93433),V=r(29439),Z=r(87980),L=r(26171),T=function(){function e(t,r){(0,a.Z)(this,e),this.values={};for(var n=r.keys,i=r.values;t.next();)switch(t.tag()){case 1:this.id=t.getUInt64();break;case 2:for(var l=t.getMessage(),o=this.values;!l.empty();){var s=l.getUInt32(),u=l.getUInt32();o[n[s]]=i[u]}l.release();break;case 3:this.type=t.getUInt32();break;case 4:this._pbfGeometry=t.getMessage();break;default:t.skip()}}return(0,i.Z)(e,[{key:"getGeometry",value:function(e){if(void 0!==this._geometry)return this._geometry;if(!this._pbfGeometry)return null;var t,r,n=this._pbfGeometry;this._pbfGeometry=null,e?e.reset(this.type):t=[];for(var a,i=1,l=0,o=0,s=0;!n.empty();){if(0===l){var u=n.getUInt32();i=7&u,l=u>>3}switch(l--,i){case 1:o+=n.getSInt32(),s+=n.getSInt32(),e?e.moveTo(o,s):(r&&t.push(r),(r=[]).push(new I.E(o,s)));break;case 2:o+=n.getSInt32(),s+=n.getSInt32(),e?e.lineTo(o,s):r.push(new I.E(o,s));break;case 7:e?e.close():r&&!r[0].equals(o,s)&&r.push(r[0].clone());break;default:throw n.release(),new Error("Invalid path operation")}}return e?a=e.result():(r&&t.push(r),a=t),n.release(),this._geometry=a,a}}]),e}(),E=r(60136),C=r(6215),R=r(61120),z=r(20378);function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(h){return!1}}();return function(){var r,n=(0,R.Z)(e);if(t){var a=(0,R.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,C.Z)(this,r)}}var F=function(e){(0,E.Z)(r,e);var t=U(r);function r(){return(0,a.Z)(this,r),t.call(this,12)}return(0,i.Z)(r,[{key:"add",value:function(e,t,r){var n=this.array;n.push(e),n.push(t),n.push(r)}}]),r}(z.Z),O=(z.Z,function(){function e(t){for((0,a.Z)(this,e),this.extent=4096,this.keys=[],this.values=[],this._pbfLayer=t.clone();t.next();)switch(t.tag()){case 1:this.name=t.getString();break;case 3:this.keys.push(t.getString());break;case 4:this.values.push(t.processMessage(e._parseValue));break;case 5:this.extent=t.getUInt32();break;default:t.skip()}}return(0,i.Z)(e,[{key:"getData",value:function(){return this._pbfLayer}}],[{key:"_parseValue",value:function(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getInt64();case 5:return e.getUInt64();case 6:return e.getSInt64();case 7:return e.getBool();default:e.skip()}return null}}]),e}());function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(h){return!1}}();return function(){var r,n=(0,R.Z)(e);if(t){var a=(0,R.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,C.Z)(this,r)}}var j=function(e){(0,E.Z)(r,e);var t=N(r);function r(e){return(0,a.Z)(this,r),t.call(this,e)}return(0,i.Z)(r,[{key:"add",value:function(e,t,r,n,a,i,l,o,s,u,f,h){var c=this.array,y=z.Z.i1616to32(e,t);c.push(y);var d=31;y=z.Z.i8888to32(Math.round(d*r),Math.round(d*n),Math.round(d*a),Math.round(d*i)),c.push(y),y=z.Z.i8888to32(Math.round(d*l),Math.round(d*o),Math.round(d*s),Math.round(d*u)),c.push(y),y=z.Z.i1616to32(f,0),c.push(y),h&&c.push.apply(c,(0,S.Z)(h))}}]),r}(z.Z),G=function(e){(0,E.Z)(r,e);var t=N(r);function r(e){return(0,a.Z)(this,r),t.call(this,e)}return(0,i.Z)(r,[{key:"add",value:function(e,t,r){var n=this.array;n.push(z.Z.i1616to32(e,t)),r&&n.push.apply(n,(0,S.Z)(r))}}]),r}(z.Z),K=function(e){(0,E.Z)(r,e);var t=N(r);function r(e){return(0,a.Z)(this,r),t.call(this,e)}return(0,i.Z)(r,[{key:"add",value:function(e,t,r,n,a,i,l){var o=this.array,s=this.index,u=z.Z.i1616to32(e,t);o.push(u);return u=z.Z.i8888to32(Math.round(15*r),Math.round(15*n),a,i),o.push(u),l&&o.push.apply(o,(0,S.Z)(l)),s}}]),r}(z.Z),H=function(e){(0,E.Z)(r,e);var t=N(r);function r(e){return(0,a.Z)(this,r),t.call(this,e)}return(0,i.Z)(r,[{key:"add",value:function(e,t,r,n,a,i,l,o,s,u,h,c){var y=this.array,d=z.Z.i1616to32(e,t);y.push(d),d=z.Z.i1616to32(Math.round(8*r),Math.round(8*n)),y.push(d),d=z.Z.i8888to32(a/4,i/4,o,s),y.push(d),d=z.Z.i8888to32(0,(0,f.Or)(l),10*u,Math.min(10*h,255)),y.push(d),c&&y.push.apply(y,(0,S.Z)(c))}}]),r}(z.Z),q=function(e){(0,E.Z)(r,e);var t=N(r);function r(e){return(0,a.Z)(this,r),t.call(this,e)}return(0,i.Z)(r,[{key:"add",value:function(e,t,r,n,a){var i=this.array,l=z.Z.i1616to32(2*e+r,2*t+n);i.push(l),a&&i.push.apply(i,(0,S.Z)(a))}}]),r}(z.Z),W=function(){function e(t,r,n){(0,a.Z)(this,e),this.layerExtent=4096,this._features=[],this.layer=t,this.zoom=r,this._spriteInfo=n,this._filter=t.getFeatureFilter()}return(0,i.Z)(e,[{key:"pushFeature",value:function(e){this._filter&&!this._filter.filter(e,this.zoom)||this._features.push(e)}},{key:"hasFeatures",value:function(){return this._features.length>0}},{key:"getResources",value:function(e,t,r){}}]),e}();function J(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return $(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){o=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(o)throw i}}}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(h){return!1}}();return function(){var r,n=(0,R.Z)(e);if(t){var a=(0,R.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,C.Z)(this,r)}}var X=function(e){(0,E.Z)(r,e);var t=Y(r);function r(e,n,i,l,o){var s;return(0,a.Z)(this,r),(s=t.call(this,e,n,i)).type=4,s._circleVertexBuffer=l,s._circleIndexBuffer=o,s}return(0,i.Z)(r,[{key:"circleIndexStart",get:function(){return this._circleIndexStart}},{key:"circleIndexCount",get:function(){return this._circleIndexCount}},{key:"processFeatures",value:function(e){var t=this._circleVertexBuffer,r=this._circleIndexBuffer;this._circleIndexStart=3*r.index,this._circleIndexCount=0;var n=this.layer,a=this.zoom;e&&e.setExtent(this.layerExtent);var i,l=J(this._features);try{for(l.s();!(i=l.n()).done;){var o=i.value,s=o.getGeometry(e);if(s){var u,f=n.circleMaterial.encodeAttributes(o,a,n),h=J(s);try{for(h.s();!(u=h.n()).done;){var c=u.value;if(c){var y,d=J(c);try{for(d.s();!(y=d.n()).done;){var v=y.value,p=t.index;t.add(v.x,v.y,0,0,f),t.add(v.x,v.y,0,1,f),t.add(v.x,v.y,1,0,f),t.add(v.x,v.y,1,1,f),r.add(p+0,p+1,p+2),r.add(p+1,p+2,p+3),this._circleIndexCount+=6}}catch(g){d.e(g)}finally{d.f()}}}}catch(g){h.e(g)}finally{h.f()}}}}catch(g){l.e(g)}finally{l.f()}}},{key:"serialize",value:function(){var e=6;e+=this.layerUIDs.length,e+=this._circleVertexBuffer.array.length,e+=this._circleIndexBuffer.array.length;var t=new Uint32Array(e),r=new Int32Array(t.buffer),n=0;t[n++]=this.type,t[n++]=this.layerUIDs.length;for(var a=0;a<this.layerUIDs.length;a++)t[n++]=this.layerUIDs[a];t[n++]=this._circleIndexStart,t[n++]=this._circleIndexCount,t[n++]=this._circleVertexBuffer.array.length;for(var i=0;i<this._circleVertexBuffer.array.length;i++)r[n++]=this._circleVertexBuffer.array[i];t[n++]=this._circleIndexBuffer.array.length;for(var l=0;l<this._circleIndexBuffer.array.length;l++)t[n++]=this._circleIndexBuffer.array[l];return t.buffer}}]),r}(W),Q=r(61744),ee=r(81820);function te(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return re(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){o=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(o)throw i}}}}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(h){return!1}}();return function(){var r,n=(0,R.Z)(e);if(t){var a=(0,R.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,C.Z)(this,r)}}var ae=function(e){(0,E.Z)(r,e);var t=ne(r);function r(e,n,i,l,o,s,u){var f;return(0,a.Z)(this,r),(f=t.call(this,e,n,i)).type=1,f._patternMap=new Map,f._fillVertexBuffer=l,f._fillIndexBuffer=o,f._outlineVertexBuffer=s,f._outlineIndexBuffer=u,f}return(0,i.Z)(r,[{key:"fillIndexStart",get:function(){return this._fillIndexStart}},{key:"fillIndexCount",get:function(){return this._fillIndexCount}},{key:"outlineIndexStart",get:function(){return this._outlineIndexStart}},{key:"outlineIndexCount",get:function(){return this._outlineIndexCount}},{key:"getResources",value:function(e,t,r){var n=this.layer,a=this.zoom,i=n.getPaintProperty("fill-pattern");if(i)if(i.isDataDriven){var l,o=te(this._features);try{for(o.s();!(l=o.n()).done;){var s=l.value;t(i.getValue(a,s),!0)}}catch(u){o.e(u)}finally{o.f()}}else t(i.getValue(a),!0)}},{key:"processFeatures",value:function(e){this._fillIndexStart=3*this._fillIndexBuffer.index,this._fillIndexCount=0,this._outlineIndexStart=3*this._outlineIndexBuffer.index,this._outlineIndexCount=0;var t=this.layer,r=this.zoom,n=t.fillMaterial,a=t.outlineMaterial,i=t.hasDataDrivenFill,l=t.hasDataDrivenOutline;e&&e.setExtent(this.layerExtent);var o=t.getPaintProperty("fill-pattern"),s=null==o?void 0:o.isDataDriven,u=!o&&t.getPaintValue("fill-antialias",r);if(t.outlineUsesFillColor){if(u&&!t.hasDataDrivenOpacity){var f=t.getPaintValue("fill-opacity",r),h=t.getPaintValue("fill-opacity",r+1);f<1&&h<1&&(u=!1)}if(u&&!t.hasDataDrivenColor){var c=t.getPaintValue("fill-color",r),y=t.getPaintValue("fill-color",r+1);c[3]<1&&y[3]<1&&(u=!1)}}var d=this._features,v=null==e?void 0:e.validateTessellation;if(s){var p,g=[],x=te(d);try{for(x.s();!(p=x.n()).done;){var m=p.value,_=o.getValue(r,m),I=this._spriteInfo[_];if(I&&I.rect){var b=n.encodeAttributes(m,r,t,I),k=u&&l?a.encodeAttributes(m,r,t):[],w=m.getGeometry(e);g.push({ddFillAttributes:b,ddOutlineAttributes:k,page:I.page,geometry:w}),g.sort((function(e,t){return e.page-t.page}));var M,A=te(g);try{for(A.s();!(M=A.n()).done;){var P=M.value,B=P.ddFillAttributes,D=P.ddOutlineAttributes,S=P.page,V=P.geometry;this._processFeature(V,u,t.outlineUsesFillColor,B,D,v,S)}}catch(z){A.e(z)}finally{A.f()}}}}catch(z){x.e(z)}finally{x.f()}}else{var Z,L=te(d);try{for(L.s();!(Z=L.n()).done;){var T=Z.value,E=i?n.encodeAttributes(T,r,t):null,C=u&&l?a.encodeAttributes(T,r,t):null,R=T.getGeometry(e);this._processFeature(R,u,t.outlineUsesFillColor,E,C,v)}}catch(z){L.e(z)}finally{L.f()}}}},{key:"serialize",value:function(){var e=10;e+=this.layerUIDs.length,e+=this._fillVertexBuffer.array.length,e+=this._fillIndexBuffer.array.length,e+=this._outlineVertexBuffer.array.length,e+=this._outlineIndexBuffer.array.length,e+=3*this._patternMap.size+1;var t=new Uint32Array(e),r=new Int32Array(t.buffer),n=0;t[n++]=this.type,t[n++]=this.layerUIDs.length;for(var a=0;a<this.layerUIDs.length;a++)t[n++]=this.layerUIDs[a];t[n++]=this._fillIndexStart,t[n++]=this._fillIndexCount,t[n++]=this._outlineIndexStart,t[n++]=this._outlineIndexCount;var i=this._patternMap,l=i.size;if(t[n++]=l,l>0){var o,s=te(i);try{for(s.s();!(o=s.n()).done;){var u=(0,V.Z)(o.value,2),f=u[0],h=(0,V.Z)(u[1],2),c=h[0],y=h[1];t[n++]=f,t[n++]=c,t[n++]=y}}catch(x){s.e(x)}finally{s.f()}}t[n++]=this._fillVertexBuffer.array.length;for(var d=0;d<this._fillVertexBuffer.array.length;d++)r[n++]=this._fillVertexBuffer.array[d];t[n++]=this._fillIndexBuffer.array.length;for(var v=0;v<this._fillIndexBuffer.array.length;v++)t[n++]=this._fillIndexBuffer.array[v];t[n++]=this._outlineVertexBuffer.array.length;for(var p=0;p<this._outlineVertexBuffer.array.length;p++)r[n++]=this._outlineVertexBuffer.array[p];t[n++]=this._outlineIndexBuffer.array.length;for(var g=0;g<this._outlineIndexBuffer.array.length;g++)t[n++]=this._outlineIndexBuffer.array[g];return t.buffer}},{key:"_processFeature",value:function(e,t,n,a,i,l,o){if(e){var s=e.length,u=!i||0===i.length;if(t&&(!n||u))for(var f=0;f<s;f++)this._processOutline(e[f],i);for(var h,c=0;c<s;c++){var y=r._area(e[c]);y>32?(void 0!==h&&this._processFill(e,h,a,l,o),h=[c]):y<-32&&void 0!==h&&h.push(c)}void 0!==h&&this._processFill(e,h,a,l,o)}}},{key:"_processOutline",value:function(e,t){var r,n,a,i=this._outlineVertexBuffer,l=this._outlineIndexBuffer,o=l.index,s=new I.E(0,0),u=new I.E(0,0),f=new I.E(0,0),h=-1,c=-1,y=-1,d=-1,v=-1,p=!1,g=e.length;if(!(g<2)){for(var x=e[0],m=e[g-1];g&&m.isEqual(x);)m=e[--g-1];if(!(g-0<2)){for(var _=0;_<g;++_){0===_?(r=e[g-1],n=e[0],a=e[1],s.assignSub(n,r),s.normalize(),s.rightPerpendicular()):(r=n,n=a,a=_!==g-1?e[_+1]:e[0],s.assign(u));var b=this._isClipEdge(r,n);-1===d&&(p=b),u.assignSub(a,n),u.normalize(),u.rightPerpendicular();var k=s.x*u.y-s.y*u.x;f.assignAdd(s,u),f.normalize();var w=-f.x*-s.x+-f.y*-s.y,M=Math.abs(0!==w?1/w:1);M>8&&(M=8),k>=0?(y=i.add(n.x,n.y,s.x,s.y,0,1,t),-1===d&&(d=y),h>=0&&c>=0&&y>=0&&!b&&l.add(h,c,y),c=i.add(n.x,n.y,M*-f.x,M*-f.y,0,-1,t),-1===v&&(v=c),h>=0&&c>=0&&y>=0&&!b&&l.add(h,c,y),h=c,c=y,y=i.add(n.x,n.y,f.x,f.y,0,1,t),h>=0&&c>=0&&y>=0&&!b&&l.add(h,c,y),c=i.add(n.x,n.y,u.x,u.y,0,1,t),h>=0&&c>=0&&y>=0&&!b&&l.add(h,c,y)):(y=i.add(n.x,n.y,M*f.x,M*f.y,0,1,t),-1===d&&(d=y),h>=0&&c>=0&&y>=0&&!b&&l.add(h,c,y),c=i.add(n.x,n.y,-s.x,-s.y,0,-1,t),-1===v&&(v=c),h>=0&&c>=0&&y>=0&&!b&&l.add(h,c,y),h=c,c=y,y=i.add(n.x,n.y,-f.x,-f.y,0,-1,t),h>=0&&c>=0&&y>=0&&!b&&l.add(h,c,y),(h=i.add(n.x,n.y,-u.x,-u.y,0,-1,t))>=0&&c>=0&&y>=0&&!b&&l.add(h,c,y))}h>=0&&c>=0&&d>=0&&!p&&l.add(h,c,d),h>=0&&d>=0&&v>=0&&!p&&l.add(h,v,d),this._outlineIndexCount+=3*(l.index-o)}}}},{key:"_processFill",value:function(e,t,r,n,a){var i;t.length>1&&(i=[]);var l,o=0,s=te(t);try{for(s.s();!(l=s.n()).done;){var u=l.value;0!==o&&i.push(o),o+=e[u].length}}catch(C){s.e(C)}finally{s.f()}var f,h=2*o,c=Q.Z.acquire(),y=te(t);try{for(y.s();!(f=y.n()).done;)for(var d=f.value,v=e[d],p=v.length,g=0;g<p;++g)c.push(v[g].x,v[g].y)}catch(C){y.e(C)}finally{y.f()}var x=(0,ee.e)(c,i,2);if(ee.e.deviation(c,i,2,x)>0){var m=t.map((function(t){return e[t].length})),_=(0,L.b)(c,m),I=_.buffer,b=_.vertexCount;if(b>0){for(var k=this._fillVertexBuffer.index,w=0;w<b;w++)this._fillVertexBuffer.add(I[2*w],I[2*w+1],r);for(var M=0;M<b;M+=3){var A=k+M;this._fillIndexBuffer.add(A,A+1,A+2)}if(void 0!==a){var P=this._patternMap,B=P.get(a);B?B[1]+=b:P.set(a,[this._fillIndexStart+this._fillIndexCount,b])}this._fillIndexCount+=b}}else{var D=x.length;if(D>0){for(var S=this._fillVertexBuffer.index,V=0;V<h;)this._fillVertexBuffer.add(c[V++],c[V++],r);for(var Z=0;Z<D;)this._fillIndexBuffer.add(S+x[Z++],S+x[Z++],S+x[Z++]);if(void 0!==a){var T=this._patternMap,E=T.get(a);E?E[1]+=D:T.set(a,[this._fillIndexStart+this._fillIndexCount,D])}this._fillIndexCount+=D}}Q.Z.release(c)}},{key:"_isClipEdge",value:function(e,t){return e.x===t.x?e.x<=-64||e.x>=4160:e.y===t.y&&(e.y<=-64||e.y>=4160)}}],[{key:"_area",value:function(e){for(var t=0,r=e.length-1,n=0;n<r;n++)t+=(e[n].x-e[n+1].x)*(e[n].y+e[n+1].y);return.5*(t+=(e[r].x-e[0].x)*(e[r].y+e[0].y))}}]),r}(W),ie=r(95953);function le(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oe(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){o=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(o)throw i}}}}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(h){return!1}}();return function(){var r,n=(0,R.Z)(e);if(t){var a=(0,R.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,C.Z)(this,r)}}var ue=function(e){(0,E.Z)(r,e);var t=se(r);function r(e,n,i,l,o){var s;return(0,a.Z)(this,r),(s=t.call(this,e,n,i)).type=2,s._tessellationOptions={pixelCoordRatio:8,halfWidth:0,offset:0},s._patternMap=new Map,s.tessellationProperties={_lineVertexBuffer:null,_lineIndexBuffer:null,_ddValues:null},s.tessellationProperties._lineVertexBuffer=l,s.tessellationProperties._lineIndexBuffer=o,s._lineTessellator=new ie.z(fe(s.tessellationProperties),he(s.tessellationProperties),e.canUseThinTessellation),s}return(0,i.Z)(r,[{key:"lineIndexStart",get:function(){return this._lineIndexStart}},{key:"lineIndexCount",get:function(){return this._lineIndexCount}},{key:"getResources",value:function(e,t,r){var n=this.layer,a=this.zoom,i=n.hasDataDrivenLine,l=n.getPaintProperty("line-pattern"),o=n.getPaintProperty("line-dasharray"),s=n.getLayoutProperty("line-cap");if(l||o){var u=(null==s?void 0:s.getValue(a))||0,f=null==s?void 0:s.isDataDriven;if(i){var h=null==l?void 0:l.isDataDriven,c=null==o?void 0:o.isDataDriven;if(!h&&!c)return;var y,d=le(this._features);try{for(d.s();!(y=d.n()).done;){var v=y.value;t(h?l.getValue(a,v):this._getDashArrayKey(v,a,n,o,f,s,u))}}catch(g){d.e(g)}finally{d.f()}}else if(l)t(l.getValue(a));else if(o){var p=o.getValue(a);t(n.getDashKey(p,u))}}}},{key:"processFeatures",value:function(e){var t,r,n,a,i,l;this._lineIndexStart=3*this.tessellationProperties._lineIndexBuffer.index,this._lineIndexCount=0;var o=this.layer,s=this.zoom,u=this._features,f=this._tessellationOptions,h=o.hasDataDrivenLine,c=o.lineMaterial;e&&e.setExtent(this.layerExtent);var y,d=o.getPaintProperty("line-pattern"),v=o.getPaintProperty("line-dasharray"),p=null==d?void 0:d.isDataDriven,g=null==v?void 0:v.isDataDriven,x=null!=(t=y=o.getLayoutProperty("line-cap"))&&t.isDataDriven?y:null,m=x?null:o.getLayoutValue("line-cap",s),_=m||0,I=!!x,b=null!=(r=y=o.getLayoutProperty("line-join"))&&r.isDataDriven?y:null,k=b?null:o.getLayoutValue("line-join",s),w=null!=(n=y=o.getLayoutProperty("line-miter-limit"))&&n.isDataDriven?y:null,M=w?null:o.getLayoutValue("line-miter-limit",s),A=null!=(a=y=o.getLayoutProperty("line-round-limit"))&&a.isDataDriven?y:null,P=A?null:o.getLayoutValue("line-round-limit",s),B=null!=(i=y=o.getPaintProperty("line-width"))&&i.isDataDriven?y:null,D=B?null:o.getPaintValue("line-width",s),S=null!=(l=y=o.getPaintProperty("line-offset"))&&l.isDataDriven?y:null,V=S?null:o.getPaintValue("line-offset",s);if(p||g){var Z,L=[],T=le(u);try{for(T.s();!(Z=T.n()).done;){var E=Z.value,C=p?d.getValue(s,E):this._getDashArrayKey(E,s,o,v,I,x,_),R=this._spriteInfo[C];if(R&&R.rect){var z=c.encodeAttributes(E,s,o,R),U=E.getGeometry(e);L.push({ddAttributes:z,page:R.page,cap:x?x.getValue(s,E):m,join:b?b.getValue(s,E):k,miterLimit:w?w.getValue(s,E):M,roundLimit:A?A.getValue(s,E):P,halfWidth:.5*(B?B.getValue(s,E):D),offset:S?S.getValue(s,E):V,geometry:U})}}}catch(ne){T.e(ne)}finally{T.f()}L.sort((function(e,t){return e.page-t.page})),f.textured=!0;for(var F=0,O=L;F<O.length;F++){var N=O[F],j=N.ddAttributes,G=N.page,K=N.cap,H=N.join,q=N.miterLimit,W=N.roundLimit,J=N.halfWidth,$=N.offset,Y=N.geometry;f.capType=K,f.joinType=H,f.miterLimit=q,f.roundLimit=W,f.halfWidth=J,f.offset=$,this._processFeature(Y,j,G)}}else{f.textured=!(!d&&!v),f.capType=m,f.joinType=k,f.miterLimit=M,f.roundLimit=P,f.halfWidth=.5*D,f.offset=V;var X,Q=le(u);try{for(Q.s();!(X=Q.n()).done;){var ee=X.value,te=h?c.encodeAttributes(ee,s,o):null;x&&(f.capType=x.getValue(s,ee)),b&&(f.joinType=b.getValue(s,ee)),w&&(f.miterLimit=w.getValue(s,ee)),A&&(f.roundLimit=A.getValue(s,ee)),B&&(f.halfWidth=.5*B.getValue(s,ee)),S&&(f.offset=S.getValue(s,ee));var re=ee.getGeometry(e);this._processFeature(re,te)}}catch(ne){Q.e(ne)}finally{Q.f()}}}},{key:"serialize",value:function(){var e=6;e+=this.layerUIDs.length,e+=this.tessellationProperties._lineVertexBuffer.array.length,e+=this.tessellationProperties._lineIndexBuffer.array.length,e+=3*this._patternMap.size+1;var t=new Uint32Array(e),r=new Int32Array(t.buffer),n=0;t[n++]=this.type,t[n++]=this.layerUIDs.length;for(var a=0;a<this.layerUIDs.length;a++)t[n++]=this.layerUIDs[a];t[n++]=this._lineIndexStart,t[n++]=this._lineIndexCount;var i=this._patternMap,l=i.size;if(t[n++]=l,l>0){var o,s=le(i);try{for(s.s();!(o=s.n()).done;){var u=(0,V.Z)(o.value,2),f=u[0],h=(0,V.Z)(u[1],2),c=h[0],y=h[1];t[n++]=f,t[n++]=c,t[n++]=y}}catch(p){s.e(p)}finally{s.f()}}t[n++]=this.tessellationProperties._lineVertexBuffer.array.length;for(var d=0;d<this.tessellationProperties._lineVertexBuffer.array.length;d++)r[n++]=this.tessellationProperties._lineVertexBuffer.array[d];t[n++]=this.tessellationProperties._lineIndexBuffer.array.length;for(var v=0;v<this.tessellationProperties._lineIndexBuffer.array.length;v++)t[n++]=this.tessellationProperties._lineIndexBuffer.array[v];return t.buffer}},{key:"_processFeature",value:function(e,t,r){if(e)for(var n=e.length,a=0;a<n;a++)this._processGeometry(e[a],t,r)}},{key:"_processGeometry",value:function(e,t,r){if(!(e.length<2)){for(var n,a,i=e[0],l=1;l<e.length;)(n=e[l].x-i.x)*n+(a=e[l].y-i.y)*a<1e-6?e.splice(l,1):(i=e[l],++l);if(!(e.length<2)){var o=this.tessellationProperties._lineIndexBuffer,s=3*o.index;this._tessellationOptions.initialDistance=0,this._tessellationOptions.wrapDistance=65535,this.tessellationProperties._ddValues=t,this._lineTessellator.tessellate(e,this._tessellationOptions);var u=3*o.index-s;if(void 0!==r){var f=this._patternMap,h=f.get(r);h?h[1]+=u:f.set(r,[s+this._lineIndexCount,u])}this._lineIndexCount+=u}}}},{key:"_getDashArrayKey",value:function(e,t,r,n,a,i,l){var o=a?i.getValue(t,e):l,s=n.getValue(t,e);return r.getDashKey(s,o)}}]),r}(W),fe=function(e){return function(t,r,n,a,i,l,o,s,u,f,h){return e._lineVertexBuffer.add(t,r,o,s,n,a,i,l,u,f,h,e._ddValues),e._lineVertexBuffer.index-1}},he=function(e){return function(t,r,n){e._lineIndexBuffer.add(t,r,n)}},ce=r(93537),ye=r(53315),de=r(26129);function ve(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return pe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pe(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){o=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(o)throw i}}}}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(h){return!1}}();return function(){var r,n=(0,R.Z)(e);if(t){var a=(0,R.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,C.Z)(this,r)}}function xe(e,t){return e.iconMosaicItem&&t.iconMosaicItem?e.iconMosaicItem.page===t.iconMosaicItem.page?0:e.iconMosaicItem.page-t.iconMosaicItem.page:e.iconMosaicItem&&!t.iconMosaicItem?1:!e.iconMosaicItem&&t.iconMosaicItem?-1:0}var me=function(e){(0,E.Z)(r,e);var t=ge(r);function r(e,n,i,l,o,s,u,f){var h;return(0,a.Z)(this,r),(h=t.call(this,e,n,f.getSpriteItems())).type=3,h._markerMap=new Map,h._glyphMap=new Map,h._glyphBufferDataStorage=new Map,h._isIconSDF=!1,h._iconVertexBuffer=i,h._iconIndexBuffer=l,h._textVertexBuffer=o,h._textIndexBuffer=s,h._placementEngine=u,h._workerTileHandler=f,h}return(0,i.Z)(r,[{key:"markerPageMap",get:function(){return this._markerMap}},{key:"glyphsPageMap",get:function(){return this._glyphMap}},{key:"symbolInstances",get:function(){return this._symbolInstances}},{key:"getResources",value:function(e,t,n){var a=this.layer,i=this.zoom;e&&e.setExtent(this.layerExtent);var l,o,s,u,f=a.getLayoutProperty("icon-image"),h=a.getLayoutProperty("text-field"),c=a.getLayoutProperty("text-transform"),y=a.getLayoutProperty("text-font"),d=[];f&&!f.isDataDriven&&(l=f.getValue(i)),h&&!h.isDataDriven&&(o=h.getValue(i)),c&&c.isDataDriven||(s=a.getLayoutValue("text-transform",i),c=null),y&&y.isDataDriven||(u=a.getLayoutValue("text-font",i),y=null);var v,p=ve(this._features);try{for(p.s();!(v=p.n()).done;){var g=v.value,x=g.getGeometry(e);if(x&&0!==x.length){var m=void 0,_=void 0;f&&((m=f.isDataDriven?f.getValue(i,g):this._replaceKeys(l,g.values))&&t(m));var I=!1;if(h&&(_=h.isDataDriven?h.getValue(i,g):this._replaceKeys(o,g.values))){switch(_=_.replace(/\\n/g,"\n"),c&&(s=c.getValue(i,g)),s){case 2:_=_.toLowerCase();break;case 1:_=_.toUpperCase()}if(r._bidiEngine.hasBidiChar(_)){var b;b="rtl"===r._bidiEngine.checkContextual(_)?"IDNNN":"ICNNN",_=r._bidiEngine.bidiTransform(_,b,"VLYSN"),I=!0}var k=_.length;if(k>0){y&&(u=y.getValue(i,g));var w,M=ve(u);try{for(M.s();!(w=M.n()).done;){var A=w.value,P=n[A];P||(P=n[A]=new Set);for(var B=0;B<k;B++){var D=_.charCodeAt(B);P.add(D)}}}catch(Z){M.e(Z)}finally{M.f()}}}if(m||_){var S=a.getLayoutValue("symbol-sort-key",i,g),V={feature:g,sprite:m,label:_,rtl:I,geometry:x,hash:(_?(0,ye.hP)(_):0)^(m?(0,ye.hP)(m):0),priority:S,textFont:u};d.push(V)}}}}catch(Z){p.e(Z)}finally{p.f()}this._symbolFeatures=d}},{key:"processFeatures",value:function(e){e&&e.setExtent(this.layerExtent);var t,n=this.layer,a=this.zoom,i=n.getLayoutValue("symbol-placement",a),l=0!==i,o=8*n.getLayoutValue("symbol-spacing",a),s=n.getLayoutProperty("icon-image"),u=n.getLayoutProperty("text-field"),h=s?new de._L(n,a,l):null,c=u?new de.nj(n,a,l):null,y=this._workerTileHandler;s&&(t=y.getSpriteItems()),this._iconIndexStart=3*this._iconIndexBuffer.index,this._textIndexStart=3*this._textIndexBuffer.index,this._iconIndexCount=0,this._textIndexCount=0,this._markerMap.clear(),this._glyphMap.clear();var d=[],v=1;c&&c.size&&(v=c.size/x);var p,g=c?c.maxAngle*f.DT:0,_=c?8*c.size:0,I=ve(this._symbolFeatures);try{for(I.s();!(p=I.n()).done;){var b=p.value,k=void 0;h&&t&&b.sprite&&((k=t[b.sprite])&&k.sdf&&(this._isIconSDF=!0));var w=void 0;k&&h.update(a,b.feature);var A=0,P=b.label;if(P){c.update(a,b.feature);var B=l?c.keepUpright:c.writingMode&&c.writingMode.indexOf(1)>=0,D=.5;switch(c.anchor){case 5:case 1:case 7:D=0;break;case 6:case 2:case 8:D=1}var S=.5;switch(c.anchor){case 5:case 3:case 6:S=0;break;case 7:case 4:case 8:S=1}var V=.5;switch(c.justify){case 0:V=D;break;case 1:V=0;break;case 3:V=1}var Z=c.letterSpacing*x,L=l?0:c.maxWidth*x,T=c.lineHeight*x,E=b.textFont.map((function(e){return y.getGlyphItems(e)}));if((w=new m(E,L,T,Z,D,S,V).getShaping(P,b.rtl,B))&&w.length>0){var C,R=1e30,z=-1e30,U=ve(w);try{for(U.s();!(C=U.n()).done;){var F=C.value;R=Math.min(R,F.x),z=Math.max(z,F.x)}}catch($){U.e($)}finally{U.f()}A=(z-R+48)*v*8}}var O,N=ve(b.geometry);try{for(N.s();!(O=N.n()).done;){var j=O.value,G=[];if(1===i){if(w&&w.length>0&&c&&c.size){var K=8*c.size*(2+Math.min(2,4*Math.abs(c.offset[1])));j=r._smoothVertices(j,K)}r._pushAnchors(G,j,o,A)}else 2===i?r._pushCenterAnchor(G,j):3===b.feature.type?r._pushCentroid(G,j):G.push(new M(j[0].x,j[0].y));for(var H=0,q=G;H<q.length;H++){var W=q[H];if(!(W.x<0||W.x>4096||W.y<0||W.y>4096)&&(!(l&&A>0&&0===c.rotationAlignment)||r._honorsTextMaxAngle(j,W,A,g,_))){var J={shaping:w,line:j,iconMosaicItem:k,anchor:W,symbolFeature:b,textColliders:[],iconColliders:[],textVertexRanges:[],iconVertexRanges:[]};d.push(J),this._processFeature(J,h,c)}}}}catch($){N.e($)}finally{N.f()}}}catch($){I.e($)}finally{I.f()}d.sort(xe),this._addPlacedGlyphs(),this._symbolInstances=d}},{key:"serialize",value:function(){var e=11;e+=this.layerUIDs.length,e+=3*this.markerPageMap.size,e+=3*this.glyphsPageMap.size,e+=r.symbolsSerializationLength(this._symbolInstances),e+=this._iconVertexBuffer.array.length,e+=this._iconIndexBuffer.array.length,e+=this._textVertexBuffer.array.length,e+=this._textIndexBuffer.array.length;var t=new Uint32Array(e),n=new Int32Array(t.buffer),a=new Float32Array(t.buffer),i=0;t[i++]=this.type,t[i++]=this.layerUIDs.length;for(var l=0;l<this.layerUIDs.length;l++)t[i++]=this.layerUIDs[l];t[i++]=this._isIconSDF?1:0,t[i++]=this.markerPageMap.size;var o,s=ve(this.markerPageMap);try{for(s.s();!(o=s.n()).done;){var u=(0,V.Z)(o.value,2),f=u[0],h=(0,V.Z)(u[1],2),c=h[0],y=h[1];t[i++]=f,t[i++]=c,t[i++]=y}}catch(M){s.e(M)}finally{s.f()}t[i++]=this.glyphsPageMap.size;var d,v=ve(this.glyphsPageMap);try{for(v.s();!(d=v.n()).done;){var p=(0,V.Z)(d.value,2),g=p[0],x=(0,V.Z)(p[1],2),m=x[0],_=x[1];t[i++]=g,t[i++]=m,t[i++]=_}}catch(M){v.e(M)}finally{v.f()}t[i++]=this._iconVertexBuffer.index/4,t[i++]=this._textVertexBuffer.index/4,i=r.serializeSymbols(t,n,a,i,this._symbolInstances),t[i++]=this._iconVertexBuffer.array.length;for(var I=0;I<this._iconVertexBuffer.array.length;I++)n[i++]=this._iconVertexBuffer.array[I];t[i++]=this._iconIndexBuffer.array.length;for(var b=0;b<this._iconIndexBuffer.array.length;b++)t[i++]=this._iconIndexBuffer.array[b];t[i++]=this._textVertexBuffer.array.length;for(var k=0;k<this._textVertexBuffer.array.length;k++)n[i++]=this._textVertexBuffer.array[k];t[i++]=this._textIndexBuffer.array.length;for(var w=0;w<this._textIndexBuffer.array.length;w++)t[i++]=this._textIndexBuffer.array[w];return t.buffer}},{key:"_replaceKeys",value:function(e,t){return e.replace(/{([^{}]+)}/g,(function(e,r){return r in t?t[r]:""}))}},{key:"_processFeature",value:function(e,t,r){var n=e.line,a=e.iconMosaicItem,i=e.shaping,l=e.anchor,o=this.zoom,s=this.layer,u=!!a,h=!0;u&&(h=t.optional||!a);var c,y,d=i&&i.length>0,v=!0;if(d&&(v=r.optional),u&&(c=this._placementEngine.getIconPlacement(l,a,t)),(c||h)&&(d&&(y=this._placementEngine.getTextPlacement(l,i,n,r)),y||v)){if(c&&y||(v||h?v||y?h||c||(y=null):c=null:(c=null,y=null)),y){var p=s.hasDataDrivenText?s.textMaterial.encodeAttributes(e.symbolFeature.feature,o,s):null;if(this._storePlacedGlyphs(e,y.shapes,o,r.rotationAlignment,p),y.textColliders){e.textColliders=y.textColliders;var g,x=ve(y.textColliders);try{for(x.s();!(g=x.n()).done;){var m=g.value;m.minLod=Math.max(o+(0,f.k3)(m.minLod),0),m.maxLod=Math.min(o+(0,f.k3)(m.maxLod),25);var _=m.angle;if(_){var I=Math.cos(_),b=Math.sin(_),k=m.dxPixels*I-m.dyPixels*b,w=m.dxPixels*b+m.dyPixels*I,M=(m.dxPixels+m.width)*I-m.dyPixels*b,A=(m.dxPixels+m.width)*b+m.dyPixels*I,P=m.dxPixels*I-(m.dyPixels+m.height)*b,B=m.dxPixels*b+(m.dyPixels+m.height)*I,D=(m.dxPixels+m.width)*I-(m.dyPixels+m.height)*b,S=(m.dxPixels+m.width)*b+(m.dyPixels+m.height)*I,V=Math.min(k,M,P,D),Z=Math.max(k,M,P,D),L=Math.min(w,A,B,S),T=Math.max(w,A,B,S);m.dxPixels=V,m.dyPixels=L,m.width=Z-V,m.height=T-L}}}catch(ee){x.e(ee)}finally{x.f()}}}if(c){var E=s.hasDataDrivenIcon?s.iconMaterial.encodeAttributes(e.symbolFeature.feature,o,s):null;if(this._addPlacedIcons(e,c.shapes,o,a.page,1===t.rotationAlignment,E),c.iconColliders){e.iconColliders=c.iconColliders;var C,R=ve(c.iconColliders);try{for(R.s();!(C=R.n()).done;){var z=C.value;z.minLod=Math.max(o+(0,f.k3)(z.minLod),0),z.maxLod=Math.min(o+(0,f.k3)(z.maxLod),25);var U=z.angle;if(U){var F=Math.cos(U),O=Math.sin(U),N=z.dxPixels*F-z.dyPixels*O,j=z.dxPixels*O+z.dyPixels*F,G=(z.dxPixels+z.width)*F-z.dyPixels*O,K=(z.dxPixels+z.width)*O+z.dyPixels*F,H=z.dxPixels*F-(z.dyPixels+z.height)*O,q=z.dxPixels*O+(z.dyPixels+z.height)*F,W=(z.dxPixels+z.width)*F-(z.dyPixels+z.height)*O,J=(z.dxPixels+z.width)*O+(z.dyPixels+z.height)*F,$=Math.min(N,G,H,W),Y=Math.max(N,G,H,W),X=Math.min(j,K,q,J),Q=Math.max(j,K,q,J);z.dxPixels=$,z.dyPixels=X,z.width=Y-$,z.height=Q-X}}}catch(ee){R.e(ee)}finally{R.f()}}}}}},{key:"_addPlacedIcons",value:function(e,t,r,n,a,i){var l,o=Math.max(r-1,0),s=this._iconVertexBuffer,u=this._iconIndexBuffer,h=this._markerMap,c=ve(t);try{for(c.s();!(l=c.n()).done;){var y=l.value,d=a?0:Math.max(r+(0,f.k3)(y.minzoom),o),v=a?25:Math.min(r+(0,f.k3)(y.maxzoom),25);if(!(v<=d)){var p=y.tl,g=y.tr,x=y.bl,m=y.br,_=y.mosaicRect,I=y.labelAngle,b=y.minAngle,k=y.maxAngle,w=y.anchor,M=s.index,A=_.x,P=_.y,B=A+_.width,D=P+_.height,S=s.index;s.add(w.x,w.y,p.x,p.y,A,P,I,b,k,d,v,i),s.add(w.x,w.y,g.x,g.y,B,P,I,b,k,d,v,i),s.add(w.x,w.y,x.x,x.y,A,D,I,b,k,d,v,i),s.add(w.x,w.y,m.x,m.y,B,D,I,b,k,d,v,i),e.iconVertexRanges.length>0&&e.iconVertexRanges[0][0]+e.iconVertexRanges[0][1]===S?e.iconVertexRanges[0][1]+=4:e.iconVertexRanges.push([S,4]),u.add(M+0,M+1,M+2),u.add(M+1,M+2,M+3),h.has(n)?h.get(n)[1]+=6:h.set(n,[this._iconIndexStart+this._iconIndexCount,6]),this._iconIndexCount+=6}}}catch(V){c.e(V)}finally{c.f()}}},{key:"_addPlacedGlyphs",value:function(){var e,t=this._textVertexBuffer,r=this._textIndexBuffer,n=this._glyphMap,a=ve(this._glyphBufferDataStorage);try{for(a.s();!(e=a.n()).done;){var i,l=(0,V.Z)(e.value,2),o=l[0],s=ve(l[1]);try{for(s.s();!(i=s.n()).done;){var u=i.value,f=t.index,h=u.symbolInstance,c=u.ddAttributes,y=t.index;t.add(u.glyphAnchor[0],u.glyphAnchor[1],u.tl[0],u.tl[1],u.xmin,u.ymin,u.labelAngle,u.minAngle,u.maxAngle,u.minLod,u.maxLod,c),t.add(u.glyphAnchor[0],u.glyphAnchor[1],u.tr[0],u.tr[1],u.xmax,u.ymin,u.labelAngle,u.minAngle,u.maxAngle,u.minLod,u.maxLod,c),t.add(u.glyphAnchor[0],u.glyphAnchor[1],u.bl[0],u.bl[1],u.xmin,u.ymax,u.labelAngle,u.minAngle,u.maxAngle,u.minLod,u.maxLod,c),t.add(u.glyphAnchor[0],u.glyphAnchor[1],u.br[0],u.br[1],u.xmax,u.ymax,u.labelAngle,u.minAngle,u.maxAngle,u.minLod,u.maxLod,c),h.textVertexRanges.length>0&&h.textVertexRanges[0][0]+h.textVertexRanges[0][1]===y?h.textVertexRanges[0][1]+=4:h.textVertexRanges.push([y,4]),r.add(f+0,f+1,f+2),r.add(f+1,f+2,f+3),n.has(o)?n.get(o)[1]+=6:n.set(o,[this._textIndexStart+this._textIndexCount,6]),this._textIndexCount+=6}}catch(d){s.e(d)}finally{s.f()}}}catch(d){a.e(d)}finally{a.f()}this._glyphBufferDataStorage.clear()}},{key:"_storePlacedGlyphs",value:function(e,t,r,n,a){var i,l,o,s,u,h,c,y,d,v,p,g,x=Math.max(r-1,0),m=1===n,_=ve(t);try{for(_.s();!(g=_.n()).done;){var I=g.value;(i=m?0:Math.max(r+(0,f.k3)(I.minzoom),x),(l=m?25:Math.min(r+(0,f.k3)(I.maxzoom),25))<=i)||(o=I.tl,s=I.tr,u=I.bl,h=I.br,c=I.labelAngle,y=I.minAngle,d=I.maxAngle,v=I.anchor,p=I.mosaicRect,this._glyphBufferDataStorage.has(I.page)||this._glyphBufferDataStorage.set(I.page,[]),this._glyphBufferDataStorage.get(I.page).push({glyphAnchor:[v.x,v.y],tl:[o.x,o.y],tr:[s.x,s.y],bl:[u.x,u.y],br:[h.x,h.y],xmin:p.x,ymin:p.y,xmax:p.x+p.width,ymax:p.y+p.height,labelAngle:c,minAngle:y,maxAngle:d,minLod:i,maxLod:l,placementLod:x,symbolInstance:e,ddAttributes:a}))}}catch(b){_.e(b)}finally{_.f()}}}],[{key:"symbolsSerializationLength",value:function(e){var t=0;t+=1;var r,n=ve(e||[]);try{for(n.s();!(r=n.n()).done;){var a=r.value;t+=4,t+=1;var i,l=ve(a.textColliders);try{for(l.s();!(i=l.n()).done;){i.value;t+=10}}catch(u){l.e(u)}finally{l.f()}var o,s=ve(a.iconColliders);try{for(s.s();!(o=s.n()).done;){o.value;t+=10}}catch(u){s.e(u)}finally{s.f()}t+=1,t+=2*a.textVertexRanges.length,t+=1,t+=2*a.iconVertexRanges.length}}catch(u){n.e(u)}finally{n.f()}return t}},{key:"serializeSymbols",value:function(e,t,r,n,a){a=a||[],t[n++]=a.length;var i,l=ve(a);try{for(l.s();!(i=l.n()).done;){var o=i.value;t[n++]=o.anchor.x,t[n++]=o.anchor.y,t[n++]=o.symbolFeature.hash,t[n++]=o.symbolFeature.priority,t[n++]=o.textColliders.length+o.iconColliders.length;var s,u=ve(o.textColliders);try{for(u.s();!(s=u.n()).done;){var f=s.value;t[n++]=f.xTile,t[n++]=f.yTile,t[n++]=f.dxPixels,t[n++]=f.dyPixels,t[n++]=f.hard?1:0,t[n++]=f.partIndex,r[n++]=f.minLod,r[n++]=f.maxLod,t[n++]=f.width,t[n++]=f.height}}catch(w){u.e(w)}finally{u.f()}var h,c=ve(o.iconColliders);try{for(c.s();!(h=c.n()).done;){var y=h.value;t[n++]=y.xTile,t[n++]=y.yTile,t[n++]=y.dxPixels,t[n++]=y.dyPixels,t[n++]=y.hard?1:0,t[n++]=y.partIndex,r[n++]=y.minLod,r[n++]=y.maxLod,t[n++]=y.width,t[n++]=y.height}}catch(w){c.e(w)}finally{c.f()}t[n++]=o.textVertexRanges.length;var d,v=ve(o.textVertexRanges);try{for(v.s();!(d=v.n()).done;){var p=(0,V.Z)(d.value,2),g=p[0],x=p[1];t[n++]=g,t[n++]=x}}catch(w){v.e(w)}finally{v.f()}t[n++]=o.iconVertexRanges.length;var m,_=ve(o.iconVertexRanges);try{for(_.s();!(m=_.n()).done;){var I=(0,V.Z)(m.value,2),b=I[0],k=I[1];t[n++]=b,t[n++]=k}}catch(w){_.e(w)}finally{_.f()}}}catch(w){l.e(w)}finally{l.f()}return n}},{key:"_pushAnchors",value:function(e,t,r,n){r+=n;for(var a=0,i=t.length-1,l=0;l<i;l++)a+=I.E.distance(t[l],t[l+1]);var o=n||r;if(!(a<=(o*=.5)))for(var s=o/a,u=0,h=-(r=a/Math.max(Math.round(a/r),1))/2,c=t.length-1,y=0;y<c;y++){for(var d=t[y],v=t[y+1],p=v.x-d.x,g=v.y-d.y,x=Math.sqrt(p*p+g*g),m=void 0;h+r<u+x;){var _=((h+=r)-u)/x,b=(0,f.sX)(d.x,v.x,_),k=(0,f.sX)(d.y,v.y,_);void 0===m&&(m=Math.atan2(g,p)),e.push(new M(b,k,m,y,s))}u+=x}}},{key:"_pushCenterAnchor",value:function(e,t){for(var r=0,n=t.length-1,a=0;a<n;a++)r+=I.E.distance(t[a],t[a+1]);for(var i=r/2,l=0,o=t.length-1,s=0;s<o;s++){var u=t[s],h=t[s+1],c=h.x-u.x,y=h.y-u.y,d=Math.sqrt(c*c+y*y);if(i<l+d){var v=(i-l)/d,p=(0,f.sX)(u.x,h.x,v),g=(0,f.sX)(u.y,h.y,v),x=Math.atan2(y,c);return void e.push(new M(p,g,x,s,0))}l+=d}}},{key:"_deviation",value:function(e,t,r){var n=(t.x-e.x)*(r.x-t.x)+(t.y-e.y)*(r.y-t.y),a=(t.x-e.x)*(r.y-t.y)-(t.y-e.y)*(r.x-t.x);return Math.atan2(a,n)}},{key:"_honorsTextMaxAngle",value:function(e,t,r,n,a){for(var i=0,l=r/2,o=new I.E(t.x,t.y),s=t.segment+1;i>-l;){if(--s<0)return!1;i-=I.E.distance(e[s],o),o=e[s]}i+=I.E.distance(e[s],e[s+1]);for(var u=[],f=0,h=e.length;i<l;){var c=e[s],y=void 0,d=s;do{if(++d===h)return!1;y=e[d]}while(y.isEqual(c));var v=void 0,p=d;do{if(++p===h)return!1;v=e[p]}while(v.isEqual(y));var g=this._deviation(c,y,v);for(u.push({deviation:g,distToAnchor:i}),f+=g;i-u[0].distToAnchor>a;)f-=u.shift().deviation;if(Math.abs(f)>n)return!1;i+=I.E.distance(y,v),s=d}return!0}},{key:"_smoothVertices",value:function(e,t){if(t<=0)return e;var r=e.length;if(r<3)return e;var n=[],a=0,i=0;n.push(0);for(var l=1;l<r;l++){var o=I.E.distance(e[l],e[l-1]);o>0&&(a+=o,n.push(a),++i!==l&&(e[i]=e[l]))}if((r=i+1)<3)return e;t=Math.min(t,.2*a);var s=e[0].x,u=e[0].y,f=e[r-1].x,h=e[r-1].y,c=I.E.sub(e[0],e[1]);c.normalize(),e[0].x+=t*c.x,e[0].y+=t*c.y,c.assignSub(e[r-1],e[r-2]),c.normalize(),e[r-1].x+=t*c.x,e[r-1].y+=t*c.y,n[0]-=t,n[r-1]+=t;var y=[];y.push(new I.E(s,u));for(var d=1e-6,v=.5*t,p=1;p<r-1;p++){for(var g=0,x=0,m=0,_=p-1;_>=0;_--){var b=v+n[_+1]-n[p];if(b<0)break;var k=n[_+1]-n[_],w=n[p]-n[_]<v?1:b/k;if(w<d)break;var M=w*w,A=w*b-.5*M*k,P=w*k/t,B=e[_+1],D=e[_].x-B.x,S=e[_].y-B.y;g+=P/A*(B.x*w*b+.5*M*(b*D-k*B.x)-M*w*k*D/3),x+=P/A*(B.y*w*b+.5*M*(b*S-k*B.y)-M*w*k*S/3),m+=P}for(var V=p+1;V<r;V++){var Z=v-n[V-1]+n[p];if(Z<0)break;var L=n[V]-n[V-1],T=n[V]-n[p]<v?1:Z/L;if(T<d)break;var E=T*T,C=T*Z-.5*E*L,R=T*L/t,z=e[V-1],U=e[V].x-z.x,F=e[V].y-z.y;g+=R/C*(z.x*T*Z+.5*E*(Z*U-L*z.x)-E*T*L*U/3),x+=R/C*(z.y*T*Z+.5*E*(Z*F-L*z.y)-E*T*L*F/3),m+=R}y.push(new I.E(g/m,x/m))}return y.push(new I.E(f,h)),e[0].x=s,e[0].y=u,e[r-1].x=f,e[r-1].y=h,y}},{key:"_pushCentroid",value:function(e,t){var r=4096,n=4096,a=t.length-1,i=0,l=0,o=0,s=t[0].x,u=t[0].y;s>r&&(s=r),s<0&&(s=0),u>n&&(u=n),u<0&&(u=0);for(var f=1;f<a;f++){var h=t[f].x,c=t[f].y,y=t[f+1].x,d=t[f+1].y;h>r&&(h=r),h<0&&(h=0),c>n&&(c=n),c<0&&(c=0),y>r&&(y=r),y<0&&(y=0),d>n&&(d=n),d<0&&(d=0);var v=(h-s)*(d-u)-(y-s)*(c-u);i+=v*(s+h+y),l+=v*(u+c+d),o+=v}i/=3*o,l/=3*o,isNaN(i)||isNaN(l)||e.push(new M(i,l))}}]),r}(W);me._bidiEngine=new ce.Z;var _e,Ie=r(46004);function be(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ke(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){o=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(o)throw i}}}}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}!function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.NO_DATA=1]="NO_DATA",e[e.READY=2]="READY",e[e.MODIFIED=3]="MODIFIED",e[e.INVALID=4]="INVALID"}(_e||(_e={}));var we=function(){function e(t,r,n,i,l){if((0,a.Z)(this,e),this._pbfTiles={},this._tileClippers={},this._client=n,this._tile=r,l){this._styleLayerUIDs=new Set;var o,s=be(l);try{for(s.s();!(o=s.n()).done;){var u=o.value;this._styleLayerUIDs.add(u)}}catch(M){s.e(M)}finally{s.f()}}this._styleRepository=i,this._layers=this._styleRepository.layers;var f=r.tileKey.split("/").map(parseFloat),h=(0,V.Z)(f,3),c=h[0],y=h[1],d=h[2];this._level=c;for(var v=8+Math.max(5*(this._level-14),0),p=0,g=Object.keys(t);p<g.length;p++){var x=g[p],m=t[x];if(this._pbfTiles[x]=new Z.Z(new Uint8Array(m.protobuff),new DataView(m.protobuff)),m.refKey){var _=m.refKey.split("/").map(parseFloat),I=c-(0,V.Z)(_,1)[0];if(I>0){var b=(1<<I)-1,k=y&b,w=d&b;this._tileClippers[x]=new Ie.b(I,k,w,8,v)}}this._tileClippers[x]||(this._tileClippers[x]=new Ie.I)}}var t;return(0,i.Z)(e,[{key:"_canParseStyleLayer",value:function(e){return!this._styleLayerUIDs||this._styleLayerUIDs.has(e)}},{key:"parse",value:(t=(0,n.Z)(o().mark((function e(t){var r,n,a,i,l,s,u,f,h,c,y,d=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(0,L.j)(),n=this._initialize(t),a=n.returnedBuckets,this._processLayers(n),this._linkReferences(n),this._filterFeatures(n),i=[],l=new Set,s=function(e,t){l.has(e)||(i.push({name:e,repeat:t}),l.add(e))},u={},f=be(a);try{for(f.s();!(h=f.n()).done;)(c=h.value).getResources(c.tileClipper,s,u)}catch(o){f.e(o)}finally{f.f()}if(this._tile.status!==_e.INVALID){e.next=7;break}return e.abrupt("return",Promise.resolve([]));case 7:return y=this._fetchResources(i,u,t),e.abrupt("return",Promise.all([].concat((0,S.Z)(y),[r])).then((function(){return d._processFeatures(n.returnedBuckets)})));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_initialize",value:function(e){return{signal:e&&e.signal,sourceNameToTileData:this._parseTileData(this._pbfTiles),layers:this._layers,zoom:this._level,sourceNameToTileClipper:this._tileClippers,sourceNameToUniqueSourceLayerBuckets:{},sourceNameToUniqueSourceLayers:{},returnedBuckets:[],layerIdToBucket:{},referencerUIDToReferencedId:new Map}}},{key:"_processLayers",value:function(e){for(var t=e.sourceNameToTileData,r=e.layers,n=e.zoom,a=e.sourceNameToTileClipper,i=e.sourceNameToUniqueSourceLayerBuckets,l=e.sourceNameToUniqueSourceLayers,o=e.returnedBuckets,s=e.layerIdToBucket,u=e.referencerUIDToReferencedId,f=r.length-1;f>=0;f--){var h=r[f];if(!(!this._canParseStyleLayer(h.uid)||h.minzoom&&n<Math.floor(h.minzoom)||h.maxzoom&&n>=h.maxzoom||0===h.type)&&(t[h.source]&&a[h.source])){var c=t[h.source],y=a[h.source],d=h.sourceLayer,v=c[d];if(v){var p=l[h.source];if(p||(p=l[h.source]=new Set),p.add(h.sourceLayer),h.refLayerId)u.set(h.uid,h.refLayerId);else{var g=this._createBucket(h);if(g){g.layerUIDs=[h.uid],g.layerExtent=v.extent,g.tileClipper=y;var x=i[h.source];x||(x=i[h.source]={});var m=x[d];m||(m=x[d]=[]),m.push(g),o.push(g),s[h.id]=g}}}}}}},{key:"_linkReferences",value:function(e){var t=e.layerIdToBucket;e.referencerUIDToReferencedId.forEach((function(e,r){t[e=e]&&t[e].layerUIDs.push(r)}))}},{key:"_filterFeatures",value:function(e){for(var t=e.signal,r=e.sourceNameToTileData,n=e.sourceNameToUniqueSourceLayerBuckets,a=e.sourceNameToUniqueSourceLayers,i=10*this._level,l=10*(this._level+1),o=[],u=[],f=function(){var e=c[h];a[e].forEach((function(t){o.push(t),u.push(e)}))},h=0,c=Object.keys(a);h<c.length;h++)f();for(var y=0;y<o.length;y++){var d=u[y],v=o[y];if(r[d]&&n[d]){var p=r[d][v],g=n[d][v];if(g&&0!==g.length){if((0,s.Hc)(t))return;for(var x=p.getData();x.nextTag(2);){var m=x.getMessage(),_=new T(m,p);m.release();var I=_.values;if(I){var b=I._minzoom;if(b&&b>=l)continue;var k=I._maxzoom;if(k&&k<=i)continue}var w,M=be(g);try{for(M.s();!(w=M.n()).done;){w.value.pushFeature(_)}}catch(A){M.e(A)}finally{M.f()}}}}}}},{key:"_fetchResources",value:function(e,t,r){var n,a,i=[],l=this._tile.getWorkerTileHandler();for(var o in e.length>0&&(n=l.fetchSprites(e,this._client,r),i.push(n)),t){var s=t[o];s.size>0&&(a=l.fetchGlyphs(this._tile.tileKey,o,s,this._client,r),i.push(a))}return i}},{key:"_processFeatures",value:function(e){var t,r=this,n=e.filter((function(e){return e.hasFeatures()||r._canParseStyleLayer(e.layer.uid)})),a=be(n);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.processFeatures(i.tileClipper)}}catch(l){a.e(l)}finally{a.f()}return n}},{key:"_parseTileData",value:function(e){for(var t={},r=0,n=Object.keys(e);r<n.length;r++){for(var a=n[r],i=e[a],l={};i.next();)if(3===i.tag()){var o=i.getMessage(),s=new O(o);o.release(),l[s.name]=s}else i.skip();t[a]=l}return t}},{key:"_createBucket",value:function(e){switch(e.type){case 0:return null;case 1:return this._createFillBucket(e);case 2:return this._createLineBucket(e);case 4:return this._createCircleBucket(e);case 3:return this._createSymbolBucket(e)}}},{key:"_createFillBucket",value:function(e){return new ae(e,this._level,this._tile.getWorkerTileHandler().getSpriteItems(),new G(e.fillMaterial.getStride()),new F,new K(e.outlineMaterial.getStride()),new F)}},{key:"_createLineBucket",value:function(e){return new ue(e,this._level,this._tile.getWorkerTileHandler().getSpriteItems(),new j(e.lineMaterial.getStride()),new F)}},{key:"_createCircleBucket",value:function(e){return new X(e,this._level,this._tile.getWorkerTileHandler().getSpriteItems(),new q(e.circleMaterial.getStride()),new F)}},{key:"_createSymbolBucket",value:function(e){var t=this._tile;return new me(e,this._level,new H(e.iconMaterial.getStride()),new F,new H(e.textMaterial.getStride()),new F,t.placementEngine,t.getWorkerTileHandler())}}]),e}();function Me(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ae(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){o=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(o)throw i}}}}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Pe=function(){function e(t,r,n,i){(0,a.Z)(this,e),this.status=_e.INITIALIZED,this.placementEngine=new D,this.tileKey=t,this.refKeys=r,this._workerTileHandler=n,this._styleRepository=i}var t,r;return(0,i.Z)(e,[{key:"release",value:function(){this.tileKey="",this.refKeys=null,this.status=_e.INITIALIZED,this._workerTileHandler=null}},{key:"parse",value:(r=(0,n.Z)(o().mark((function e(t,r,n){var a,i,l,f,h,c,y,d,v=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n&&n.signal,(0,u.pC)(a)&&(i=function e(){a.removeEventListener("abort",e),v.status=_e.INVALID},a.addEventListener("abort",i)),e.prev=2,e.next=5,this._parse(t,n);case 5:l=e.sent,e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(2),!(0,s.D_)(e.t0)){e.next=12;break}throw e.t0;case 12:return e.abrupt("return",{result:[],transferList:[]});case 13:this.status=_e.READY,f=[],h=Me(l);try{for(h.s();!(c=h.n()).done;)y=c.value,d=y.serialize(),f.push(d)}catch(o){h.e(o)}finally{h.f()}return e.abrupt("return",{result:f,transferList:f.length<=r&&f});case 18:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(e,t,n){return r.apply(this,arguments)})},{key:"setObsolete",value:function(){this.status=_e.INVALID}},{key:"getLayers",value:function(){return this._workerTileHandler.getLayers()}},{key:"getWorkerTileHandler",value:function(){return this._workerTileHandler}},{key:"_parse",value:(t=(0,n.Z)(o().mark((function e(t,r){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.sourceName2DataAndRefKey,0!==Object.keys(n).length){e.next=3;break}return e.abrupt("return",[]);case 3:return this.status=_e.MODIFIED,e.abrupt("return",new we(n,this,r.client,this._styleRepository,t.styleLayerUIDs).parse(r));case 5:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),e}(),Be=r(90909);function De(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Se(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Se(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){o=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(o)throw i}}}}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ve=function(){function e(){(0,a.Z)(this,e),this._spriteInfo={},this._glyphInfo={}}var t;return(0,i.Z)(e,[{key:"reset",value:function(){return this._spriteInfo={},this._glyphInfo={},Promise.resolve()}},{key:"getLayers",value:function(){var e;return null==(e=this._styleRepository)?void 0:e.layers}},{key:"createTileAndParse",value:(t=(0,n.Z)(o().mark((function e(t,r){var n,a,i,l,u,f,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=t.key,a={},i=0,l=Object.keys(t.sourceName2DataAndRefKey);i<l.length;i++)u=l[i],f=t.sourceName2DataAndRefKey[u],a[u]=f.refKey;return h=new Pe(n,a,this,this._styleRepository),e.prev=3,e.next=6,h.parse(t,this._vectorTileLayerMaxBuffers,r);case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),h.setObsolete(),h.release(),(0,s.D_)(e.t0)){e.next=13;break}throw e.t0;case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(e,r){return t.apply(this,arguments)})},{key:"updateStyle",value:function(e){if(e&&0!==e.length&&this._styleRepository){var t,r=this._styleRepository,n=De(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=a.type,l=a.data;switch(i){case 0:r.setPaintProperties(l.layer,l.paint);break;case 1:r.setLayoutProperties(l.layer,l.layout);break;case 3:r.deleteStyleLayer(l.layer);break;case 2:r.setStyleLayer(l.layer,l.index)}}}catch(o){n.e(o)}finally{n.f()}}}},{key:"setStyle",value:function(e){this._styleRepository=new Be.Z(e.style),this._spriteInfo={},this._glyphInfo={},this._vectorTileLayerMaxBuffers=e.vectorTileLayerMaxBuffers}},{key:"fetchSprites",value:function(e,t,r){var n,a=[],i=this._spriteInfo,l=De(e);try{for(l.s();!(n=l.n()).done;){var o=n.value;void 0===i[o.name]&&a.push(o)}}catch(s){l.e(s)}finally{l.f()}return 0===a.length?Promise.resolve():t.invoke("getSprites",a,{signal:r&&r.signal}).then((function(e){for(var t in e){var r=e[t];i[t]=r}}))}},{key:"getSpriteItems",value:function(){return this._spriteInfo}},{key:"fetchGlyphs",value:function(e,t,r,n,a){var i=[],l=this._glyphInfo[t];return l?r.forEach((function(e){l[e]||i.push(e)})):(l=this._glyphInfo[t]=[],r.forEach((function(e){return i.push(e)}))),0===i.length?Promise.resolve():n.invoke("getGlyphs",{tileID:e,font:t,codePoints:i},a).then((function(e){for(var t=0;t<e.length;t++)e[t]&&(l[t]=e[t])}))}},{key:"getGlyphItems",value:function(e){return this._glyphInfo[e]}}]),e}()}}]);
//# sourceMappingURL=2348-48dbef2155634d65c57d.js.map