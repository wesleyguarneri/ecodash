"use strict";(self.webpackChunkenergy_and_water_dashboard=self.webpackChunkenergy_and_water_dashboard||[]).push([[4431],{84431:function(e,t,r){r.r(t),r.d(t,{getPatternDescriptor:function(){return C},getSymbolLayerFill:function(){return S},previewSymbol3D:function(){return I}});var a=r(4942),n=r(15861),s=r(87757),l=r.n(s),i=r(31483),o=r(6352),u=(r(33682),r(33300)),p=r(75571),c=r(10173),h=r(37566),f=r(8792),m=r(86590),y=r(32196),b=r(6286),v=r(31310),d=r(11209),k=r(57589),g=r(69197);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var M=22,j=120,L=p.Z.getLogger("esri.symbols.support.previewSymbol3D");function O(e){var t=e.outline,r=(0,c.pC)(e.material)?e.material.color:null,a=(0,c.pC)(r)?r.toHex():null;if((0,c.Wi)(t)||"pattern"in t&&(0,c.pC)(t.pattern)&&"style"===t.pattern.type&&"none"===t.pattern.style)return"fill"===e.type&&"#ffffff"===a?{color:"#bdc3c7",width:.75}:null;var n=(0,f.F2)(t.size)||0;return{color:"rgba("+((0,c.pC)(t.color)?t.color.toRgba():"255,255,255,1")+")",width:Math.min(n,80),style:"pattern"in t&&(0,c.pC)(t.pattern)&&"style"===t.pattern.type?(0,m.Sp)(t.pattern.style):null,join:"butt",cap:"patternCap"in t?t.patternCap:"butt"}}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=e.a,a=(0,o._Y)(e),n=a.h,s=a.s/t,l=100-(100-a.v)/t,i=(0,o.xr)({h:n,s:s,v:l}),u=i.r,p=i.g,c=i.b;return[u,p,c,r]}function z(e){return"water"===e.type?(0,c.Wi)(e.color)?null:e.color:(0,c.Wi)(e.material)||(0,c.Wi)(e.material.color)?null:e.material.color}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=z(e);if(!r){if("fill"===e.type)return null;var a=m.Ne.r,n=(0,v.uH)(a,t);return[n,n,n,100]}for(var s=r.toRgba(),l=0;l<3;l++)s[l]=(0,v.uH)(s[l],t);return s}function C(e,t){return D.apply(this,arguments)}function D(){return(D=(0,n.Z)(l().mark((function e(t,r){var a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("none"!==(a=t.style)){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,(0,m.Od)((0,i.V)("esri/symbols/patterns/".concat(a,".png")),r.toCss(!0));case 5:return e.t0=e.sent,e.abrupt("return",{type:"pattern",x:0,y:0,src:e.t0,width:5,height:5});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return e.outline?O(e):{color:"rgba(0, 0, 0, 1)",width:1.5}}function Z(e,t){var r=z(e);if(!r)return null;var a="rgba(";return a+=(0,v.uH)(r.r,t)+",",a+=(0,v.uH)(r.g,t)+",",(a+=(0,v.uH)(r.b,t)+",")+r.a+");"}function E(e,t){var r=Z(e,t);return r?"pattern"in e&&(0,c.pC)(e.pattern)&&"style"===e.pattern.type&&"none"===e.pattern.style?null:{color:r,width:Math.min(e.size?(0,f.F2)(e.size):.75,80),style:"pattern"in e&&(0,c.pC)(e.pattern)&&"style"===e.pattern.type?(0,m.Sp)(e.pattern.style):null,cap:"cap"in e?e.cap:null,join:"join"in e?"miter"===e.join?(0,f.F2)(2):e.join:null}:{}}function W(e,t,r){var a=.75*r;return{type:"linear",x1:a?.25*a:0,y1:a?.5*a:0,x2:a||4,y2:a?.5*a:4,colors:[{color:e,offset:0},{color:t,offset:1}]}}function H(e,t){var r,a=t&&t.size?(0,f.F2)(t.size):null,n=t&&t.maxSize?(0,f.F2)(t.maxSize):null,s=t&&t.disableUpsampling,l=e.symbolLayers,o=[],u=0,p=0,c=l.getItemAt(l.length-1);return c&&"icon"===c.type&&(r=c.size&&(0,f.F2)(c.size)),l.forEach((function(l){if("icon"===l.type||"object"===l.type){var c="icon"===l.type?l.size&&(0,f.F2)(l.size):0,h=a||c?Math.ceil(Math.min(a||c,n||j)):M;if(l&&l.resource&&l.resource.href){var m=function(e,t){var r=t&&t.resource,a=r&&r.href;if(e.thumbnail&&e.thumbnail.url)return Promise.resolve(e.thumbnail.url);if(a&&"object"!==t.type)return Promise.resolve((0,k.nf)(e,t));var n=(0,i.V)("esri/images/Legend/legend3dsymboldefault.png");return e.styleOrigin&&(e.styleOrigin.styleName||e.styleOrigin.styleUrl)?(0,g.resolveWebStyleSymbol)(e.styleOrigin,{portal:e.styleOrigin.portal},"webRef").catch((function(e){return e})).then((function(e){var t;return(null==e||null==(t=e.thumbnail)?void 0:t.url)||n})):Promise.resolve(n)}(e,l).then((function(e){var t=l.get("material.color"),r=function(e){return"icon"===e.type?"multiply":"tint"}(l);return(0,d.r)(e,h,t,r,s)})).then((function(e){var t=e.width,r=e.height;return u=Math.max(u,t),p=Math.max(p,r),[{shape:{type:"image",x:0,y:0,width:t,height:r,src:e.url},fill:null,stroke:null}]}));o.push(m)}else{var w,x=h;"icon"===l.type&&r&&a&&(x=h*(c/r));var L="tall"===(null==t?void 0:t.symbolConfig)||(null==t||null==(w=t.symbolConfig)?void 0:w.isTall)||"object"===l.type&&function(e){var t=e.depth,r=e.height,a=e.width;return a&&t&&r&&a===t&&a<r}(l);u=Math.max(u,L?20:x),p=Math.max(p,x),o.push(Promise.resolve(function(e,t,r){var a=[];if(!e)return a;switch(e.type){case"icon":var n=t,s=t;switch(e.resource&&e.resource.primitive||y.SI){case"circle":a.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:S(e,0),stroke:O(e)});break;case"square":a.push({shape:{type:"path",path:[{command:"M",values:[0,s]},{command:"L",values:[0,0]},{command:"L",values:[n,0]},{command:"L",values:[n,s]},{command:"Z",values:[]}]},fill:S(e,0),stroke:O(e)});break;case"triangle":a.push({shape:{type:"path",path:[{command:"M",values:[0,s]},{command:"L",values:[.5*n,0]},{command:"L",values:[n,s]},{command:"Z",values:[]}]},fill:S(e,0),stroke:O(e)});break;case"cross":a.push({shape:{type:"path",path:[{command:"M",values:[.5*n,0]},{command:"L",values:[.5*n,s]},{command:"M",values:[0,.5*s]},{command:"L",values:[n,.5*s]}]},stroke:F(e)});break;case"x":a.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[n,s]},{command:"M",values:[n,0]},{command:"L",values:[0,s]}]},stroke:F(e)});break;case"kite":a.push({shape:{type:"path",path:[{command:"M",values:[0,.5*s]},{command:"L",values:[.5*n,0]},{command:"L",values:[n,.5*s]},{command:"L",values:[.5*n,s]},{command:"Z",values:[]}]},fill:S(e,0),stroke:O(e)})}break;case"object":switch(e.resource&&e.resource.primitive||b.SI){case"cone":var l=W(S(e,0),S(e,-.6),r?20:t),i=(0,v.TE)(t,r);a.push({shape:i[0],fill:l}),a.push({shape:i[1],fill:l});break;case"inverted-cone":var o=S(e,0),u=W(o,S(e,-.6),t),p=(0,v.DY)(t);a.push({shape:p[0],fill:u}),a.push({shape:p[1],fill:o});break;case"cube":var c=(0,v.Pc)(t,r);a.push({shape:c[0],fill:S(e,0)}),a.push({shape:c[1],fill:S(e,-.3)}),a.push({shape:c[2],fill:S(e,-.5)});break;case"cylinder":var h=W(S(e,0),S(e,-.6),r?20:t),f=(0,v.EB)(t,r);a.push({shape:f[0],fill:h}),a.push({shape:f[1],fill:h}),a.push({shape:f[2],fill:S(e,0)});break;case"diamond":var m=(0,v.XX)(t);a.push({shape:m[0],fill:S(e,-.3)}),a.push({shape:m[1],fill:S(e,0)}),a.push({shape:m[2],fill:S(e,-.3)}),a.push({shape:m[3],fill:S(e,-.7)});break;case"sphere":var d=W(S(e,0),S(e,-.6));d.x1=0,d.y1=0,d.x2=.25*t,d.y2=.25*t,a.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:d});break;case"tetrahedron":var k=(0,v.tp)(t);a.push({shape:k[0],fill:S(e,-.3)}),a.push({shape:k[1],fill:S(e,0)}),a.push({shape:k[2],fill:S(e,-.6)})}}return a}(l,x,L)))}}})),(0,h.as)(o).then((function(e){var r=[];return e.forEach((function(e){e.value?r.push(e.value):e.error&&L.warn("error while building swatchInfo!",e.error)})),(0,d.w)(r,[u,p],{node:t&&t.node,scale:!1,opacity:t&&t.opacity})}))}function _(){return(_=(0,n.Z)(l().mark((function e(t,r){var a,n,s,i,o,u,p,h,m,y,b,k,g,w,L,D,F,Z,W,H,_,I,J,N,R,T,V,Y,q,A,U,X;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="mesh-3d"===t.type,n=t.symbolLayers,s=r&&r.size?(0,f.F2)(r.size):null,i=r&&r.maxSize?(0,f.F2)(r.maxSize):null,o=s||M,u=[],p=0,h=0,m=!1,y=0;case 3:if(!(y<n.length)){e.next=42;break}if(b=n.getItemAt(y),k=[],!a||"fill"===b.type){e.next=7;break}return e.abrupt("continue",39);case 7:g=v.JZ.fill[0],e.t0=b.type,e.next="fill"===e.t0?11:"line"===e.t0?22:"extrude"===e.t0?28:"water"===e.t0?33:38;break;case 11:if(w=O(b),L=Math.min(o,i||j),p=Math.max(p,L),h=Math.max(h,L),m=!0,D=S(b,0),F="pattern"in b&&b.pattern,Z=z(b),e.t1=!a&&(0,c.pC)(F)&&"style"===F.type&&"solid"!==F.style&&Z,!e.t1){e.next=20;break}return e.next=19,C(F,Z);case 19:D=e.sent;case 20:return k.push({shape:g,fill:D,stroke:w}),e.abrupt("break",38);case 22:if(W=E(b,0),!(0,c.Wi)(W)){e.next=25;break}return e.abrupt("break",38);case 25:return H={stroke:W,shape:g},p=Math.max(p,M),h=Math.max(h,M),k.push(H),e.abrupt("break",38);case 28:return _=x({join:"round",width:1},E(b,-.4)),I=S(b,0),J=S(b,-.2),N=Math.min(o,i||j),R=(0,v.EV)(N),_.width=1,k.push({shape:R[0],fill:J,stroke:_}),k.push({shape:R[1],fill:J,stroke:_}),k.push({shape:R[2],fill:I,stroke:_}),M,T=.7*M+.5*N,p=Math.max(p,22),h=Math.max(h,T),e.abrupt("break",38);case 33:return V=z(b),Y=P(V),q=P(V,2),A=P(V,3),U=(0,v.ht)(),m=!0,k.push({shape:U[0],fill:Y}),k.push({shape:U[1],fill:q}),k.push({shape:U[2],fill:A}),X=Math.min(o,i||j),p=Math.max(p,X),h=Math.max(h,X),e.abrupt("break",38);case 38:u.push(k);case 39:y++,e.next=3;break;case 42:return e.abrupt("return",Promise.resolve((0,d.w)(u,[p,h],{node:r&&r.node,scale:m,opacity:r&&r.opacity})));case 43:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t){if(0===e.symbolLayers.length)return Promise.reject(new u.Z("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(e.type){case"point-3d":return H(e,t);case"line-3d":return function(e,t){var r,a=e.symbolLayers,n=[],s=(0,k.YW)(e),l=t&&t.size?(0,f.F2)(t.size):null,i=(t&&t.maxSize?(0,f.F2)(t.maxSize):null)||80,o=0,u=0;return a.forEach((function(e,t){if(e&&("line"===e.type||"path"===e.type)){var a=[];switch(e.type){case"line":var s=E(e,0);if((0,c.Wi)(s))break;var p=s&&s.width||0;0===t&&(r=p);var h=Math.min(l||p,i),f=0===t?h:l?h*(p/r):h,m=f>20?2*f:40;u=Math.max(u,f),o=Math.max(o,m),s.width=f,a.push({shape:{type:"path",path:[{command:"M",values:[0,.5*u]},{command:"L",values:[o,.5*u]}]},stroke:s});break;case"path":var y=Math.min(l||M,i),b=S(e,0),d=S(e,-.2),k=Z(e,-.4),g=k?{color:k,width:1}:{};if("quad"===e.profile){var w=e.width,j=e.height,L=(0,v.eb)(w&&j?w/j:1,0===j,0===w),O=x(x({},g),{},{join:"bevel"});a.push({shape:L[0],fill:d,stroke:O}),a.push({shape:L[1],fill:d,stroke:O}),a.push({shape:L[2],fill:b,stroke:O})}else a.push({shape:v.JZ.pathSymbol3DLayer[0],fill:d,stroke:g}),a.push({shape:v.JZ.pathSymbol3DLayer[1],fill:b,stroke:g});u=Math.max(u,y),o=u}n.push(a)}})),Promise.resolve((0,d.w)(n,[o,u],{node:t&&t.node,scale:s,opacity:t&&t.opacity}))}(e,t);case"polygon-3d":case"mesh-3d":return function(e,t){return _.apply(this,arguments)}(e,t)}return Promise.reject(new u.Z("symbolPreview: swatchInfo3D","symbol not supported."))}}}]);
//# sourceMappingURL=4431-fb7e0203cd4fc652597c.js.map