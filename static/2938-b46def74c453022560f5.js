"use strict";(self.webpackChunkenergy_and_water_dashboard=self.webpackChunkenergy_and_water_dashboard||[]).push([[2938],{82938:function(e,t,r){r.r(t),r.d(t,{default:function(){return T}});var n=r(15861),o=r(4942),i=r(15671),a=r(43144),u=r(11752),s=r(60136),c=r(6215),l=r(61120),p=r(87757),f=r.n(p),d=r(83195),y=(r(58168),r(10173)),h=r(98840),v=r(89636),m=(r(43079),r(33682)),b=(r(64003),r(9634)),g=r(30732),w=r(67124),O=r(86523),k=r(37566),_=r(16602),S=r(79228),x=r(59007);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.Z)(e);if(t){var o=(0,l.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}var Z=function(e){(0,s.Z)(v,e);var t,r,o,u,c,l,p,d,h=C(v);function v(e){var t;return(0,i.Z)(this,v),(t=h.call(this,e)).type="csv",t.refresh=(0,k.Ds)(function(){var e=(0,n.Z)(f().mark((function e(r){var n,o,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load();case 2:return e.next=4,t._connection.invoke("refresh",r);case 4:return n=e.sent,o=n.extent,i=n.timeExtent,e.abrupt("return",(t.sourceJSON.extent=o,i&&(t.sourceJSON.timeInfo.timeExtent=[i.start,i.end]),{dataChanged:!0,updates:{extent:t.sourceJSON.extent,timeInfo:t.sourceJSON.timeInfo}}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t}return(0,a.Z)(v,[{key:"load",value:function(e){var t=(0,y.pC)(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}},{key:"destroy",value:function(){var e;null==(e=this._connection)||e.close(),this._connection=null}},{key:"openPorts",value:(d=(0,n.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.abrupt("return",this._connection.openPorts());case 3:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"queryFeatures",value:(p=(0,n.Z)(f().mark((function e(t){var r,n,o=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.load(r);case 3:return e.next=5,this._connection.invoke("queryFeatures",t?t.toJSON():null,r);case 5:return n=e.sent,e.abrupt("return",S.default.fromJSON(n));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"queryFeaturesJSON",value:(l=(0,n.Z)(f().mark((function e(t){var r,n=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},e.next=3,this.load(r);case 3:return e.abrupt("return",this._connection.invoke("queryFeatures",t?t.toJSON():null,r));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"queryFeatureCount",value:(c=(0,n.Z)(f().mark((function e(t){var r,n=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},e.next=3,this.load(r);case 3:return e.abrupt("return",this._connection.invoke("queryFeatureCount",t?t.toJSON():null,r));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"queryObjectIds",value:(u=(0,n.Z)(f().mark((function e(t){var r,n=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},e.next=3,this.load(r);case 3:return e.abrupt("return",this._connection.invoke("queryObjectIds",t?t.toJSON():null,r));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"queryExtent",value:(o=(0,n.Z)(f().mark((function e(t){var r,n,o=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.load(r);case 3:return e.next=5,this._connection.invoke("queryExtent",t?t.toJSON():null,r);case 5:return n=e.sent,e.abrupt("return",{count:n.count,extent:x.Z.fromJSON(n.extent)});case 7:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"querySnapping",value:(r=(0,n.Z)(f().mark((function e(t){var r,n=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},e.next=3,this.load(r);case 3:return e.abrupt("return",this._connection.invoke("querySnapping",t,r));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"_startWorker",value:(t=(0,n.Z)(f().mark((function e(t){var r,n,o,i,a,u,s,c,l;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.bA)("CSVSourceWorker",{strategy:(0,m.Z)("feature-layers-workers")?"dedicated":"local",signal:t});case 2:return this._connection=e.sent,r=this.loadOptions,n=r.url,o=r.delimiter,i=r.fields,a=r.latitudeField,u=r.longitudeField,s=r.spatialReference,c=r.timeInfo,e.next=13,this._connection.invoke("load",{url:n,customParameters:this.customParameters,parsingOptions:{delimiter:o,fields:null==i?void 0:i.map((function(e){return e.toJSON()})),latitudeField:a,longitudeField:u,spatialReference:null==s?void 0:s.toJSON(),timeInfo:null==c?void 0:c.toJSON()}},{signal:t});case 13:l=e.sent,this.locationInfo=l.locationInfo,this.sourceJSON=l.layerDefinition,this.delimiter=l.delimiter;case 15:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),v}(O.Z);(0,d._)([(0,v.Cb)()],Z.prototype,"type",void 0),(0,d._)([(0,v.Cb)()],Z.prototype,"loadOptions",void 0),(0,d._)([(0,v.Cb)()],Z.prototype,"customParameters",void 0),(0,d._)([(0,v.Cb)()],Z.prototype,"locationInfo",void 0),(0,d._)([(0,v.Cb)()],Z.prototype,"sourceJSON",void 0),(0,d._)([(0,v.Cb)()],Z.prototype,"delimiter",void 0);var j=Z=(0,d._)([(0,g.j)("esri.layers.graphics.sources.CSVSource")],Z),I=r(47e3),F=r(56100),q=r(3120),N=r(39356);function P(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.Z)(e);if(t){var o=(0,l.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}var L=function(e){(0,s.Z)(c,e);var t,r,o=E(c);function c(){var e;(0,i.Z)(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).capabilities=(0,I.MS)(!1,!1),e.delimiter=null,e.editingEnabled=!1,e.fields=null,e.latitudeField=null,e.locationType="coordinates",e.longitudeField=null,e.operationalLayerType="CSV",e.outFields=["*"],e.path=null,e.portalItem=null,e.spatialReference=N.Z.WGS84,e.source=null,e.type="csv",e}return(0,a.Z)(c,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?J({url:e},t):e}},{key:"isTable",get:function(){return this.loaded&&null==this.geometryType}},{key:"readWebMapLabelsVisible",value:function(e,t){return null!=t.showLabels?t.showLabels:!!(t.layerDefinition&&t.layerDefinition.drawingInfo&&t.layerDefinition.drawingInfo.labelingInfo)}},{key:"url",set:function(e){if(e){var t=(0,h.mN)(e);this._set("url",t.path),t.query&&(this.customParameters=J(J({},this.customParameters),t.query))}else this._set("url",e)}},{key:"createGraphicsSource",value:(r=(0,n.Z)(f().mark((function e(t){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new j({loadOptions:{delimiter:this.delimiter,fields:this.fields,latitudeField:this.latitudeField,longitudeField:this.longitudeField,spatialReference:this.spatialReference,timeInfo:this.timeInfo,url:this.url},customParameters:this.customParameters}),this._set("source",r),e.next=4,r.load({signal:t});case 4:return this.read({locationInfo:r.locationInfo,columnDelimiter:r.delimiter},{origin:"service",url:this.parsedUrl}),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"queryFeatures",value:function(e,t){var r=this;return this.load().then((function(){return r.source.queryFeatures(F.Z.from(e)||r.createQuery())})).then((function(e){if(null!=e&&e.features){var t,n=P(e.features);try{for(n.s();!(t=n.n()).done;){var o=t.value;o.layer=o.sourceLayer=r}}catch(i){n.e(i)}finally{n.f()}}return e}))}},{key:"queryObjectIds",value:function(e,t){var r=this;return this.load().then((function(){return r.source.queryObjectIds(F.Z.from(e)||r.createQuery())}))}},{key:"queryFeatureCount",value:function(e,t){var r=this;return this.load().then((function(){return r.source.queryFeatureCount(F.Z.from(e)||r.createQuery())}))}},{key:"queryExtent",value:function(e,t){var r=this;return this.load().then((function(){return r.source.queryExtent(F.Z.from(e)||r.createQuery())}))}},{key:"write",value:function(e,t){return(0,u.Z)((0,l.Z)(c.prototype),"write",this).call(this,e,J(J({},t),{},{writeLayerSchema:!0}))}},{key:"hasDataChanged",value:(t=(0,n.Z)(f().mark((function e(){var t,r,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.source.refresh(this.customParameters);case 3:return t=e.sent,r=t.dataChanged,n=t.updates,e.abrupt("return",((0,y.pC)(n)&&this.read(n,{origin:"service",url:this.parsedUrl,ignoreDefaults:!0}),r));case 9:e.prev=9,e.t0=e.catch(0);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(){return t.apply(this,arguments)})},{key:"_verifyFields",value:function(){}},{key:"_verifySource",value:function(){}},{key:"_hasMemorySource",value:function(){return!1}}]),c}(w.default);(0,d._)([(0,v.Cb)({readOnly:!0,json:{read:!1,write:!1}})],L.prototype,"capabilities",void 0),(0,d._)([(0,v.Cb)({type:[","," ",";","|","\t"],json:{read:{source:"columnDelimiter"},write:{target:"columnDelimiter",ignoreOrigin:!0}}})],L.prototype,"delimiter",void 0),(0,d._)([(0,v.Cb)({readOnly:!0,type:Boolean,json:{origins:{"web-scene":{read:!1,write:!1}}}})],L.prototype,"editingEnabled",void 0),(0,d._)([(0,v.Cb)({json:{read:{source:"layerDefinition.fields"},write:{target:"layerDefinition.fields"}}})],L.prototype,"fields",void 0),(0,d._)([(0,v.Cb)({type:Boolean,readOnly:!0})],L.prototype,"isTable",null),(0,d._)([(0,b.r)("web-map","labelsVisible",["layerDefinition.drawingInfo.labelingInfo","showLabels"])],L.prototype,"readWebMapLabelsVisible",null),(0,d._)([(0,v.Cb)({type:String,json:{read:{source:"locationInfo.latitudeFieldName"},write:{target:"locationInfo.latitudeFieldName",ignoreOrigin:!0}}})],L.prototype,"latitudeField",void 0),(0,d._)([(0,v.Cb)({type:["show","hide"]})],L.prototype,"listMode",void 0),(0,d._)([(0,v.Cb)({type:["coordinates"],json:{read:{source:"locationInfo.locationType"},write:{target:"locationInfo.locationType",ignoreOrigin:!0,isRequired:!0}}})],L.prototype,"locationType",void 0),(0,d._)([(0,v.Cb)({type:String,json:{read:{source:"locationInfo.longitudeFieldName"},write:{target:"locationInfo.longitudeFieldName",ignoreOrigin:!0}}})],L.prototype,"longitudeField",void 0),(0,d._)([(0,v.Cb)({type:["CSV"]})],L.prototype,"operationalLayerType",void 0),(0,d._)([(0,v.Cb)()],L.prototype,"outFields",void 0),(0,d._)([(0,v.Cb)({type:String,json:{origins:{"web-scene":{read:!1,write:!1}},read:!1,write:!1}})],L.prototype,"path",void 0),(0,d._)([(0,v.Cb)({json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],L.prototype,"portalItem",void 0),(0,d._)([(0,v.Cb)({json:{read:!1},cast:null,type:j,readOnly:!0})],L.prototype,"source",void 0),(0,d._)([(0,v.Cb)({json:{read:!1},value:"csv",readOnly:!0})],L.prototype,"type",void 0),(0,d._)([(0,v.Cb)({json:{read:q.r,write:{isRequired:!0,ignoreOrigin:!0,writer:q.w}}})],L.prototype,"url",null);var T=L=(0,d._)([(0,g.j)("esri.layers.CSVLayer")],L)}}]);
//# sourceMappingURL=2938-b46def74c453022560f5.js.map